/*!
 * Alopex Grid v3.5.4
 * http://grid.alopex.io
 * 
 * Copyright (c) 2015 SK Holdings Co., Ltd. All rights reserved.
 * 
 * This software is the confidential and proprietary information of SK Holdings.
 * You shall not disclose such confidential information and shall use it only in
 * accordance with the terms of the license agreement you entered into with SK Holdings.
 * 
 * Date: 2016-01-28 16:38 GMT+0900
 */

+function(a){function b(){}function c(a,b){b=" "+b+" ";var c=a.children;return function(){for(var a=[],d=0,e=c.length;e>d;d++)(" "+c[d].className+" ").indexOf(b)>=0&&a.push(c[d]);return a}}function d(a,b){return this.el=a,this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;return"float"==b&&(b="styleFloat"),c.test(b)&&(b=b.replace(c,function(){return arguments[2].toUpperCase()})),a.currentStyle[b]?a.currentStyle[b]:null},this}function e(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}function f(){return lb+nb++}function g(){return nb++}function h(){if(window.getSelection){if(window.getSelection().empty)try{window.getSelection().empty()}catch(a){}else if(window.getSelection().removeAllRanges)try{window.getSelection().removeAllRanges()}catch(a){}}else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(a){}}function i(b){return a.isFunction(b)?b():b}function j(a){return!(null===a||void 0===a)}function l(a,b){return b>a?a:b}function m(a,b){return a>b?a:b}function n(a){var b=a.toString().replace(ob,""),c=b.slice(b.indexOf("(")+1,b.indexOf(")")).match(pb);return null===c&&(c=[]),c}function o(a){for(var b=String,c=b.fromCharCode,d=isNaN,e="",f="",g=Math,h=0,i=a?a.length:-1;i>h;h++)d(mb(a[h],16))?(e+=c.call(b,mb(f,g.pow(4,2))>>1),f=""):f+=a[h];return e?e:null}function p(a){return o(a)}function q(){return" "}function r(){return o("d0xdeje6me8zdcmc2tdazcar")}function s(){return p()||0}function t(){return o()||null}function u(){return p()||""}function v(){return o()||""}function w(b){if(s()&&qb.now()>=mb(s(),16))return b||rb?null:rb=setTimeout(u(),10),!1;var c=null;return(c=t())&&a.inArray(gb.prop(o("d8vdehc6wc2ke8wd2mdexdcy"))[r()],c.split(q()))<0?(b||sb?null:sb=setTimeout(v(),10),!1):!0}function x(a,b,c){for(var d=c.split("."),e=d.pop(),f=d.shift(),g=a,h=b;f;){if(!h[f])return;g[f]||(g[f]={}),g=g[f],h=h[f],f=d.shift()}h.hasOwnProperty(e)&&(g[e]=h[e])}function y(b,c){var d=a.extend(!0,{},b,c);if(a.isPlainObject(c))for(var e=["headerGroup","columnMapping","footer.footerMapping","grouping.by","filterTypeList","instantInlineEditType","defaultContextMenu","contextMenu","paging.pagerSelect"],f=0;f<e.length;f++)x(d,c,e[f]);return d}function z(b,c){var d={};if(a.isPlainObject(c)){if(c.extend)for(var e=a.isArray(c.extend)?c.extend:[c.extend],f=0,g=e.length;g>f;f++){var h=tb.commonOption.definition[e[f]];a.isPlainObject(h)&&(d=y(d,h))}d=y(d,c)}return b.state.loaded&&b.option||(b.option=y(tb.defaultOption,tb.commonOption)),a.isEmptyObject(d)||(b.option=y(b.option,d)),b.option}function A(a,b){var c=tb.defaultOption.optionMergeLegacyMode;return tb.commonOption.hasOwnProperty("optionMergeLegacyMode")&&(c=tb.commonOption.optionMergeLegacyMode),b&&"object"==typeof b&&b.hasOwnProperty("optionMergeLegacyMode")&&(c=b.optionMergeLegacyMode),c}function B(a){return wb[a]||a}function C(a){return String(a).replace(/[&<>"'\s\u00A0]/g,B)}function D(b,c){return a.isFunction(b[c])?b[c](b):b[c]}function E(a,b){var c=b.getAttribute("data-alopexgrid-dataid"),d=b.getAttribute("data-alopexgrid-columnindex"),e=b.getAttribute("data-alopexgrid-columndepth");if(b&&b.children&&b.children.length)for(var f=0,g=b.children.length;g>f;f++)b.children[f]&&b.children[f].setAttribute&&b.children[f].setAttribute("data-alopexgrid-inscribe",a.key+","+c+","+d+","+e)}function F(a){return 0===a.state.renderFromRenderedIndex}function G(a){return a.state.renderFromColumnIndex===a.state.visibleColumnMappingList[0].columnIndex}function H(b,c){window.__AlopexGridOrgTempAlert__||(window.__AlopexGridOrgTempAlert__=window.alert),window.__AlopexGridOrgTempConfirm__||(window.__AlopexGridOrgTempConfirm__=window.confirm),window.alert=function(){var d=a.makeArray(arguments);b?b():0;var e=null;return e=jb?Function.prototype.apply.call(window.__AlopexGridOrgTempAlert__,window,d):window.__AlopexGridOrgTempAlert__.apply(window,d),c?c():0,e},window.confirm=function(){var d=a.makeArray(arguments);b?b():0;var e=null;return e=jb?Function.prototype.apply.call(window.__AlopexGridOrgTempConfirm__,window,d):window.__AlopexGridOrgTempConfirm__.apply(window,d),c?c():0,e}}function I(a,b){window.__AlopexGridOrgTempAlert__&&(window.alert=window.__AlopexGridOrgTempAlert__),window.__AlopexGridOrgTempConfirm__&&(window.confirm=window.__AlopexGridOrgTempConfirm__),delete window.__AlopexGridOrgTempAlert__,delete window.__AlopexGridOrgTempConfirm__}function J(a){var b=a.data.$bar;jb?b.css("top",a.data.startTop+(a.pageY-a.data.startPageY)+"px"):b.css("transform","translateY("+(a.data.startTop+(a.pageY-a.data.startPageY))+"px)"),a.preventDefault(),h()}function K(b){a(document.body).off(".alopexgridRowResize");var c=b.data.self;b.data.$bar.remove(),b.data.$pos.remove();var d=c.state.rowHeightMapByDataId[b.data.dataId]||c.state.rowHeight,e=b.pageY-b.data.startPageY,f=Math.max(3,d+e);e&&(c.state.scrollyEnd=!1,b.data.self.state.rowHeightMapByDataId[b.data.dataId]=f,b.data.self._refreshBoard(!0),b.data.self.redraw()),c._triggerGridEvent("UIRowResizeEnd",{row:b.data.rowIndex,height:f})}function L(a){if(a.data.self.state.resizing){var b=a.pageX-a.data.prevX;a.data.prevX=a.pageX,a.data.totalMoveAmount=a.data.totalMoveAmount+b,a.data.bar.style.left=parseInt(a.data.bar.style.left)+b+"px",a.preventDefault(),h()}}function M(a){var b=a.data.self,c=a.data.totalMoveAmount,d=parseInt(b.state.columnIndexToMapping[a.data.columnIndex].width)+c;if(10>d&&(d=10),b.state.resizing=!1,a.data.bar.style.display="none",b.state.columnIndexToMapping[a.data.columnIndex].width=d,b.state.headerSelection)for(var e=b.state.headerSelection.from,f=b.state.headerSelection.to,g=e;f>=g;g++){var h=b.state.columnIndexToMapping[g];h&&(h.width=d)}a.data.totalMoveAmount>0&&(b.state.scrollxEnd=!1),hb.off(".alopexgridresizeevent"+b.eventns+a.data.self.key),b.$wrapper[0].removeChild(a.data.bar),b.redraw(),b._triggerGridEvent("UIColumnResizeEnd",{mapping:a.data.mapping,width:parseInt(a.data.mapping.width),fitWidth:b.state.columnFitWidthById[a.data.mapping.id]})}function N(a,b,c,e){function f(a,b){var c=document.createElement("span");return c.style.cssText=o,c.textContent=s.substring(a,b),u.appendChild(c),c}function g(){var b=document.body,c=document.defaultView,d=document.documentElement,e=document.createElement("div");e.style.paddingLeft=e.style.width="1px",b.appendChild(e);var f=2==e.offsetWidth;b.removeChild(e),e=a.getBoundingClientRect();var g=d.clientTop||b.clientTop||0,h=d.clientLeft||b.clientLeft||0,i=c.pageYOffset||f&&d.scrollTop||b.scrollTop,j=c.pageXOffset||f&&d.scrollLeft||b.scrollLeft;return{top:e.top+i-g,left:e.left+j-h}}function h(b,c){if(jb)var e=d(a,null).getPropertyValue(b);else var e=document.defaultView.getComputedStyle(a,null).getPropertyValue(b);return c?parseFloat(e):e}if(!(a&&"value"in a))return a;if("string"==typeof b&&(b=parseFloat(b)),("number"!=typeof b||isNaN(b))&&(b=0),b=0>b?0:Math.min(a.value.length,b),"string"==typeof c&&(c=parseFloat(c)),("number"!=typeof c||isNaN(c)||b>c)&&(c=b),c=0>c?0:Math.min(a.value.length,c),"function"==typeof a.createTextRange){var i=a.createTextRange();return i.collapse(!0),i.moveStart("character",b),i.moveEnd("character",c-b),i.getBoundingClientRect()}var j=g(),k=j.top,l=j.left,m=h("width",!0),n=h("height",!0),o="white-space:pre;padding:0;margin:0;",p=["direction","font-family","font-size","font-size-adjust","font-variant","font-weight","font-style","letter-spacing","line-height","text-align","text-indent","text-transform","word-wrap","word-spacing"];k+=h("padding-top",!0),k+=h("border-top-width",!0),l+=h("padding-left",!0),l+=h("border-left-width",!0),l+=1;for(var q=0;q<p.length;q++){var r=p[q];o+=r+":"+h(r)+";"}var s=a.value,t=s.length,u=document.createElement("div");b>0&&f(0,b);var v=f(b,c);t>c&&f(c,t),u.style.cssText=o,u.style.position="absolute",u.style.top=k+"px",u.style.left=l+"px",u.style.width=m+"px",u.style.height=n+"px",document.body.appendChild(u);var w=v.getBoundingClientRect();return e||u.parentNode.removeChild(u),w}function O(a,b,c){if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,null!=c?c:b);else if(a.createTextRange){var d=a.createTextRange();d.collapse(!0),d.moveEnd("character",null!=c?c:b),d.moveStart("character",b),d.select()}}function P(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else(a.selectionStart||"0"==a.selectionStart)&&(b=a.selectionStart);return b}function Q(b,c){if(a.contains(document.documentElement,b))if("undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var d=document.createRange();d.selectNodeContents(b),c?null:d.collapse(!1);var e=window.getSelection();e.removeAllRanges(),e.addRange(d)}else if("undefined"!=typeof document.body.createTextRange){var f=document.body.createTextRange();f.moveToElementText(b),c?null:f.collapse(!1),f.select()}}function R(a,b,c){return Math.floor(Math.sqrt(Math.pow(b-(a.offset().left+a.width()/2),2)+Math.pow(c-(a.offset().top+a.height()/2),2)))}function S(a,b){return a.state.columnIndexToMapping[b]||null}function T(a,b){return a.state.columnIndexToKeyMap[b]}function U(a,b){var c=b.columnIndex,d=document.createElement("div");return d.setAttribute("class","header-dragdrop-handle"),d.setAttribute("data-alopexgrid-dragdropcolumnindex",c),d.setAttribute("onmousedown",ab+".run('"+a.key+"','_headerDragStart',event,"+c+");"),d}function V(a){var b=document.createElement("div");return b.setAttribute("class","sorting-handle alopexgrid-handle"),b}function W(a,b){var c=b.columnIndex,d=document.createElement("div");return d.setAttribute("class","column-resizing-handle resizing-handle alopexgrid-handle"),d.setAttribute("data-alopexgrid-resizingcolumnindex",c),d.setAttribute("onmousedown",ab+".run('"+a.key+"','_columnResizeStart',event,"+c+");"),d}function X(a,b,c,d,e,f,g){var h=[],i=[ab+".run('",a.key,"','_parseFilterHeader','"+e+"','"+f+"','"+g+"',event);"].join("");h.push('<ul class="alopexgrid-filterdropdown">'),h.push('<li class="header">'+tb.i18n("filterHeader")+"</li>"),h.push('<li class="menu remove"'),h.push(' data-alopexgrid-key="'+b+'"'),h.push(' value="remove">'),h.push(tb.i18n("removeFilter")+"</li>"),h.push('<li class="header">'+tb.i18n("textFilterHeader")+"</li>"),h.push('<li class="menu">'+tb.i18n("textFilterLabel")+': <input type="text" class="filtertext" name="alopexgrid-filter-textinput" value="'+d+'"/></li>'),h.push('<li class="menu">'+tb.i18n("textFilterTypeLabel")+': <select class="filterselect" onchange="',i,'" disabled>'),h.push('<option value="" selected="selected" disabled>'+tb.i18n("selectItem")+"</option>");for(var j="",k=0;k<a.option.filterTypeList.length;k++)j=a.option.filterTypeList[k],h.push("<option "),h.push(' data-alopexgrid-key="'+b+'"'),h.push(' value="',j,'"'),c==j&&h.push(' selected="selected"'),h.push(">",tb.i18n(j),"</option>");return h.push("</select></li>"),h.push('<li class="header">'+tb.i18n("dataFilterHeader")+"</li>"),h.push("</ul>"),h.join("")}function Y(a,b){b?(a.removeClass("af-disabled"),a.removeClass("disabled"),a.removeAttr("disabled")):(a.addClass("af-disabled"),a.addClass("disabled"),a.attr("disabled","disabled"))}function Z(b,c,d,e,f){function g(a,b,c){return a===b?0:b>a?-1:1}var h=a.isArray(b.state.filteredDataList),i=[],j=[],k=!1;b.state.filterColumnMappingList;if(h&&b.state.filterColumnMappingList){for(var l in b.state.filterColumnMappingList)b.state.filterColumnMappingList.hasOwnProperty(l)&&(b.state.filterColumnMappingList[l].columnIndex!=e?j.push(b.state.filterColumnMappingList[l].filterOption):k=!0);i=k?0==j.length?b.state.data:b._getFilteredDataListExcept(parseInt(e)):b.state.renderTargetDataList}else i=b.state.data;var m,n,o=h?b.state.filteredDataList:"",p={},q={},r={};if(i){n=i.length;for(var s=0;n>s;s++)m=i[s],p[m[d]]!==!0&&(p[m[d]]=!0,q[m[d]]=m)}if(h&&o){n=o.length;for(var s=0;n>s;s++)m=o[s],r[m[d]]=!0}var t,u,v,w=b.columnInfo(e),x=w.useRenderToFilter;if(b.state.isFilterRendered=!1,w.render&&x){u=w.render;var y=w.render.type;a.isFunction(w.render)?(b.state.isFilterRendered=!0,t=w.render):y&&b.option.renderMapping.hasOwnProperty(y)&&(t=b.option.renderMapping[y].renderer,a.isFunction(t)&&(v=!1,b.state.isFilterRendered=!0))}new tb(c.get(0),{autoColumnIndex:!0,height:200,width:200,title:null,autoResize:!1,enableDefaultContextMenu:!1,enableContextMenu:!1,contextMenu:!1,rowClickSelect:!0,rowInlineEdit:!1,cellInlineEdit:!1,cellSelectable:!1,disableTextSelection:!0,pager:!1,filteringHeader:!1,fitTableWidth:!0,footer:!1,headerGroup:null,defaultSorting:{sortingColumn:"label",sortingDirection:"asc"},columnMapping:[{selectorColumn:!0,width:30},{key:"label",width:155,title:tb.i18n("filterList"),resizing:"self",sorting:function(a,b,c,d){var e=this;if(null!=z&&null!=z.state)return"number"===z.state.columnSortingType&&(a=Number(a),b=Number(b)),e.state.selectAll?g(a,b):c._state.selected?d._state.selected?g(a,b):-1:d._state.selected?1:g(a,b)},render:function(a,c,d){var e=this,f=document.createDocumentFragment(),g=document.createElement("label");if(g.className="alopexgrid-filter-checkboxlabel",void 0==c.label||"undefined"===c.label)g.appendChild(document.createTextNode(tb.i18n("noData")));else if(b.state.isFilterRendered){var h=b._dataGetByIndex({id:c.dataid}),i=w,j=e.state.filterRenderFuntion(h[i.key],h,i.render||{type:"string"},i,b);b._setCellContent(j,g)}else g.appendChild(document.createTextNode(c.label));return f.appendChild(g),f}}]}),c.on("mousedown."+b.key,".headercell",function(a){var b=tb.parseEvent(a);if(b.mapping.selectorColumn){var c=Za(b.$grid);c.state.selectAll?Y(f,!1):Y(f,!0)}}),c.on("mousedown."+b.key,".bodycell",function(a){var b=tb.parseEvent(a),c=(b.data,Za(b.$grid));if(0!=c.state.data.length){c.sortClear();var d=c.state.data.length,e=c._dataGet({_state:{selected:!0}}).length;e===d-1&&b.data._state.selected===!1?c.state.selectAll=!0:c.state.selectAll=!1,0===d||1===e&&b.data._state.selected?Y(f,!1):Y(f,!0)}});var z=Za(c);w.sorting?z.state.columnSortingType=w.sorting:z.state.columnSortingType=!0,null==z.state.filterDuplicateMap&&(z.state.filterDuplicateMap={}),z.state.filterRenderFuntion=t,z.state.isDefaultRenderType=v,z.state.filterRenderObj=u,z.state.filterRenderMapping=w;var A,B=[],C=0,D=!0;for(value in p){A=!0;var m=q[value],E="";if(b.state.isFilterRendered){if(z.state.filterRenderFuntion&&z.state.isDefaultRenderType?E=z.state.filterRenderFuntion(z.state.filterRenderObj,value):z.state.filterRenderFuntion&&null!==z.state.isDefaultRenderType&&(E=z.state.filterRenderFuntion(value,m,w.render||{type:"string"},w,z)),(E&&E.nodeType||E.jquery)&&(E=a(E).text()),z.state.filterDuplicateMap.hasOwnProperty(E)){z.state.filterDuplicateMap[E][value]=!0;continue}z.state.filterDuplicateMap[E]={}}h&&r[value]!==!0&&(D=!1,A=!1),B[C]={_state:{selected:A},label:value,dataid:m._index.id},C++}z.dataSet(B),D?z.state.selectAll=!0:z.state.selectAll=!1}function $(b){var c=a(b.target),d=b.data.self,e=a.trim(c.attr("class"));if("alopexgrid-filter-dropdownbutton"!==e&&"alopexgrid-filter-dropdownbutton filtered"!==e&&"alopexgrid-filter-checkboxlabel"!==e&&"alopexgrid-filter-checkbox"!==e&&c){if(c.closest(".column-title").length>0)return;if(c.closest(".alopexgrid-filterdropdown-wrapper,.alopexgrid-filter-checkboxlabel,.alopexgrid-filter-checkbox").length)return;d._removeFilterDropdown()}}function _(a){var b=(a.target,a.data.self),c=a.which?a.which:a.keyCode;switch(c){case 27:b._removeFilterDropdown()}}function aa(a,b){var c=null;return c=isNaN(Number(b))?b:T(a,parseInt(b))}function ba(b){return!b||a.isEmptyObject(b)}function ca(a,b,c){var d=a[a.length-1];if(d){var e=d[b];if(!e)return!1;var f=Number(e.from),g=Number(e.to),h=Number(b);return f===h?c?e:g-f:h>f&&g>h?c?e:!0:!1}}function da(b,c){var d=null;return b&&b.length?(a.each(b,function(a,b){if(b)if(d){var e=ca(b,Number(c),!0);Math.abs(e.to-e.from)>Math.abs(d.to-d.from)&&(d=e)}else d=ca(b,Number(c),!0)}),d):d}function ea(a,b,c){if(c[a]=c[a]||0,b[a])for(var d=0,e=b[a].length;e>d;d++)c[b[a][d]]=(c[a]||0)+1,ea(b[a][d],b,c)}function fa(b,c,d){if(!c)return null;var e=[];a.isArray(c)||(c=[c]);for(var f=a.map(c,function(a){return a&&a._index?a._index.id:void 0}),g=0;g<b.state.data.length;g++){var h=b.state.data[g];a.inArray(h._index.id,f)>=0&&e.push(h)}if(d)for(var i=b.state.data.length;i--;){var h=b.state.data[i];a.inArray(h._index.id,f)>=0&&b.state.data.splice(i,1)}return e}function ga(a,b,c){return tb.filterFunction[c.filterOption.type](a,c.filterOption.value)}function ha(a){return j(a.columnIndex)&&a.hidden!==!0}function ia(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];if(Number(e.columnIndex)===Number(b)||"string"==typeof e.key&&e.key===b)return!!e.hidden}return!1}function ja(b){var c="";return b.state.dataFilltrimmer&&(c+="self.state.dataFilltrimmer(self, item);"),b.state.dataCompositor&&(c+="self.state.dataCompositor(self, item);"),a.isFunction(b.option.valueFilter)&&(c+="self._filterDataByValueFilter(item);"),b.option.setOriginalFromStart&&(c+="item._original = AlopexGrid.trimObject(item);"),new Function("AlopexGrid","self","item",c)}function ka(b,c,d,e,f){e=e||{};var g=c[d];if(f&&(g=tb.currentData(g)),e._index){if(e._index.hasOwnProperty("id"))return e._index.id===g._index.id?!0:!1;if(e._index.hasOwnProperty("data"))return e._index.data===g._index.data?!0:!1;if(e._index.hasOwnProperty("row")){if(e._index.row===!0&&null!=g._index.row)return!0;var h=b.state.renderTargetDataList[e._index.row];return h&&h._index.id===g._index.id?!0:!1}}if(a.isPlainObject(e._state))for(var i in e._state)if("editing"===i){if(e._state[i]===!0&&!g._state[i])return!1;if(e._state[i]===!1&&g._state[i])return!1}else if(e._state[i]!==g._state[i])return!1;var j=tb.trimObject(e);if(!a.isEmptyObject(j)){var k=!1;if(a.each(j,function(a,b){return g[a]!==b?(k=!0,!1):void 0}),k)return!1}return!0}function la(a,b,c){if("boolean"==typeof c.readonly||"function"==typeof c.readonly){var d=c.readonly;if("function"==typeof d&&(d=c.readonly.call(a,b[c.key],b,c)),"boolean"==typeof d)return d===!0}if(a.option.rowOption&&("boolean"==typeof a.option.rowOption.readonly||"function"==typeof a.option.rowOption.readonly)){var d=a.option.rowOption.readonly;if("function"==typeof d&&(d=d.call(a,b,a.option.rowOption)),"boolean"==typeof d)return d===!0}return!1}function ma(a,b){return a&&b?!!(b.editable&&a._state.editing&&a._state.editing.hasOwnProperty(b.columnIndex)):!1}function na(a){return!!a.state.cellSelection&&(a.state.cellSelection.rightBoundaryColumnIndex-a.state.cellSelection.leftBoundaryColumnIndex||a.state.cellSelection.bottomBoundaryRenderedIndex-a.state.cellSelection.topBoundaryRenderedIndex)}function oa(a){delete a.state.cellSelection,Ka(a)}function pa(a,b){return Math.min(Math.max(a.state.renderTargetDataList.length-1,0),b)}function qa(a,b){return Math.min(Math.max(0,b),a.state.maxColumnIndex)}function ra(a,b,c){delete a.state.cellSelection,a.state.cellSelection={},a.state.cellSelection.renderedIndexMap={},a.state.cellSelection.columnIndexMap={},b=pa(a,b),c=qa(a,c),a.state.cellSelection.focusRenderedIndex=b,a.state.cellSelection.focusColumnIndex=c,a.state.cellSelection.focusRowspanInfo=Da(a,pa(a,b),qa(a,c)),a.state.cellSelection.renderedIndexMap[b]=!0,a.state.cellSelection.columnIndexMap[c]=!0,a.state.cellSelection.rightBoundaryColumnIndex=a.state.cellSelection.focusColumnIndex,a.state.cellSelection.leftBoundaryColumnIndex=a.state.cellSelection.focusColumnIndex,a.state.cellSelection.bottomBoundaryRenderedIndex=a.state.cellSelection.focusRenderedIndex,a.state.cellSelection.topBoundaryRenderedIndex=a.state.cellSelection.focusRenderedIndex}function sa(a){a.$wrapper.find(".cell-selected").removeClass(yb)}function ta(a){if(a.state.cellSelection){for(var b=null,c=null,d=0,e=a.state.cellSelection.dataList.length;e>d;d++){var f=a.state.cellSelection.dataList[d]._index.row;null!=f&&(b=null!=b?Math.min(f,b):f,c=null!=c?Math.max(f,c):f)}for(var g=null,h=null,d=0,e=a.state.cellSelection.columnList.length;e>d;d++){var i=a.state.cellSelection.columnList[d];ha(i)&&(g=null==g?i.columnIndex:Math.min(g,i.columnIndex),h=null==h?i.columnIndex:Math.max(h,i.columnIndex))}var j=a.state.cellSelection.focusRenderedIndex,k=a.state.cellSelection.focusColumnIndex;null==j&&(j=b),null==k&&(k=g),j=Math.min(Math.max(b,j),c),k=Math.min(Math.max(g,k),h),Ba(a,b,g,c,h,j,k)}}function ua(a){if(a.state.cellSelection){a.state.cellSelection.rightBoundaryColumnIndex=a.state.cellSelection.focusColumnIndex,a.state.cellSelection.leftBoundaryColumnIndex=a.state.cellSelection.focusColumnIndex,a.state.cellSelection.topBoundaryRenderedIndex=a.state.cellSelection.focusRenderedIndex,a.state.cellSelection.bottomBoundaryRenderedIndex=a.state.cellSelection.focusRenderedIndex,a.state.cellSelection.dataList=[],a.state.cellSelection.columnList=[];for(var b in a.state.cellSelection.renderedIndexMap){var c=parseInt(b);for(var d in a.state.cellSelection.columnIndexMap){var e=parseInt(d);a.state.visibleIndexMapByColumnIndex[e]>=0&&(a.state.cellSelection.rightBoundaryColumnIndex=Math.max(a.state.cellSelection.rightBoundaryColumnIndex,e),a.state.cellSelection.leftBoundaryColumnIndex=Math.min(a.state.cellSelection.leftBoundaryColumnIndex,e),a.state.cellSelection.bottomBoundaryRenderedIndex=Math.max(a.state.cellSelection.bottomBoundaryRenderedIndex,c),a.state.cellSelection.topBoundaryRenderedIndex=Math.max(0,Math.min(a.state.cellSelection.topBoundaryRenderedIndex,c)))}var f=a.state.renderTargetDataList[c];f&&a.state.cellSelection.dataList.push(f)}for(var e=a.state.cellSelection.leftBoundaryColumnIndex,g=a.state.cellSelection.rightBoundaryColumnIndex;g>=e;e++)a.state.visibleIndexMapByColumnIndex[e]>=0&&a.state.cellSelection.columnList.push(a.state.columnIndexToMapping[e])}}function va(a){return a.state.cellSelection?a.state.cellSelection.focusColumnIndex<=a.state.fixupto:!1}function wa(a){return a.state.cellSelection?a.state.cellSelection.focusRenderedIndex<a.option.rowFixCount:!1}function xa(a){return a.state.cellSelection?a.state.cellSelection.leftBoundaryColumnIndex<=a.state.fixupto&&a.state.cellSelection.rightBoundaryColumnIndex>a.state.fixupto:!1}function ya(a){return a.state.cellSelection?a.state.cellSelection.topBoundaryRenderedIndex<a.option.rowFixCount&&a.state.cellSelection.bottomBoundaryRenderedIndex>=a.option.rowFixCount:!1}function za(a,b){return b<a.option.rowFixCount}function Aa(a,b){return b<=a.state.fixupto}function Ba(a,b,c,d,e,f,g){null!=f&&null!=g?ra(a,f,g):ra(a,b,c);for(var h=Math.min(b,d),i=Math.max(b,d),j=Math.min(c,e),k=Math.max(c,e),l=j;k>=l;l++)for(var m=h;i>=m;m++)if(null!=a.state.visibleIndexMapByColumnIndex[l]){var n=Ia(a,m,l);"number"==typeof n&&(m=n)}Ha(a),ua(a),sa(a),Ca(a),Ra(a)}function Ca(b){if(b.state.cellSelection&&b.state.refreshbodycell)for(var c=0,d=b.state.refreshbodycell.renderedDataList.length;d>c;c++){var e=b.state.refreshbodycell.renderedDataList[c];if(e){var f=e._index.row;if(!(f<b.state.cellSelection.topBoundaryRenderedIndex||f>b.state.cellSelection.bottomBoundaryRenderedIndex))for(var g=0,h=b.state.refreshbodycell.renderedColumnMappingList.length;h>g;g++){var i=b.state.refreshbodycell.renderedColumnMappingList[g],j=i.columnIndex;if(!(j<b.state.cellSelection.leftBoundaryColumnIndex)&&!(j>b.state.cellSelection.rightBoundaryColumnIndex)&&b.state.visibleIndexMapByColumnIndex[j]>=0){var k=a("#"+b._cellIdFromRowIndex(f,j));if(k&&k.length){k.css("color"),k.css("background-color"),a.trim(k.prop("className").split("cell-selected")[0]);k.addClass("cell-selected");var l=b.state.cellSelection.focusRowspanInfo&&b.state.cellSelection.focusRowspanInfo.from<=f&&b.state.cellSelection.focusRowspanInfo.to>=f,m=Fa(b,e,j),n=m>=j&&j<=b.state.cellSelection.focusColumnIndex&&b.state.cellSelection.focusColumnIndex<=m;j===b.state.cellSelection.focusColumnIndex&&f===b.state.cellSelection.focusRenderedIndex?k.addClass("cell-selected-focus"):l&&b.state.cellSelection.focusColumnIndex===j?k.addClass("cell-selected-focus"):n&&f===b.state.cellSelection.focusRenderedIndex?k.addClass("cell-selected-focus"):n&&l&&k.addClass("cell-selected-focus"),j===b.state.cellSelection.leftBoundaryColumnIndex&&k.addClass("cell-selected-leftline"),j===b.state.cellSelection.rightBoundaryColumnIndex&&k.addClass("cell-selected-rightline"),f===b.state.cellSelection.topBoundaryRenderedIndex&&k.addClass("cell-selected-topline"),f===b.state.cellSelection.bottomBoundaryRenderedIndex&&k.addClass("cell-selected-bottomline")}}}}}}function Da(a,b,c){var d=S(a,c);if(!d)return null;if(a.option.grouping&&a.option.grouping.useGroupRowspan!==!0)return null;var e=null;d.rowspan===!0?e=d.key:d.rowspan&&"string"==typeof d.rowspan.by&&(e=d.rowspan.by);var f=a.state.groupingLookupTable;if(null===f||void 0===f)return null;var g=f[e];if(null===g||void 0===g||0===g.length)return null;var h=a.state.renderTargetDataList[b],i=g[h._index.data];if(!i)return null;for(var j=i.from,k=i.to,l=void 0,m=void 0,n=j;k>=n;n++){var o=a.state.data[n],p=o?o._index.row:null;null!=p&&(l=void 0===l?p:Math.min(p,l),m=void 0===m?p:Math.max(p,m))}return void 0!==l&&void 0!==m?{from:l,to:m}:null}function Ea(a,b,c){var d=a.state.renderTargetDataList[b];if(d)for(var e=c;e>=0;e--){var f=S(a,e);if(f&&ha(f)){var g=Fa(a,d,f);if(g>e&&g>=c)return{from:e,to:g}}}return null}function Fa(b,c,d){var e="number"==typeof d?b.state.columnIndexToMapping[d]:d;if(e.colspan){var f=Ga(b,c,e);if(f){var g=b.state.visibleIndexMapByColumnIndex[e.columnIndex],h=Math.min(b.state.visibleColumnCount-1,g+f-1);return b.state.visibleColumnMappingList[h].columnIndex}}else if(e.colspanTo){if("string"==typeof e.colspanTo){var g=b.state.visibleIndexMapByColumnIndex[e.columnIndex],h=b.state.visibleIndexMapByKey[e.colspanTo];return b.state.visibleColumnMappingList[h].columnIndex}if(!c)return null;var i=a.isFunction(e.colspanTo)?e.colspanTo(c[e.key],c,e):e.colspanTo,j=i;if("string"==typeof j){var h=b.state.visibleIndexMapByKey[j];j=b.state.visibleColumnMappingList[h].columnIndex}return Math.min(b.state.maxColumnIndex,j)}return null}function Ga(b,c,d,e){var f=null,g=null;if(d.colspan){var h=Number(a.isNumeric(d.colspan)?d.colspan:a.isFunction(d.colspan)?d.colspan(c[d.key],c,d):null);f=h}else{if(!d.colspanTo)return null;g=b.state.visibleIndexMapByColumnIndex[d.columnIndex];var i=a.isFunction(d.colspanTo)?d.colspanTo(c[d.key],c,d):d.colspanTo;if("string"==typeof i){var j=b.state.visibleIndexMapByKey[i],k=j-g+1;f=k>0?k:null}else{var j=b.state.visibleIndexMapByColumnIndex[i],k=j-g+1;f=k>0?k:null}}if(e){g=g||b.state.visibleIndexMapByColumnIndex[d.columnIndex];var j=b.state.visibleIndexMapByColumnIndex[e],k=j-g+1;f=k>0?Math.min(f,k):null}return g+f>b.state.visibleColumnCount&&(f=b.state.visibleColumnCount-g),f}function Ha(a){for(var b=a.state.cellSelection.topBoundaryRenderedIndex,c=a.state.cellSelection.bottomBoundaryRenderedIndex,d=a.state.cellSelection.leftBoundaryColumnIndex,e=a.state.cellSelection.rightBoundaryColumnIndex,f=d;e>=f;f++)for(var g=b;c>=g;g++)if(a.state.visibleIndexMapByColumnIndex[f]>=0){var h=Ia(a,g,f);"number"==typeof h&&(g=h)}}function Ia(a,b,c){var d=S(a,c);if(d){a.state.cellSelection.renderedIndexMap[b]=!0,a.state.cellSelection.columnIndexMap[c]=!0;var e=d.rowspan&&a.option.grouping&&a.option.grouping.useGroupRowspan===!0?Da(a,b,c):!1;if(e){for(var f=e.from,g=e.to,h=Math.min(g,f,a.state.renderTargetDataList.length-1),i=Math.min(Math.max(g,f),a.state.renderTargetDataList.length-1),j=h;i>=j;j++){a.state.cellSelection.renderedIndexMap[j]=!0;for(var k=a._getRenderedDataFromRenderedIndex(j),l=c;l>=0;l--)if(a.state.visibleIndexMapByColumnIndex[l]>=0){var d=S(a,l);if(d&&ha(d)&&(d.colspan||d.colspanTo)){var m=Fa(a,k,d);if(m&&!(c>m))for(var n=l;m>=n&&n<=a.state.maxColumnIndex;n++)a.state.visibleIndexMapByColumnIndex[n]>=0&&(a.state.cellSelection.columnIndexMap[n]=!0)}}}return i}for(var k=a._getRenderedDataFromRenderedIndex(b),l=c;l>=0;l--){var d=S(a,l);if(d&&ha(d)&&(d.colspan||d.colspanTo)){var m=Fa(a,k,d);if(m&&!(c>m))for(var n=l;m>=n&&n<=a.state.maxColumnIndex;n++)a.state.cellSelection.columnIndexMap[n]=!0}}}}function Ja(b,c,d){var e=a("#"+b._cellIdFromRowIndex(c,d));if(e.length)return e;if(b.state.groupRowspanned&&b.option.grouping&&b.option.grouping.useGroupRowspan===!0){var f=S(b,d);if(f&&f.rowspan){var g=Da(b,c,d);if(!g)return null;if(g.from!==c){var h=c-1;return g.from<c&&(h=g.from||0),h===c?null:Ja(b,h,d)}}}for(var i=b._getRenderedDataFromRenderedIndex(c),j=d;j>=0;j--){var f=S(b,j);if(f){if(!ha(f))return;var k=Fa(b,i,f);if(k>=d)return d===f.columnIndex?null:Ja(b,c,f.columnIndex)}}return null}function Ka(a){a&&a.option&&(a.$focusfixture.removeAttr("data-alopexgrid-dataindex data-alopexgrid-dataid data-alopexgrid-rowindex"),a.$focusfixture.removeAttr("data-alopexgrid-columnindex"),a.$focusfixture.removeProp("columnIndex"),a.$focusfixture.removeProp("renderedIndex"),a.$focusfixture[0].style.top="-1px",a.$focusfixture[0].style.left="-1px",a.$focusfixture[0].style.height="0.1px",a.$focusfixture[0].style.width="0.1px")}function La(a,b,c,d){if(a&&a.option){if(!a.option.cellSelectable)return Ka(a),void a.$focusfixture.empty();var e={},f={};if(j(b)){var g=a.state.renderTargetDataList[b];e.renderedIndex=b,null!=g._index.data&&(f["data-alopexgrid-dataindex"]=g._index.data),null!=g._index.id&&(f["data-alopexgrid-dataid"]=g._index.id),f["data-alopexgrid-rowindex"]=b}j(c)&&(e.columnIndex=c,f["data-alopexgrid-columnindex"]=c);var h=null!=b&&a.$focusfixture.prop("renderedIndex")!==b||null!=c&&a.$focusfixture.prop("columnIndex")!==c;a.$focusfixture.prop(e).attr(f);var i=a.cellElementGet({_index:{row:b}},c);if(i.length&&(a.$focusfixture[0].style.top=i[0].style.top,a.$focusfixture[0].style.left=i[0].style.left),d!==!0){a.$focusfixture.empty();var k=a.$focusfixture[0];k.appendChild(document.createTextNode(" ")),Q(k,!0)}h&&g&&a._triggerGridEvent("cellFocus",{data:g||null,mapping:a.state.columnIndexToMapping[c]||null},i)}}function Ma(a,b,c){a.state.cellSelection&&(b=pa(a,b),c=qa(a,c),a.state.cellSelection.focusRenderedIndex=b,a.state.cellSelection.focusColumnIndex=c,a.state.cellSelection.focusRowspanInfo=Da(a,a.state.cellSelection.focusRenderedIndex,a.state.cellSelection.focusColumnIndex),Ia(a,b,c),ua(a),Qa(a,a.state.cellSelection.focusRenderedIndex,a.state.cellSelection.focusColumnIndex),sa(a),Ca(a),setTimeout(function(){La(a,b,c)},0))}function Na(a,b,c,d,e){b=pa(a,b),c=qa(a,c),ra(a,b,c),Ia(a,b,c),ua(a),d&&("up"===d?a.state.cellSelection.focusRenderedIndex=a.state.cellSelection.topBoundaryRenderedIndex:"down"===d?a.state.cellSelection.focusRenderedIndex=a.state.cellSelection.bottomBoundaryRenderedIndex:"left"===d?a.state.cellSelection.focusColumnIndex=a.state.cellSelection.leftBoundaryColumnIndex:"right"===d&&(a.state.cellSelection.focusColumnIndex=a.state.cellSelection.rightBoundaryColumnIndex)),a.state.cellSelection.focusRowspanInfo=Da(a,a.state.cellSelection.focusRenderedIndex,a.state.cellSelection.focusColumnIndex),e!==!0&&Qa(a,a.state.cellSelection.focusRenderedIndex,a.state.cellSelection.focusColumnIndex),sa(a),Ca(a),setTimeout(function(){a.state.cellSelection&&La(a,a.state.cellSelection.focusRenderedIndex,a.state.cellSelection.focusColumnIndex,e)},0)}function Oa(a,b,c){if(a&&a.state&&a.state.cellSelection){var d=a.state.cellSelection.focusRenderedIndex,e=a.state.cellSelection.focusColumnIndex,f=na(a),g=d+b,h=Da(a,d,e);b&&h&&(g=(b>0?h.to:h.from)+b);var i=e,j=Ea(a,d,e);if(c&&(c>0?i=Xa(a,j?j.to:e,c):0>c&&(i=Wa(a,j?j.from:e,-c))),f&&h){var k=a.state.cellSelection.rightBoundaryColumnIndex-a.state.cellSelection.leftBoundaryColumnIndex;k||a.state.cellSelection.topBoundaryRenderedIndex!=h.from||a.state.cellSelection.bottomBoundaryRenderedIndex!=h.to||(f=!1)}if(f&&j){var l=a.state.cellSelection.bottomBoundaryRenderedIndex-a.state.cellSelection.topBoundaryRenderedIndex;l||a.state.cellSelection.leftBoundaryColumnIndex!=j.from||a.state.cellSelection.rightBoundaryColumnIndex!=j.to||(f=!1)}f&&h&&j&&a.state.cellSelection.topBoundaryRenderedIndex==h.from&&a.state.cellSelection.bottomBoundaryRenderedIndex==h.to&&a.state.cellSelection.leftBoundaryColumnIndex==j.from&&a.state.cellSelection.rightBoundaryColumnIndex==j.to&&(f=!1),f?(b?(g>a.state.cellSelection.bottomBoundaryRenderedIndex?(g=a.state.cellSelection.topBoundaryRenderedIndex,
i=Xa(a,i,1)):g<a.state.cellSelection.topBoundaryRenderedIndex&&(g=a.state.cellSelection.bottomBoundaryRenderedIndex,i=Wa(a,i,1)),i>a.state.cellSelection.rightBoundaryColumnIndex?i=a.state.cellSelection.leftBoundaryColumnIndex:i<a.state.cellSelection.leftBoundaryColumnIndex&&(i=a.state.cellSelection.rightBoundaryColumnIndex)):c&&(i>a.state.cellSelection.rightBoundaryColumnIndex?(i=a.state.cellSelection.leftBoundaryColumnIndex,g++):i<a.state.cellSelection.leftBoundaryColumnIndex&&(i=a.state.cellSelection.rightBoundaryColumnIndex,g--),g>a.state.cellSelection.bottomBoundaryRenderedIndex?g=a.state.cellSelection.topBoundaryRenderedIndex:g<a.state.cellSelection.topBoundaryRenderedIndex&&(g=a.state.cellSelection.bottomBoundaryRenderedIndex)),Ma(a,g,i)):(c>0&&i===e?(i=a.state.visibleColumnMappingList[0].columnIndex,g+=1):0>c&&i===e&&(i=a.state.visibleColumnMappingList[a.state.visibleColumnMappingList.length-1].columnIndex,g-=1),0>g?(g=a.state.renderTargetDataList.length-1,c||(i=Wa(a,i,1),i===e&&(i=a.state.visibleColumnMappingList[a.state.visibleColumnMappingList.length-1].columnIndex))):g>=a.state.renderTargetDataList.length&&(g=0,c||(i=Xa(a,i,1),i===e&&(i=a.state.visibleColumnMappingList[0].columnIndex))),Na(a,g,i))}}function Pa(a,b,c,d,e){var f=a.state.cellSelection.focusRenderedIndex,g=a.state.cellSelection.focusColumnIndex;if(b)if(a.state.cellSelection.focusColumnIndex<a.state.cellSelection.rightBoundaryColumnIndex)delete a.state.cellSelection.columnIndexMap[a.state.cellSelection.rightBoundaryColumnIndex],g=Math.max(0,Wa(a,a.state.cellSelection.rightBoundaryColumnIndex,1)),a.state.cellSelection.rightBoundaryColumnIndex=g;else{var h=Math.max(Wa(a,a.state.cellSelection.leftBoundaryColumnIndex,1),0);a.state.cellSelection.columnIndexMap[h]=!0,a.state.cellSelection.leftBoundaryColumnIndex=Math.max(0,Math.min(a.state.cellSelection.leftBoundaryColumnIndex,h)),g=h}else if(c)if(a.state.cellSelection.focusColumnIndex>a.state.cellSelection.leftBoundaryColumnIndex)delete a.state.cellSelection.columnIndexMap[a.state.cellSelection.leftBoundaryColumnIndex],g=Xa(a,a.state.cellSelection.leftBoundaryColumnIndex,1),a.state.cellSelection.leftBoundaryColumnIndex=g;else{var h=Math.min(Xa(a,a.state.cellSelection.rightBoundaryColumnIndex,1),a.state.maxColumnIndex);a.state.cellSelection.columnIndexMap[h]=!0,a.state.cellSelection.rightBoundaryColumnIndex=Math.min(a.state.maxColumnIndex,Math.max(a.state.cellSelection.rightBoundaryColumnIndex,h)),g=h}else if(d){d=d===!0?1:d;for(var i=a.state.cellSelection.focusRenderedIndex,j=a.state.cellSelection.leftBoundaryColumnIndex;j<=a.state.cellSelection.rightBoundaryColumnIndex;j++){var k=(S(a,j),Da(a,a.state.cellSelection.focusRenderedIndex,j));if(k){var l=k.to-k.from;l&&(i=k.to)}}var m=i<a.state.cellSelection.bottomBoundaryRenderedIndex;if(m){for(var n=Math.max(0,a.state.cellSelection.bottomBoundaryRenderedIndex-d),o=n,j=a.state.cellSelection.leftBoundaryColumnIndex;j<=a.state.cellSelection.rightBoundaryColumnIndex;j++){var k=(S(a,j),Da(a,o,j));k&&k.to-k.from>0&&(n=Math.max(Math.min(n,k.from-1),a.state.cellSelection.focusRenderedIndex))}for(var p=a.state.cellSelection.bottomBoundaryRenderedIndex;p>a.state.cellSelection.focusRenderedIndex&&p>n;p--)delete a.state.cellSelection.renderedIndexMap[p];f=n,a.state.cellSelection.bottomBoundaryRenderedIndex=n}else{for(var q=Math.max(a.state.cellSelection.topBoundaryRenderedIndex-d,0),o=q,j=a.state.cellSelection.leftBoundaryColumnIndex;j<=a.state.cellSelection.rightBoundaryColumnIndex;j++){var k=(S(a,j),Da(a,o,j));k&&k.to-k.from>0&&(q=Math.max(Math.min(q,k.from),0))}for(var p=a.state.cellSelection.topBoundaryRenderedIndex;p>=q&&p>=0;p--)a.state.cellSelection.renderedIndexMap[p]=!0;f=q,a.state.cellSelection.topBoundaryRenderedIndex=q}}else if(e){e=e===!0?1:e;for(var r=a.state.cellSelection.focusRenderedIndex,j=a.state.cellSelection.leftBoundaryColumnIndex;j<=a.state.cellSelection.rightBoundaryColumnIndex;j++){var k=(S(a,j),Da(a,a.state.cellSelection.focusRenderedIndex,j));if(k){var l=k.to-k.from;l&&(r=k.from)}}var m=r>a.state.cellSelection.topBoundaryRenderedIndex;if(m){for(var n=Math.min(a.state.cellSelection.topBoundaryRenderedIndex+e,Math.max(a.state.renderTargetDataList.length-1,0)),o=n,j=a.state.cellSelection.leftBoundaryColumnIndex;j<=a.state.cellSelection.rightBoundaryColumnIndex;j++){var k=(S(a,j),Da(a,o,j));k&&k.to-k.from>0&&(n=Math.min(Math.max(n,k.to+1),a.state.cellSelection.focusRenderedIndex))}for(var p=a.state.cellSelection.topBoundaryRenderedIndex;p<a.state.cellSelection.focusRenderedIndex&&n>p;p++)delete a.state.cellSelection.renderedIndexMap[p];f=n,a.state.cellSelection.topBoundaryRenderedIndex=n}else{for(var q=Math.min(a.state.renderTargetDataList.length-1,a.state.cellSelection.bottomBoundaryRenderedIndex+e),o=q,j=a.state.cellSelection.leftBoundaryColumnIndex;j<=a.state.cellSelection.rightBoundaryColumnIndex;j++){var k=(S(a,j),Da(a,o,j));k&&k.to-k.from>0&&(q=Math.min(Math.max(q,k.to),a.state.renderTargetDataList.length-1))}for(var p=a.state.cellSelection.bottomBoundaryRenderedIndex;q>=p&&p<a.state.renderTargetDataList.length;p++)a.state.cellSelection.renderedIndexMap[p]=!0;f=q,a.state.cellSelection.bottomBoundaryRenderedIndex=q}}Ha(a),ua(a),sa(a),Ca(a);Ja(a,f,g);Qa(a,f,g)}function Qa(a,b,c,d){var e=(a.state.columnWidthMap,a.state.rowHeight,a.state.wrapperWidth,a.state.wrapperHeight,a.state.renderFromRenderedIndex),f=a.state.renderFromColumnIndex,g=a.state.renderToRenderedIndex,h=a.state.renderToColumnIndex,i=!1,j=!1;if(a.state.fixupto>=0){var k=a.state.refreshbodycell.renderedColumnMappingList,l=a.state.refreshbodycell.renderedFixedColumnMappingList;f=k[l.length].columnIndex,c<=a.state.fixupto&&d!==!0&&(i=!0)}if(a.option.rowFixCount>0){b<a.option.rowFixCount&&d!==!0&&(j=!0);for(var m=0;m<a.option.rowFixCount;m++){var n=a.state.renderTargetDataList[m];n&&e++}}else if(a.state.refreshbodycell&&a.state.refreshbodycell.renderedPinnedDataList){b<a.state.refreshbodycell.renderedPinnedDataList.length&&d!==!0&&(j=!0);for(var m=0;m<a.state.refreshbodycell.renderedPinnedDataList.length;m++){var n=a.state.refreshbodycell.renderedPinnedDataList[m];n&&e++}}var o=a.state.visibleIndexMapByColumnIndex,p=!1;if(!i&&a.state.scrollxMoveable)if(f>c)a._scrollLeftEvent(o[f]-o[c],!1),p=!0;else if(a.state.scrollxEnd&&f>=c)a._scrollLeftEvent(o[f]-o[c],!1),p=!0;else if(c>=h){for(var q=0,r=a.state.columnWidthMap[h],s=0,m=f;m<=a.state.maxColumnIndex;m++){var t=S(a,m);if(t&&(s+=a.state.columnWidthMap[m],q++,s>r))break}a._scrollRightEvent(q,!1),p=!0}a.option.height&&!j&&a.state.scrollyMoveable&&(e>b&&!(b<a.option.rowFixCount)?(a._scrollUpEvent(e-b,!1),p=!0):a.state.scrollyEnd&&e>=b&&!(b<a.option.rowFixCount)?(a._scrollUpEvent(e-b,!1),p=!0):b>=g&&!(b<a.option.rowFixCount)&&(a._scrollDownEvent(b-g+1,!1),p=!0)),p&&a._refreshBoard()}function Ra(a){if(!a.state.cellSelection)return a.$root.trigger("cellSelectionEmpty");for(var b=a.state.cellSelection.topBoundaryRenderedIndex,c=a.state.cellSelection.bottomBoundaryRenderedIndex,d=a.state.cellSelection.leftBoundaryColumnIndex,e=a.state.cellSelection.rightBoundaryColumnIndex,f=[],g=b;c>=g;g++)for(var h=a._getRenderedDataFromRenderedIndex(g),i=d;e>=i;i++){var j=S(a,i);j&&h&&(!h._meta&&j.key&&f.push(h[j.key]),h._meta&&f.push(h[j.columnIndex]))}var k="cellSelectionChange";if(b===c&&d===e&&(k="cellSelectionStart"),a.state.cellSelection.lastSelectionEventParam){var l=a.state.cellSelection.lastSelectionEventParam;if(l.fromSelectionRow===b&&l.toSelectionRow===c&&l.fromSelectionColumn===d&&l.toSelectionColumn===e)return}var m={};m.selectionValueList=f,m.fromSelectionRow=b,m.toSelectionRow=c,m.fromSelectionColumn=d,m.toSelectionColumn=e,a.state.cellSelection.lastSelectionEventParam=m,a._triggerGridEvent(k,m)}function Sa(b){if(b.state.cellSelection){for(var c="<table>",e=b.state.cellSelection.topBoundaryRenderedIndex,f=b.state.cellSelection.bottomBoundaryRenderedIndex,g=[],h=b.state.cellSelection.leftBoundaryColumnIndex;h<=b.state.cellSelection.rightBoundaryColumnIndex;h++){var i=b.state.columnIndexToMapping[h];i&&ha(i)&&g.push(i)}c+="<tbody>";var k=b.state.cellSelection;b.state.cellSelection=null;for(var l=[],m=!(b.option.cellSelectableOption&&b.option.cellSelectableOption.copyCellStyle),n=!(!b.option.cellSelectableOption||!b.option.cellSelectableOption.copyRenderedText),o=e;f>=o;o++){var p=b._getRenderedDataFromRenderedIndex(o);if(p){c+="<tr>";for(var h=0,q=g.length;q>h;h++)if(l[h]=l[h]||0,l[h]>0)l[h]--;else{var i=g[h],r=Da(b,o,i.columnIndex),s=Fa(b,p,i),t=b._generateCellAttribute(p,i);t.styleclass="cell bodycell "+t.styleclass;var u=p[i.key];if(n){var v=document.createElement("div");u=b._generateCellContent(p,i),u!==!1&&b._setCellContent(u,v);var w=a(v);w.find("input").replaceWith(function(){return"text"===this.type?this.value:this}),u=w.text(),w.remove()}var x=0;if(r&&(x=r.to-o+1,l[h]=x-1,t.rowspan=x),s>i.columnIndex){for(var y=1,z=h+1;q>z;z++){var A=g[z];if(A.columnIndex<=s&&y++,A.columnIndex>=s)break}t.colspan=y,h+=y-1}c+="<td";var B=document.createElement("div");if(B.className=t.styleclass,b.$wrapper[0].appendChild(B),jb)var C=d(B);else var C=window.getComputedStyle(B);t.style=(t.style||"")+"background-color:"+C.getPropertyValue("background-color")+";color:"+C.getPropertyValue("color")+";",b.$wrapper[0].removeChild(B),B=null,C=null;for(var D in t){var E=D,F=t[D];if("styleclass"===E)E="class";else if("style"===E){if(m)continue;if(a.isPlainObject(F)){F="";for(var G in t[D])F+=G+":"+t[D][G]+";"}}("number"==typeof F||"string"==typeof F)&&(c+=" "+E+'="'+F+'"')}c+=">",c+=j(u)?String(u).replace(/\n/g,'<br style="mso-data-placement:same-cell;"/>'):"",c+="</td>"}c+="</tr>"}}return b.state.cellSelection=k,c+="</tbody></table>"}}function Ta(a){var b=document.createElement("textarea");return b.innerHTML=a,b.value}function Ua(a,b,c,d){var e=a.state.renderTargetDataList[b],f=a.state.columnIndexToMapping[c];if(!e||!f)return!1;if(a.state.testRowAllowPaste){if("boolean"===a.state.testRowAllowPaste&&a.option.rowOption.allowPaste===!1)return!1;if("function"===a.state.testRowAllowPaste&&a.option.rowOption.allowPaste(e)===!1)return!1}if(null!=f.allowPaste){if(f.allowPaste===!1)return!1;if("function"==typeof f.allowPaste&&f.allowPaste.call(a,e[f.key],e,f,d)===!1)return!1}return!0}function Va(b,c){var d=[];if(jb&&(c=c.toLowerCase()),c.indexOf("&lt;table")>=0&&c.indexOf("table&gt;")>=0&&(c=Ta(c)),c.indexOf("<table")>=0){c=c.slice(c.indexOf("<table")),c.lastIndexOf("</table>")>=0&&(c=c.slice(0,c.lastIndexOf("</table>"))+"</table>");var e=a(c),f=e.find("tr");f.each(function(a,b){d[a]=[]}),f.each(function(b,c){a(c).children().each(function(a,c){if(c.rowSpan>1)for(var e=b+parseInt(c.rowSpan),f=b+1;e>f;f++)d[f][a]=null;if(c.colSpan>1)for(var g=a+1;g<a+colSpan;g++)d[b][g]=null;null!==d[b][a]&&(d[b][a]=c.innerText||c.textContent)})})}if(!d.length)return!1;var g=b.state.visibleIndexMapByColumnIndex[b.state.cellSelection.focusColumnIndex];ra(b,b.state.cellSelection.focusRenderedIndex,b.state.cellSelection.focusColumnIndex);for(var h=0;h<d.length;h++)for(var i=b.state.cellSelection.focusRenderedIndex+h,j=0;j<d[h].length;j++){var k=b.state.visibleColumnMappingList[g+j];if(k){var l=k.columnIndex,m=d[h][j];if(Ia(b,i,l),void 0!==m&&null!==m){if(Ua(b,i,l,m)===!1)continue;b.cellEdit(m,{_index:{row:i}},l)}}}return b._refreshBoard(!0),ua(b),sa(b),Ca(b),Ra(b),!0}function Wa(a,b,c){var d=a.state.visibleIndexMapByColumnIndex[b];return c=c||1,a.state.visibleColumnMappingList[Math.max(d-c,0)].columnIndex}function Xa(a,b,c){var d=a.state.visibleIndexMapByColumnIndex[b];return c=c||1,a.state.visibleColumnMappingList[Math.min(d+c,a.state.visibleColumnCount-1)].columnIndex}function Ya(a){a.state.headerSelection&&(delete a.state.headerSelection.from,delete a.state.headerSelection.to,a.$wrapper.find(".headercell").removeClass("header-selected"))}function Za(b){return a(b).data(tb.KEY_NAME)}var $a=window.__AlopexGridMajorVersion__||"3",_a=window.__AlopexGridClassRoot__||"alopexgrid",ab=window.__AlopexGridExportName__||"AlopexGrid",bb=window.__AlopexGridJQueryExportName__||"alopexGrid",cb=window.__AlopexGridRemoveJQueryExportName__||"removeAlopexGrid",db=window.__AlopexGridUniqueKeyPrefix__||"alopexgrid",eb=window.__AlopexGridAlopexUISetupName__||"grid",fb=window.__AlopexGridBuildVersion__||"3.5.4",gb=a(window),hb=a(document),ib=function(){var a={Android:function(){return navigator.userAgent.match(/Android/i)?!0:!1},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)?!0:!1},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)?!0:!1},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)?!0:!1},Windows:function(){return navigator.userAgent.match(/IEMobile/i)?!0:navigator.userAgent.match(/WPDesktop/i)?!0:!1},any:function(){return a.Android()||a.BlackBerry()||a.iOS()||a.Opera()||a.Windows()}};return a.any()}(),jb=function(){var a=document.createElement("div");return a.innerHTML="<!--[if lt IE 9]><i></i><![endif]-->",1==a.getElementsByTagName("i").length}(),kb=function(){for(var a=3,b=document.createElement("b"),c=b.all||[];b.innerHTML="<!--[if gt IE "+ ++a+"]><i><![endif]-->",c[0];);return Math.min(a>4?a:document.documentMode,document.documentMode)||!1}();jb&&(Date.now||(Date.now=function(){return(new Date).getTime()}));var lb=db,mb=parseInt,nb=Number(Math.random().toString().split(".").pop().slice(-3));a.inArray("dataTransfer",a.event.props)<0&&a.event.props.push("dataTransfer"),a.inArray("clipboardData",a.event.props)<0&&a.event.props.push("clipboardData"),a.inArray("alopexgrid",a.event.props)<0&&a.event.props.push("alopexgrid");var ob=/(\/\/.*$)|(\/\*[\s\S]*?\*\/)|(\s*=[^,\)]*(('(?:\\'|[^'\r\n])*')|("(?:\\"|[^"\r\n])*"))|(\s*=[^,\)]*))/gm,pb=/([^\s,]+)/g,qb=window[o(["88sc","ne8hcaq"].join(2))],rb=!1,sb=!1,tb=function(b,d){var e=this==window?{}:this,h=Za(b);if(j(w()||i())){if(h)return e.updateOption(d),e;e.$root=a(b),e.root=e.$root.get(0);var k=a.trim(String(e.root.tagName).toLowerCase());if("div"!==k)throw delete e.$root,delete e.root,new Error("[AlopexGrid] AlopexGrid cannot be created on <"+k+"> element. A <div> element should be used.");if(e._triggerGridEvent("gridInit",{element:b,option:d},b)===!1)return null;tb.commonOption.preConstructor&&a.isFunction(tb.commonOption.preConstructor)&&tb.commonOption.preConstructor.call(e,a(b),d);var l=f();if(e.key=l,e.eventns="."+e.key+"t"+Math.random().toString().slice(-5).split(".").join(""),e.unique=g(),e.serial=tb.serial++,e.version=tb.version,e.state={progressStack:0,data:[],renderTargetDataList:[],deletedData:[],footerData:{},sortingInfoKeyMap:{},refreshTimer:{},viewUpdate:{}},A(e,d)){var m=null;if(d&&d.extend){m={};var n=d.extend;a.isArray(n)||(n=[n]);for(var o=0,p=n.length;p>o;o++){var q=tb.commonOption.definition[n[o]];a.isPlainObject(q)&&a.extend(!0,m,q)}}e.option=a.extend(!0,{},tb.defaultOption,tb.commonOption,m)}return e.viewInit(),e.$title=e.$root.find(">.title"),e.$titlelabel=e.$title.children(".title-label"),e.$titleMarkup=e.$title.children(".title-markuparea"),e.$titleFolding=e.$title.children(".table-toggle"),e.$columnhiddenarea=e.$root.find(">.columnhiddenarea"),e.$pager=e.$root.find(">.pager"),e.$pagerleft=e.$pager.find(".pager-left"),e.$pagerright=e.$pager.find(".pager-right"),e.$pagercenter=e.$pager.find(".pager-center"),e.$wrapper=e.$root.find(".wrapper"),e.$focusfixture=e.$root.find(".fixed-focus-catch"),e.$scrollbarx=a('<div class="scrollbar x"></div>').appendTo(e.$wrapper).data("alopexGridScrollbarElement","x"),e.$scrollbarLeftButton=a('<div class="scrollbutton leftbutton">').appendTo(e.$scrollbarx).data("alopexGridScrollbarElement","x"),e.$scrollbarRightButton=a('<div class="scrollbutton rightbutton">').appendTo(e.$scrollbarx).data("alopexGridScrollbarElement","x"),e.$horizontalScrollHandle=a('<div class="scrollhandle">').appendTo(e.$scrollbarx).data("alopexGridScrollbarElement","x"),e.$scrollbary=a('<div class="scrollbar y"></div>').appendTo(e.$wrapper).data("alopexGridScrollbarElement","y"),e.$scrollbarUpButton=a('<div class="scrollbutton upbutton">').appendTo(e.$scrollbary).data("alopexGridScrollbarElement","y"),e.$scrollbarDownButton=a('<div class="scrollbutton downbutton">').appendTo(e.$scrollbary).data("alopexGridScrollbarElement","y"),e.$verticalScrollHandle=a('<div class="scrollhandle">').appendTo(e.$scrollbary).data("alopexGridScrollbarElement","y"),jb?(e.state.bodyCellList=c(e.$wrapper[0],"bodycell"),e.state.nodataCellList=c(e.$wrapper[0],"nodatacell"),e.state.headerCellList=c(e.$wrapper[0],"headercell"),e.state.footerCellList=c(e.$wrapper[0],"footercell"),e.state.paginationList=function(){return e.$pager[0].querySelectorAll(".pagination")}):(e.state.bodyCellList=e.$wrapper[0].getElementsByClassName("bodycell"),e.state.nodataCellList=e.$wrapper[0].getElementsByClassName("nodatacell"),e.state.headerCellList=e.$wrapper[0].getElementsByClassName("headercell"),e.state.footerCellList=e.$wrapper[0].getElementsByClassName("footercell"),e.state.paginationList=e.$pager[0].getElementsByClassName("pagination")),e.updateOption(d),a(b).data(tb.KEY_NAME,e).attr("data-alopexgrid",l),e.state.loaded=!0,tb.instances[l]=e,tb.commonOption.postConstructor&&a.isFunction(tb.commonOption.postConstructor)&&tb.commonOption.postConstructor.call(e,e.$root,e.option),e._triggerGridEvent("gridInitEnd",{element:e.$root.get(0),option:e.option}),e}};a.extend(tb,{version:$a,release:fb}),a.extend(tb,{i18n:function(a){return tb.i18nLocaleSet[tb.locale][a]},locale:"ko",i18nLocaleSet:{ko:{sum:"합계",count:"건수",average:"평균",equal:"일치",notequal:"불일치",contain:"포함",notcontain:"포함하지 않음",lt:"보다 작은",lte:"보다 작거나 같은",gt:"보다 큰",gte:"보다 크거나 같은",freezePanes:"틀고정",freezePanesRow:"틀고정(행)",freezeCancel:"틀고정 취소",addRow:"이 위치에 행 삽입",enlarge:"확대보기",enlargeMsg:"확대보기 실행중입니다.",removeFilter:"필터제거",filterList:"필터 목록",noData:"(필드 값 없음)",selectAll:"(Select All)",save:"저장",close:"닫기",apply:"적용",filterHeader:"필터",textFilterHeader:"텍스트 필터",textFilterLabel:"텍스트",textFilterTypeLabel:"타입",dataFilterHeader:"데이터 필터",selectItem:"선택하세요",totalCount:"총 건수",exportMsg:"내보내기 가능한 데이터량이 초과되었습니다. CSV 형식으로 진행하시겠습니까?",exportCsvYbutton:"확인",exportCsvNbutton:"xlsx로 진행",importMsg:"xlsx 형식만 가능합니다.",importConfirmButton:"확인"},en:{sum:"Sum",average:"Average",equal:"equal",notequal:"notequal",contain:"contain",notcontain:"notcontain",lt:"lesser",lte:"less than or equal",gt:"greater",gte:"greater than or equal",freezePanes:"Freeze Panes",freezePanesRow:"Freeze Panes(row)",freezeCancel:"Freeze Cancel",addRow:"Insert a row",enlarge:"Enlarge",enlargeMsg:"Zoom activated.",removeFilter:"Remove Filter",filterList:"Filter List",noData:"(no field data)",selectAll:"(Select All)",save:"Save",close:"Close",apply:"Apply",filterHeader:"Filter",textFilterHeader:"Text Filter",textFilterLabel:"Text",textFilterTypeLabel:"Type",dataFilterHeader:"Data Filter",selectItem:"Select",totalCount:"Total Count",exportMsg:"Available data export amount has been exceeded. Do you want to CSV format?",exportCsvYbutton:"Confirm",exportCsvNbutton:"proceed to xlsx",importMsg:"Only xlsx format available.",importConfirmButton:"Confirm"}}}),a.extend(!0,tb,{commonOption:{definition:{},preConstructor:null,postConstructor:null},defaultOption:{width:null,height:null,header:!0,headerGroup:[],title:!1,titleMarkup:null,hideGridFoldingButton:!1,data:[],pager:!1,paging:{current:null,dataLength:null,enabled:!0,pageDataLength:null,pagerCount:null,pagerSelect:null,pagerTotal:null,hidePageList:!1,perPage:null,total:null,enabledByPager:!1},defaultColumnMapping:{width:100,tooltip:!0,exportRender:!0},autoColumnIndex:!1,columnMapping:[],rowOption:{highlight:null,styleclass:null,allowSelect:null,allowPaste:null,defaultHeight:null,inlineStyle:null,filter:null},footer:{position:null,footerMapping:[],usePageData:!1},headerRowHeight:null,footerRowHeight:null,on:{cell:{},headercell:{}},autoResize:!0,autoResizeDelay:200,hiddenColumnArea:!1,message:{nodata:null,valueFilter:null,pagerTotal:null},rowClickSelect:!1,rowSingleSelect:!1,cellRefreshOnRowSelect:!1,rowSingleSelectAllowUnselect:!0,singleSelectorColumnWithRadio:!1,disableTextSelection:!1,disableCellSelectionRestore:!1,rowspanGroupSelect:!0,rowspanGroupEdit:!0,useColumnRowspan:!1,progressDelay:null,progressText:null,defaultProgressText:"loading...",progressStyleclass:null,numberingColumnFromZero:!0,rowindexColumnFromZero:!0,defaultState:{dataAdd:{},dataSet:{}},eventMapping:{},renderMapping:{},renderRuleOption:{textKey:"text",valueKey:"value",htmlKey:"html",checkedKey:"checked"},valueFilter:null,flushCallback:null,hideSortingHandle:!1,disableHeaderClickSorting:!1,disableHeaderTitleAttribute:!1,getEditingDataOnEvent:!0,fitTableWidth:!1,wrapCellContent:!1,wrapCellContentClassName:"cell-content",directEdit:!1,ellipsisText:!1,autoSortingType:!1,clientSortingOnDynamicDataSet:!0,disableFocusedState:!1,rowspanGroupFocus:!1,editableNameWithKey:!1,parseValueOnStartEdit:!1,mergeEditingImmediately:!1,fullCompareForEditedState:!1,disableMultiMappingGet:!1,grouping:{by:[],useSummary:!1,useGroupRowspan:!1,useGrouping:!1,useGroupRearrange:!1,summaryRender:{sum:function(a){return tb.i18n("sum")+" : "+a},count:function(a){return tb.i18n("count")+" : "+a},groupName:function(a){return a},average:function(a){return tb.i18n("average")+" :"+a}},foldShowLength:1,useGroupColumnRearrange:!1,useDragDropBetweenGroups:!1},enableHeaderSelect:!1,filteringHeader:!1,filterTypeList:["equal","notequal","contain","notcontain","lt","lte","gt","gte"],closeFilterOuterClick:!0,filteringListCheckboxWrap:!0,rowFixCount:0,rowInlineEdit:!1,rowInlineEditStartEvent:"dblclick",rowInlineEditEndAll:!1,endInlineEditByOuterClick:!1,disableRowInlineEditEvent:!1,cellSelectable:!1,cellSelectableOption:{copyCellStyle:!0,copyRenderedText:!1,copyTextformOnly:!1},disableCellFocusAtInput:!1,cellInlineEdit:!1,cellInlineEditStartEvent:"dblclick",cellInlineEditEndOtherThanBodycell:!0,cellInlineEditEndFocusMove:!0,cellPopupEdit:!1,allowStartCellInlineEditWithInvalid:!0,instantInlineEditType:["radio","checkbox","select"],defaultInstantInlineEdit:null,restoreFocusOnInvalidInlineEdit:!1,forceRefreshAllOnCellEdit:!1,refreshByOnHiddenColumn:!1,useClassHovering:!1,rowspanGroupHovering:!1,sortCellElements:!1,enlargeOption:{closeButtonMarkup:"X"},enableDefaultContextMenu:!0,enableContextMenu:!0,contextMenuEvent:"contextmenu",defaultContextMenu:[{title:function(a,b,c){return tb.i18n("freezePanes")},processor:function(a,b,c){var d=parseInt(b.attr("data-alopexgrid-columnindex")),e={};e.columnFixUpto=d-1,a&&(e.rowFixCount=a._index.row),c.updateOption(e)},use:function(a,b){return!(!b.hasClass("bodycell")||b.hasClass("summarycell"))}},{title:function(a,b,c){return tb.i18n("freezePanesRow")},processor:function(a,b,c){for(var d=0;d<c.option.columnMapping.length;d++)c.option.columnMapping[d].fixed=!1;c.updateOption({columnFixUpto:"unfix",rowFixCount:a._index.row})},use:function(a,b){return!(!a||!b.hasClass("bodycell")||b.hasClass("summarycell"))}},{title:function(a,b,c){return tb.i18n("freezePanes")},processor:function(a,b,c){c.rowUnfix();var d=parseInt(b.attr("data-alopexgrid-columnindex"));c.updateOption({columnFixUpto:d-1})},use:function(b,c,d){return!(!c.hasClass("headercell")||!a.isNumeric(c.attr("data-alopexgrid-columnindex")))}},{title:function(a,b,c){return tb.i18n("freezeCancel")},processor:function(a,b,c){c.updateOption({columnFixUpto:"unfix",rowFixCount:0})},use:function(a,b,c){return!0}},{title:function(a,b,c){return tb.i18n("addRow")},processor:function(b,c,d){var e=a.extend(!0,{},d.state.emptyData),f=parseInt(c.attr("data-alopexgrid-rowindex")),g=b._index.data;if(b._meta){for(;b._meta&&b;)b=d._getRenderedDataFromRenderedIndex(--f);g=b._index.data+1}if(b){if(d.option.grouping&&d.option.grouping.by&&d.option.grouping.useGrouping)for(var h=0;h<d.option.grouping.by.length;h++){var i=d.option.grouping.by[h];"string"==typeof i&&(e[i]=b[i])}d.showProgress(function(){d.dataAdd(e,{_index:{data:g}})})}},use:function(b,c,d){return c.hasClass("bodycell")&&a.isNumeric(c.attr("data-alopexgrid-rowindex"))}},{title:function(a,b,c){return tb.i18n("enlarge")},processor:function(a,b,c){c.enlargeStart()},use:function(a,b,c){return!0}},{title:function(a,b,c){return tb.i18n("removeFilter")},processor:function(a,b,c){c.clearFilter(!1)},use:function(a,b,c){return b.hasClass("headercell")||b.hasClass("filtercell")}}],contextMenu:[],contextMenuTitleMapper:null,alwaysShowVerticalScrollBar:!1,alwaysShowHorizontalScrollBar:!1,extendStateOnSet:!0,extendStateOnAdd:!0,fillUndefinedKey:!1,trimUnmappedKey:!1,readonlyRender:!0,disableCellTitle:!1,disableValueEscape:!1,currentPageInCenter:!1,enableHeaderGroupResizing:!0,setOriginalFromStart:!1,deepCopyOnDataGet:!1,enableDataGetAllByEmptyArray:!1,optionMergeLegacyMode:!1,sortClearOnEdit:!1,disableTreeEdit:!1,tree:{useTree:!1,idKey:null,parentIdKey:null,leftKey:null,rightKey:null,leafKey:null,depthKey:null,expandedKey:null,leafValue:["true","false"],expandedValue:["true","false"],depthValueType:"string",depthStartValue:0,rootNodeParentIdValue:"",initialIdValue:"0",idGenerator:null,initialExpandedValue:!0,dragdropExpandDelay:1200},importMapping:{},excelWorker:{exportOption:{},importOption:{}},useScrollAcceleration:!0}}),a.extend(!0,tb,{KEY_NAME:f(),serial:0,instances:{},markup:{child:[{tag:"div",attr:{styleclass:"title"},child:[{tag:"div",attr:{styleclass:"title-label"},child:""},{tag:"div",attr:{styleclass:"table-toggle"},child:""},{tag:"div",attr:{styleclass:"title-markuparea"},child:""}]},{tag:"div",attr:{styleclass:"columnhiddenarea","data-alopexgrid-columnhiddenarea":!0},child:[{tag:"div",attr:{styleclass:"columnhiddenarea-label"},child:""}]},{tag:"div",attr:{styleclass:"wrapper",style:"width:100%;"},child:""},{tag:"div",attr:{contentEditable:"true",style:"position:absolute;left:-1px;top:-1px;width:0.1px;height:0.1px;outline:none;padding:0;margin:0;border:none;overflow:hidden;color:transparent;text-shadow:0 0 0 #000;opacity:0;filter:Alpha(opacity=0);",styleclass:"fixed-focus-catch focus"}},{tag:"div",attr:{styleclass:"pager alopexgrid-pager",style:"position:relative;"},child:[{tag:"div",attr:{styleclass:"pager-left",style:""},child:""},{tag:"div",attr:{styleclass:"pager-center"},child:[{tag:"div",attr:{styleclass:"pagination first-page page-button","data-to-page":"first"}},{tag:"div",attr:{styleclass:"pagination prev-page page-button","data-to-page":"prev"}},{tag:"ul",attr:{styleclass:"pagination page-list","data-to-page":"list"}},{tag:"div",attr:{styleclass:"pagination next-page page-button","data-to-page":"next"}},{tag:"div",attr:{styleclass:"pagination last-page page-button","data-to-page":"last"}}]},{tag:"div",attr:{styleclass:"pager-right",style:""},child:""}]}]}}),a.extend(!0,tb,{plugin:[],addPlugin:function(b){a.isFunction(b)&&(tb.removePlugin(b),tb.plugin.push(b))},removePlugin:function(a){for(var b=tb.plugin.length-1;b>=0;)tb.plugin[b]===a&&tb.plugin.splice(b,1),b--}}),a.extend(!0,tb,{trimObject:function(b,c){var d=a.extend({},b);if(c){var e=b._state;d._state={},d._state.added=e.added,d._state.deleted=e.deleted,d._state.edited=e.edited,d._state.selected=e.selected}else delete d._state;return delete d._index,delete d._edited,delete d._invalid,delete d._key,delete d._column,delete d._original,d},trimData:function(b,c){if(c=c||tb.commonOption.preserveStateOnTrim||null,a.isArray(b)){for(var d=[],e=0,f=b.length;f>e;e++)a.isPlainObject(b[e])&&d.push(tb.trimObject(b[e],c));return d}return tb.trimObject(b,c)},parseEvent:function(b){if(b.alopexgrid)return b.alopexgrid;var c=a(b.target),d=c.closest(".alopexgrid-cell"),e=null,f=null,g=null,h="."+_a.split(" ").join(".");if(e=c.closest(h),!e.length&&b.delegateTarget){var i=a(b.delegateTarget).closest(h);i.length&&(e=i)}if(!e.length&&b.currentTarget){var j=a(b.currentTarget).closest(h);j.length&&(e=j)}var k=Za(e);if(!e.length&&d.length){var l=d.attr("data-alopexgrid-root");k=tb.instances[l],k&&(e=k.$root)}if(!d.length&&(f=c.closest("[data-alopexgrid-inscribe]"),f.length&&(g=f.attr("data-alopexgrid-inscribe").split(","),!k))){var l=g[0];k=tb.instances[l],k&&(e=k.$root)}var m={bodycell:!1,headercell:!1,footercell:!1};m.$grid=e;var n=null,o=null,p=!1;if(d.length)n=d.attr("data-alopexgrid-dataindex"),o=d.attr("data-alopexgrid-columnindex"),m.$cell=d;else if(g){n=k.state.dataIdToIndexMap[g[1]],o=parseInt(g[2]);var q=k.state.data[n];rowIndex=q?q._index.row:null,d=null!=rowIndex?e.find("#"+k._cellIdFromRowIndex(rowIndex,o)):e.find("#"+k.key+"-h-"+parseInt(g[3])+"-"+o),m.$cell=d}d.length&&(tb.renderUtil.hasClass(d[0],"bodycell")?(m.bodycell=!0,p=!0):tb.renderUtil.hasClass(d[0],"headercell")?(m.headercell=!0,p=!0):tb.renderUtil.hasClass(d[0],"footercell")&&(m.footercell=!0,p=!0));var r=k?k.state.data[n]||null:null,s=k?k.state.columnIndexToMapping[o]||null:null;return null!==s&&void 0!==s&&(m.mapping=s,r||(r={}),r._key=s.key,r._column=s.columnIndex,!isNaN(s.columnIndex)&&s.columnIndex>=0&&null!==r&&void 0!==r&&null!==r._index&&void 0!==r._index&&(r._index.column=s.columnIndex)),null!==r&&void 0!==r&&(m.data=r),p||(r&&r._index&&r._index.id&&s&&null!=s.columnIndex?m.bodycell=!0:r&&!r._index&&s&&null!=s.id&&(d?tb.renderUtil.hasClass(d[0],"footercell")?m.footercell=!0:tb.renderUtil.hasClass(d[0],"headercell")&&(m.headercell=!0):g&&null!=g[3]&&(m.headercell=!0))),m},currentData:function(b){if(!b)return null;if(a.isArray(b)){for(var c=[],d=0,e=b.length;e>d;d++){var f=tb.currentData(b[d]);f&&c.push(f)}return c}var g=tb.instances[b._index.grid],h={};for(var i in b)b.hasOwnProperty(i)&&95!==i.charCodeAt(0)&&(h[i]=b[i]);if(b._index&&(h._index=b._index),b._state&&(h._state=b._state,b._state.editing))for(var j in b._state.editing){var i=g.state.columnIndexToKeyMap[j];h[i]=b._state.editing[j]}return h},currentValue:function(a,b){if(!a||!b)return null;var c=tb.instances[a._index.grid],d=a[b];if(a._state.editing){var e=c.state.columnKeyToIndexMap[b];void 0!==e&&a._state.editing.hasOwnProperty(e)&&(d=a._state.editing[e])}return d},escapeHTML:function(a){return tb.renderUtil.escapeHTMLString(a)},generateKey:f});var ub=!!Array.prototype.map;tb.aggregateFunction={primitive:ub?function(a,b){return a.map(function(a){return null==a?a:"object"==typeof a&&b?a[b]:a})}:function(a,b){for(var c=[],d=0,e=a.length;e>d;d++){var f=a[d];null==f?c.push[f]:"object"==typeof f?b&&c.push(f[b]):c.push(f)}return c},sum:function(a){for(var b=0,c=0,d=a.length-1;d>=0;d--)a[d]&&(b+=Number(a[d])||0,c=m(c,(String(a[d]).split(".")[1]||"").length));return tb.renderUtil.addCommas(parseFloat(b).toFixed(c))},average:function(a){for(var b=0,c=0,d=a.length-1;d>=0;d--)a[d]&&(b+=Number(a[d])||0,c=m(c,(String(a[d]).split(".")[1]||"").length));return tb.renderUtil.addCommas(parseFloat(b/a.length).toFixed(Math.max(c,2)))},stdev:function(a){for(var b=0,c=0,d=a.length-1;d>=0;d--)isNaN(Number(a[d]))||(c+=Number(a[d]),b+=Number(a[d])*Number(a[d]));var e=a.length?Math.sqrt(b/a.length-c/a.length*(c/a.length)):0;return tb.renderUtil.addCommas(parseFloat(e).toFixed(2))},count:function(a){return a.length||0},countif:function(a){for(var b=0,c=a.length-1;c>=0;c--)a[c]===paramArray[0]&&b++;return tb.renderUtil.addCommas(b)},min:function(a){for(var b=Number(a[a.length-1])||0,c=0,d=a.length-1;d>=0;d--)b=Math.min(b,Number(a[d])||0),c=m(c,(String(a[d]).split(".")[1]||"").length);return tb.renderUtil.addCommas(parseFloat(b).toFixed(c))},max:function(a){for(var b=Number(a[a.length-1])||0,c=0,d=a.length-1;d>=0;d--)b=Math.max(b,Number(a[d])||0),c=m(c,(String(a[d]).split(".")[1]||"").length);return tb.renderUtil.addCommas(parseFloat(b).toFixed(c))}},tb.filterFunction={lt:function(a,b){return Number(a)<Number(b)},lte:function(a,b){return Number(a)<=Number(b)},gt:function(a,b){return Number(a)>Number(b)},gte:function(a,b){return Number(a)>=Number(b)},equal:function(a,b){return String(a).toLowerCase()===String(b).toLowerCase()},notequal:function(a,b){return String(a).toLowerCase()!==String(b).toLowerCase()},contain:function(a,b){return String(a).toLowerCase().indexOf(String(b).toLowerCase())>=0},notcontain:function(a,b){return String(a).toLowerCase().indexOf(String(b).toLowerCase())<0},checkedList:function(a,b){return jb?b[a]===!0?!0:!1:b[a]===!0;
}};var vb="classList"in document.createElement("_"),wb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"," ":"&nbsp;"};tb.renderUtil={escapeHTMLString:function(a){return C(a)},addCommas:function(a){var b=String(a).split(".");return b[0]=b[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),b.join(".")},renderRuleToArray:function(b,c,d,e,f){if(!d.rule)return null;var g=d.rule;return a.isFunction(d.rule)&&(g=d.rule(b,c,d,e,f)),g},normalizeRuleObject:function(a,b){var c=a;if(a&&"object"==typeof a){c={};for(var d in a)c[b.state.renderRuleKeyNormalizeMap[d]||d]=a[d]}return c},getTextFromRenderRuleArray:function(b,c,d,e,f){var g=b,h=tb.renderUtil.renderRuleToArray(b,c,d,e,f);if(h&&a.isArray(h))for(var i=0,j=h.length;j>i;i++){var k=tb.renderUtil.normalizeRuleObject(h[i],f);if(k&&k.value===b)if(k.hasOwnProperty("text"))g=k.text;else if(k.hasOwnProperty("html")){var l=document.createElement("span");l.innerHTML=k.html,g=a.text(l)}}return g},addThousandsSeperator:function(a,b){var c=String(a).split(".");return c[0]=c[0].replace(/\B(?=(\d{3})+(?!\d))/g,b||","),c.join(".")},attributeToElement:function(a,b){if(a&&"object"==typeof a&&b&&b.nodeType)for(var c in a)b.setAttribute(c,a[c])},defaultRendererClass:"alopexgrid-default-renderer",defaultInputWrapperClass:"alopexgrid-input-*-wrapper",addDefaultRendererClass:function(a){a.className=(a.className?a.className+" ":"")+tb.renderUtil.defaultRendererClass},addDefaultInputWrapperClass:function(a,b){a.className=(a.className?a.className+" ":"")+"alopexgrid-input-wrapper "+tb.renderUtil.defaultInputWrapperClass.replace("*",b||"text")},hasDefaultInputWrapperClass:function(a){return tb.renderUtil.hasClass(a,"alopexgrid-input-wrapper")},generateHTMLString:function(b){var c="";if(a.isArray(b)){for(var d=0,e=b.length;e>d;d++)c+=tb.renderUtil.generateHTMLString(b[d]);return c}if(!b||!b.tag&&!b.child)return b||"";if(b.tag){if(c+="<"+b.tag,b.attr)for(var f in b.attr){var g=f;"styleclass"==f&&(g="class"),c+=" "+g+'="'+b.attr[f]+'"'}c+=">"}if(a.isArray(b.child))for(var d=0,e=b.child.length;e>d;d++)c+=tb.renderUtil.generateHTMLString(b.child[d]);else b.child&&(c+=tb.renderUtil.generateHTMLString(b.child));return b.tag&&(c+="</"+b.tag+">"),c},hasClass:vb?function(a,b){return a.classList.contains(b)}:function(a,b){return(" "+a.className+" ").indexOf(" "+b+" ")>-1},addClass:vb?function(a,b){a.classList.add(b)}:function(a,b){tb.renderUtil.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},removeClass:vb?function(a,b){a.classList.remove(b)}:function(a,b){tb.renderUtil.hasClass(a,b)&&(a.className=a.className.replace(new RegExp("(\\s|^)"+b+"(\\s|$)")," "))},emptyElement:function(b){a(b).empty()},setElementContent:function(a,b){return a?(tb.renderUtil.emptyElement(a),b&&b.jquery?b.appendTo(a):"string"==typeof b?a.innerHTML=b:"number"==typeof b?a.appendChild(document.createTextNode(String(b))):b&&b.nodeType&&a.appendChild(b),a):null},inlineStyleToStyleObject:function(b,c,d,e){var f=b;if(c=c||{},"function"==typeof f&&(f=f.apply(e,d)),"string"==typeof f)for(var g=f.split(";"),h=0,i=g.length;i>h;h++){var j=g[h].split(":");c[a.trim(j[0])]=a.trim(j[1])}else if("object"==typeof f)for(var k in f){var l=f[k];"function"==typeof l&&(l=l.apply(e,d)),("string"==typeof l||"number"==typeof l)&&(c[k]=l)}return c},isGridPointerActionProhibited:function(a){for(;null!==a;){var b=a.parentElement;if(null!=b&&b.className&&(tb.renderUtil.hasClass(a,"alopexgrid-handle")||tb.renderUtil.hasClass(a,"alopexgrid-ignore-pointeraction")))return!0;a=b}return!1},getDocumentHeight:function(){var a=document.body,b=document.documentElement;return Math.max(a.scrollHeight,a.offsetHeight,b.clientHeight,b.scrollHeight,b.offsetHeight)},getDocumentWidth:function(){var a=document.body,b=document.documentElement;return Math.max(a.scrollWidth,a.offsetWidth,b.clientWidth,b.scrollWidth,b.offsetWidth)}},tb.defaultOption.renderMapping.string={renderer:function(a,b,c,d,e){var f=document.createElement("span");tb.renderUtil.addDefaultRendererClass(f);var g=a;tb.renderUtil.attributeToElement(c.attr,f);var h=tb.renderUtil.renderRuleToArray(a,b,c,d,e);"string"==typeof h&&(h=[h]);var i=!1;if(h&&h.length)for(var j=0,k=h.length;k>j;j++){var l=tb.renderUtil.normalizeRuleObject(h[j],e);l&&"object"==typeof l?l.value===a&&(l.hasOwnProperty("html")?(g=l.html,i=!0):g=l.hasOwnProperty("text")?l.text:a):"string"==typeof l&&("comma"===l?g=tb.renderUtil.addThousandsSeperator(a):"ellipsis"===l&&(f.style.textOverflow="ellipsis",f.style.whiteSpace="nowrap",f.style.overflow="hidden"))}if(null==g&&(g=""),i)f.innerHTML=g;else{var m=document.createTextNode(g);f.appendChild(m)}return f}},tb.defaultOption.renderMapping.text={renderer:function(a,b,c,d,e){var g=document.createElement("input");if(tb.renderUtil.addDefaultRendererClass(g),g.type="text",g.name=(e.option.editableNameWithKey?d.key:null)||f(),c.styleclass){var h=c.styleclass;"function"==typeof h&&(h=h.call(e,a,b,c,d,e)||!1),"string"==typeof h&&tb.renderUtil.addClass(g,h)}var i=a;tb.renderUtil.attributeToElement(c.attr,g),c.readonly&&(g.readOnly=!0);var j=tb.renderUtil.renderRuleToArray(a,b,c,d,e);if(j&&j.length)for(var k=0,l=j.length;l>k;k++){var m=tb.renderUtil.normalizeRuleObject(j[k],e);m&&"object"==typeof m&&m.value===a&&(i=m.hasOwnProperty("text")?m.text:a)}return g.value=null==i?"":i,g},editedValue:function(a,b,c,d,e){return a.getElementsByTagName("INPUT")[0].value}},tb.defaultOption.renderMapping.select={renderer:function(a,b,c,d,e){var g=document.createElement("select");if(tb.renderUtil.addDefaultRendererClass(g),tb.renderUtil.attributeToElement(c.attr,g),g.name=(e.option.editableNameWithKey?d.key:null)||f(),c.readonly&&(g.disabled=!0),c.styleclass){var h=c.styleclass;"function"==typeof h&&(h=h.call(e,a,b,c,d,e)||!1),"string"==typeof h&&tb.renderUtil.addClass(g,h)}var i=tb.renderUtil.renderRuleToArray(a,b,c,d,e);if(i&&i.length)for(var j=0,k=i.length;k>j;j++){var l=tb.renderUtil.normalizeRuleObject(i[j],e),m=document.createElement("option");if(m.value=l.value,l.hasOwnProperty("html"))m.innerHTML=l.html;else{var n=document.createTextNode(l.text||l.value);m.appendChild(n)}l.value===a&&(m.selected=!0),g.appendChild(m)}return g},editedValue:function(a,b,c,d,e){return a.getElementsByTagName("SELECT")[0].value}},tb.defaultOption.renderMapping.radio={renderer:function(a,b,c,d,e){var g=document.createDocumentFragment(),h=tb.renderUtil.renderRuleToArray(a,b,c,d,e),i=(e.option.editableNameWithKey?d.key:null)||f(),j=!1,k=null,l=null;if(h&&h.length)for(var m=0,n=h.length;n>m;m++){var o=tb.renderUtil.normalizeRuleObject(h[m],e),p=document.createElement("label");tb.renderUtil.addDefaultInputWrapperClass(p,"radio");var q=document.createElement("input"),r=document.createElement("span");if(tb.renderUtil.addDefaultRendererClass(q),0===m&&(k=q,l=p),q.type="radio",q.name=i,q.value=o.value,c.readonly&&(q.disabled=!0),c.styleclass){var s=c.styleclass;"function"==typeof s&&(s=s.call(e,a,b,c,d,e)||!1),"string"==typeof s&&tb.renderUtil.addClass(q,s)}if(tb.renderUtil.attributeToElement(c.attr,q),o.value===a&&(q.checked=!0,tb.renderUtil.addClass(p,"checked"),j=!0),o.hasOwnProperty("html"))r.innerHTML=o.html;else{var t=document.createTextNode(o.hasOwnProperty("text")?o.text:o.value);r.appendChild(t)}p.appendChild(q),p.appendChild(r),g.appendChild(p)}return!j&&k&&l&&(k.checked=!0,tb.renderUtil.addClass(l,"checked")),g},editedValue:function(a,b,c,d,e){for(var f=a.getElementsByTagName("input"),g=0,h=f.length;h>g;g++)if(f[g].checked)return f[g].value;return""},toggle:function(a,b,c,d,e){for(var f=a.getElementsByTagName("input"),g=a.getElementsByTagName("label"),h=0,i=0,j=g.length;j>i;i++)tb.renderUtil.removeClass(g[i],"checked");for(var i=0,j=f.length;j>i;i++)if(f[i].checked){h=i;break}h+=1,h>=f.length&&(h=0),f[h].checked=!0,tb.renderUtil.addClass(f[h].parentNode,"checked")}},tb.defaultOption.renderMapping.checkbox={renderer:function(a,b,c,d,e){var g=document.createElement("input");if(g.type="checkbox",g.name=(e.option.editableNameWithKey?d.key:null)||f(),tb.renderUtil.addDefaultRendererClass(g),c.readonly&&(g.disabled=!0),c.styleclass){var h=c.styleclass;"function"==typeof h&&(h=h.call(e,a,b,c,d,e)||!1),"string"==typeof h&&tb.renderUtil.addClass(g,h)}var i=document.createElement("label");tb.renderUtil.addDefaultInputWrapperClass(i,"checkbox");var j=tb.renderUtil.renderRuleToArray(a,b,c,d,e);if(j&&j.length)for(var k=0,l=j.length;l>k;k++){var m=tb.renderUtil.normalizeRuleObject(j[k],e);m.checked&&m.value===a&&(g.checked=!0,tb.renderUtil.addClass(i,"checked")),m.checked===!0?g.setAttribute("data-checked-value",m.value):m.checked===!1&&g.setAttribute("data-unchecked-value",m.value)}return i.appendChild(g),i},editedValue:function(a,b,c,d,e){var f=a.getElementsByTagName("INPUT")[0];return f.getAttribute(f.checked?"data-checked-value":"data-unchecked-value")||""},toggle:function(a,b,c,d,e){var f=a.getElementsByTagName("input")[0];f.checked=!f.checked,tb.renderUtil[f.checked?"addClass":"removeClass"](f.parentNode,"checked")}},tb.defaultOption.renderMapping.textarea={renderer:function(a,b,c,d,e){var g=document.createElement("textarea");tb.renderUtil.addDefaultRendererClass(g);if(tb.renderUtil.attributeToElement(c.attr,g),g.value=a,g.name=(e.option.editableNameWithKey?d.key:null)||f(),c.styleclass){var h=c.styleclass;"function"==typeof h&&(h=h.call(e,a,b,c,d,e)||!1),"string"==typeof h&&tb.renderUtil.addClass(g,h)}return g},editedValue:function(a,b,c,d,e){return a.getElementsByTagName("TEXTAREA")[0].value}},tb.regex={inputControls:/^(?:input|select|textarea|button)$/i,caretAvailableType:/^(?:text|search|url|tel|password)$/i},hb.on("gridInit",function(){return w()}),tb.setup=function(b){b&&a.isPlainObject(b)&&(tb.commonOption=y(tb.commonOption||{definition:{},preConstructor:null,postConstructor:null},b))},tb.clearSetup=function(){delete tb.commonOption,tb.commonOption={definition:{},preConstructor:null,postConstructor:null}},tb.define=function(b,c){if("string"==typeof b&&void 0!==c)tb.commonOption.definition[b]=c;else if(b&&a.isPlainObject(b))for(k in b)if(b.hasOwnProperty(k)){var d=b[k];"string"==typeof k&&void 0!==d&&(tb.commonOption.definition[k]=d)}},tb.undefine=function(a){delete tb.commonOption.definition[a]},tb.undefineAll=function(){delete tb.commonOption.definition,tb.commonOption.definition={}},tb.definition=function(a){return tb.commonOption.definition[a]},tb.run=function(a,b){var c=tb.instances[a];if(c){var d=Array.prototype.slice.call(arguments,2);return c[b].apply(c,d)}},tb.prototype._version=function(){return this.version},tb.prototype.readOption=function(){return this.option},tb.prototype.updateOption=function(c){function d(b,c,d){var f={};if(f.mapping=a.extend(!0,{},d),f.columnIndex=b,f.toColumnIndex=c,f.groupMappingList=[],f.groupColumnIndexes=[],f.visibleIndex=V[b],f.isGroup=!0,f.colspan=0,e.option.enableHeaderGroupResizing===!0){for(var g=[],h=b;c>=h;h++){var i=e.state.columnIndexToMapping[h];i&&i.columnIndex>=0&&i.hidden!==!0&&i.resizing&&g.push(i.columnIndex)}g.length&&(f.mapping.resizing=g)}for(var h=b;c>=h;h++){var i=e.state.columnIndexToMapping[h];i&&i.columnIndex>=0&&i.hidden!==!0&&(f.colspan+=1,f.groupMappingList.push(i),f.groupColumnIndexes.push(h),d.hideSubTitle===!0&&(S[i.columnIndex]=[]),S[i.columnIndex].unshift(f))}var j=a.extend(!0,{groupMappingList:f.groupMappingList,groupColumnIndexes:f.groupColumnIndexes},d);e.state.headerGroupArr.push(j),e.state.headerGroupById[d.id]=j,null!==d.key&&void 0!==d.key&&(e.state.headerGroupByKey[d.key]=j)}var e=this,f=e.option;e.$wrapper,e.$pager,e.$title,e.$columnhiddenarea,e.$root;if(A(e,c)){f=e.option=a.extend(!0,{},e.option,c?c:{});for(var g=["columnMapping","headerGroup","instantInlineEditType","contextMenu"],h=0;h<g.length;h++){var i=g[h];c&&c.hasOwnProperty(i)&&(f[i]=a.extend(!0,[],c[i]))}c&&c.hasOwnProperty("footer")&&(f.footer=a.extend({},f.footer,c.footer))}else z(e,c),f=e.option;if(a.isPlainObject(c)&&(c.rowPadding||c.rowpadding)&&(e.option.rowPadding=c.rowPadding||c.rowpadding),e.option.columnMapping){e.state.keyMappedToMultipleColumn=!1,e.state.columnMappedKey={},e.state.columnIndexToKeyMap={},e.state.columnKeyToIndexMap={},e.state.columnIndexToMapping={},e.state.columnKeyToMapping={},e.state.columnMappingMapById={},e.state.multiColumnList=[],e.state.groupingColumnIndexToKey={},e.state.groupingColumnIndexToMapping={},(null===e.state.hiddenColumnIdxArr||void 0===e.state.hiddenColumnIdxArr)&&(e.state.hiddenColumnIdxArr=[],e.state.hiddenColumnIndexToMapping={});for(var k=0,l=e.option.columnMapping.length;l>k;k++){var m=e.option.columnMapping[k];if(m.extend&&!m.extended){var n=m.extend;a.isArray(n)||(n=[n]);for(var o={},p=0,q=n.length;q>p;p++){var r=tb.commonOption.definition[n[p]];r&&"object"==typeof r&&(o=a.extend(!0,o,r))}o=a.extend(!0,o,m),o.extended=!0,e.option.columnMapping[k]=o}}if(null!==e.option.grouping&&void 0!==e.option.grouping&&e.option.grouping.useGroupColumnRearrange===!0){var s=e.option.grouping.by;if(e.option.autoColumnIndex===!0)for(var t,u,k=0,v=s.length;v>k;k++){t=s[k];for(var w=0,x=e.option.columnMapping.length;x>w;w++)if(u=e.option.columnMapping[w],u.key===t){var y=e.option.columnMapping.splice(w,1);e.option.columnMapping.splice(k,0,y[0])}}else{e.option.columnMapping.sort(function(a,b){var c=j(a.columnIndex)?Number(a.columnIndex):1/0,d=j(b.columnIndex)?Number(b.columnIndex):1/0;return c>d?1:d>c?-1:0}),e.state.columnIndexArr=[];for(var u,k=0,l=e.option.columnMapping.length;l>k;k++)u=e.option.columnMapping[k],e.state.columnIndexArr.push(u.columnIndex);for(var t,k=0,v=s.length;v>k;k++){t=s[k];for(var w=0,x=e.option.columnMapping.length;x>w;w++)if(u=e.option.columnMapping[w],u.key===t){var y=e.option.columnMapping.splice(w,1);e.option.columnMapping.splice(k,0,y[0])}}for(var k=0,l=e.option.columnMapping.length;l>k;k++)u=e.option.columnMapping[k],u.columnIndex=e.state.columnIndexArr[k]}}e.state.columnIdUniqueNumber=e.state.columnIdUniqueNumber||0;for(var B=0;B<e.option.columnMapping.length;B++){var m=e.option.columnMapping[B];if(e.option.autoColumnIndex===!0&&(m.columnIndex=parseInt(B)),m.hasOwnProperty("key")&&(e.state.columnMappedKey[m.key]=!0,e.state.columnKeyToIndexMap.hasOwnProperty(m.key)&&(e.state.keyMappedToMultipleColumn=e.state.keyMappedToMultipleColumn||{},e.state.keyMappedToMultipleColumn[m.key]=e.state.keyMappedToMultipleColumn[m.key]||[],e.state.keyMappedToMultipleColumn[m.key].push(m)),e.state.columnKeyToIndexMap[m.key]=parseInt(m.columnIndex),e.state.columnKeyToMapping[m.key]=m),m.hasOwnProperty("columnIndex")&&(e.state.columnIndexToKeyMap[m.columnIndex]=String(m.key),e.state.columnIndexToMapping[m.columnIndex]=m),m.id=m.id||"col"+e.state.columnIdUniqueNumber++,e.state.columnMappingMapById.hasOwnProperty(m.id)){for(var C=1;e.state.columnMappingMapById.hasOwnProperty(m.id+"_"+C);)C++;m.id+="_"+C}e.state.columnMappingMapById[m.id]=m,m.multi&&e.state.multiColumnList.push(m)}if(null!==e.option.grouping&&void 0!==e.option.grouping&&e.option.grouping.useGroupColumnRearrange===!0)for(var t,u,s=e.option.grouping.by,k=0,l=s.length;l>k;k++)u=e.option.columnMapping[k],t=s[k],e.state.groupingColumnIndexToKey[u.columnIndex]=t,e.state.groupingColumnIndexToMapping[u.columnIndex]=u;else e.option.columnMapping.sort(function(a,b){var c=j(a.columnIndex)?Number(a.columnIndex):1/0,d=j(b.columnIndex)?Number(b.columnIndex):1/0;return c>d?1:d>c?-1:0});for(var D=-1,E=0,F=[],G=0,B=0;B<e.option.columnMapping.length;B++){var m=e.option.columnMapping[B];if(null!=m.columnIndex&&m.hidden!==!0){if(G++,"number"==typeof e.option.columnFixUpto)m.fixed=m.columnIndex<=e.option.columnFixUpto;else if("unfix"===e.option.columnFixUpto)m.fixed=!1;else if("string"==typeof e.option.columnFixUpto){var H=e._getColumnByKey(e.option.columnFixUpto);H&&(m.fixed=m.columnIndex<=H.columnIndex)}if(!m.fixed)break;D=m.columnIndex,E+=parseInt(m.width),F.push(m)}}"unfix"===e.option.columnFixUpto&&delete e.option.columnFixUpto,e.state.fixupto=D,e.state.fixedColumnWidth=E,e.state.fixedColumnMapping=F;var I=-1,J=Number.POSITIVE_INFINITY;e.state.hasSelectorColumn=!1,e.state.hasRowindexColumn=!1,e.state.hasColumnFoldingColumn=!1,e.state.dataCompositorMap=[],e.state.dataKeyList=[],e.state.hasColspan=!1,e.state.visibleColumnMappingList=[],e.state.visibleColumnMappingSignature="",e.state.visibleColumnIndexArr=[],e.state.visibleIndexMapByColumnIndex={},e.state.visibleIndexMapByKey={};var K=!1;if(e.state.hasLeftColspanMapByColumnIndex={},e.state.hiddenColumnDraging!==!0&&(e.state.showColCalled===!1||null==e.state.showColCalled)||e.state.showColCalled!==!0&&(e.state.hiddenColumnDraging===!1||null==e.state.hiddenColumnDraging))for(var k=0,l=e.option.columnMapping.length;l>k;k++){var m=e.option.columnMapping[k];if(m.columnFoldingColumn&&m.columnFolded){var L=a.type(m.columnFoldingColumn),M=null,N=null,O=null;"array"===L?(M=m.columnFoldingColumn[0],N=m.columnFoldingColumn[1]):"object"===L&&(M=m.columnFoldingColumn.fromIndex,N=m.columnFoldingColumn.toIndex,O=m.columnFoldingColumn.exceptionColList),"string"==typeof M&&(M=e.state.columnKeyToIndexMap[M]),"string"==typeof N&&(N=e.state.columnKeyToIndexMap[N]),null!=M&&null!=N&&e._hideAllColumnBetween(M,N,O)}}e.state.hasMappingRefreshBy=!1;for(var B=0;B<e.option.columnMapping.length;B++){var m=e.option.columnMapping[B];if(a.isPlainObject(e.option.defaultColumnMapping)&&a.each(e.option.defaultColumnMapping,function(a,b){m.hasOwnProperty(a)||(m[a]=b)}),m.hasOwnProperty("columnIndex")&&(I=Math.max(I,m.columnIndex||0),J=Math.min(J,m.columnIndex)),m.hasOwnProperty("key")&&(e.state.dataKeyList.push(m.key),m.hasOwnProperty("value")&&j(m.key)&&j(m.value)&&e.state.dataCompositorMap.push(m)),m.hasOwnProperty("refreshBy")&&(e.state.hasMappingRefreshBy=!0),m.columnFoldingColumn&&(e.state.hasColumnFoldingColumn=!0),(m.colspan||m.colspanTo)&&(e.state.hasColspan=!0,K=!0),m&&ha(m)&&(e.state.visibleColumnMappingList.push(m),e.state.visibleColumnIndexArr.push(m.columnIndex),e.state.hasLeftColspanMapByColumnIndex[m.columnIndex]=K,e.state.visibleColumnMappingSignature+=m.id),m.editable&&e._isSpecialPurposeColumn(m)&&(m.editable=!1),m.selectorColumn&&(e.state.hasSelectorColumn=e.state.hasSelectorColumn||[],e.state.hasSelectorColumn.push(m)),m.rowindexColumn&&(e.state.hasRowindexColumn=!0),m.hidden===!0)null==e.state.hiddenColumnIndexToMapping[m.columnIndex]&&(e.state.hiddenColumnIdxArr.push(m.columnIndex),e.state.hiddenColumnIndexToMapping[m.columnIndex]=m);else if(null!=e.state.hiddenColumnIndexToMapping[m.columnIndex]){var P=a.inArray(m.columnIndex,e.state.hiddenColumnIdxArr);e.state.hiddenColumnIdxArr.splice(P,1),delete e.state.hiddenColumnIndexToMapping[m.columnIndex]}}if(e.state.groupingKeyMap={},e.option.grouping&&e.option.grouping.useGrouping&&e.option.grouping.by)for(var k=0,l=e.option.grouping.by.length;l>k;k++)e.state.groupingKeyMap[e.option.grouping.by[k]]=k;for(var Q=0;Q<e.state.visibleColumnMappingList.length;Q++){var m=e.state.visibleColumnMappingList[Q];e.state.visibleIndexMapByColumnIndex[m.columnIndex]=Q,e.state.visibleIndexMapByKey[m.key]=Q}e.state.visibleColumnCount=e.state.visibleColumnMappingList.length,e.state.filterColumnMappingList=e._generateFilterColumnList(),e._calculateColumnWidthProperty();for(var R=e.state.visibleColumnMappingList,S=(e.state.visibleColumnCount,{}),T=!1,U=e.state.fixupto,V=e.state.visibleIndexMapByColumnIndex,W=0,X=0,Y=R.length;Y>X;X++){var m=R[X],Z={};Z.mapping=m,Z.columnIndex=m.columnIndex,Z.visibleIndex=X,Z.isGroup=!1,S[m.columnIndex]=[Z]}if(e.state.headerGroupById={},e.state.headerGroupByKey={},e.state.headerGroupArr=[],e.state.headerGroupIdUniqueNumber=e.state.headerGroupIdUniqueNumber||0,e.option.headerGroup&&e.option.headerGroup.length)for(var k=e.option.headerGroup.length-1;k>=0;k--){var $=e.option.headerGroup[k];if(null!=$){(null===$.id||void 0===$.id)&&($.id=e.state.headerGroupIdUniqueNumber++);var _=null,aa=null;if(!$)continue;if("number"==typeof $.fromIndex)_=parseInt($.fromIndex);else if("string"==typeof $.fromIndex){var ba=e._getColumnByKey($.fromIndex);ba&&(_=ba.columnIndex)}if("number"==typeof $.toIndex)aa=parseInt($.toIndex);else if("string"==typeof $.toIndex){var ca=e._getColumnByKey($.toIndex);ca&&(aa=ca.columnIndex)}if(null!=_&&null!=aa){var da=a.inArray(U,e.state.columnIndexArr)+1,ea=e.state.columnIndexArr[da];U>=_&&aa>U?(d(_,U,$),d(ea,aa,$)):d(_,aa,$)}else $.hideSubTitle===!0&&(T=!0)}}for(var i in S){var fa=S[i];T&&fa.splice(1,fa.length-1),W=Math.max(fa.length,W)}for(var i in S){for(var fa=S[i],ga=fa.length-1;ga>=0;ga--){var Z=fa[ga];if(Z.mapping&&Z.mapping.rowspan){Z.rowspan=parseInt(Z.mapping.rowspan);for(var ia=0,ja=Z.rowspan-1;ja>ia;ia++)fa.splice(ga+1,0,null)}}W=Math.max(fa.length,W)}for(var i in S){var fa=S[i];if(fa.length<W){var ka=fa[fa.length-1];if(!ka){for(var la=0,k=W-1;k>=0;k--){if(fa[k]){fa[k].rowspan=la+1;break}la++,fa[k]=null}continue}for(var ma=0,k=0,l=fa.length;l-1>k&&W>k;k++)fa[k]&&(ma+=parseInt(fa[k].rowspan||1));ka.rowspan=Math.min(W,W-ma);for(var ga=1;ga<ka.rowspan;ga++)fa.push(null)}}for(var i in S)for(var fa=S[i],na=!0,k=fa.length-1;k>=0;k--)fa[k]&&(na===!1&&(fa[k].disableResizing=!0),fa[k]&&fa[k].mapping&&fa[k].mapping.resizing&&(na=!1));if(e.state.headerDepth=W,e.option.filteringHeader){for(var i in S){var fa=S[i],Z={filter:!0,columnIndex:parseInt(i)};fa.push(Z)}W+=1}e.state.columnHeaderDepth=W,e.state.columnHeaderStackMap=S;var pa=a('<div class="'+_a+'"><div class="wrapper"></div></div>'),qa=a('<div class="alopexgrid-cell cell bodycell" style="top:-999px;left:-999px;">&nbsp;</div>'),ra=a('<div class="alopexgrid-cell cell headercell" style="top:-999px;left:-999px;">&nbsp;</div>');e.$root.is(":visible")?e.$wrapper.append(qa,ra):(pa.css("position","absolute").css("top","-9999px").css("left","-9999px").appendTo(document.body),pa.children().append(qa,ra)),e.state.rowHeight=(e.option.rowOption&&a.isNumeric(e.option.rowOption.defaultHeight)?e.option.rowOption.defaultHeight:0)||qa.outerHeight(),e.state.headerRowHeight=ra.outerHeight(),qa.remove(),ra.remove(),pa.remove(),e.state.emptyData={_index:{},_state:{}};for(var ga=0,sa=e.state.dataKeyList.length;sa>ga;ga++){var w=e.state.dataKeyList[ga];e.state.emptyData[w]=""}for(var ta=[],k=0,l=e.option.columnMapping.length;l>k;k++){var m=e.option.columnMapping[k];m.hasOwnProperty("columnIndex")&&m.key&&m.editable&&ta.push(m.columnIndex+':(data.hasOwnProperty("'+m.key+'")?data["'+m.key+'"]:"")')}e.state.getEditingAllState=new Function("data","return {"+ta.join(",")+"};"),e.state.dataCompositor=null,e.state.dataCompositorMap.length&&(e.state.dataCompositor=function(b,c){for(var d in b.state.dataCompositorMap){var e=b.state.dataCompositorMap[d];c[e.key]=a.isFunction(e.value)?e.value(c[e.key],c,e):e.value}return c});var ua={},va=e.option.fillUndefinedKey!==!1,wa=va||!!a.map(e.option.columnMapping,function(c){var d=c.hasOwnProperty("defaultValue");return d&&(ua[c.id]=a.isFunction(c.defaultValue)?!0:b),d}).length,xa=e.option.trimUnmappedKey;e.state.dataFilltrimmer=null,(xa||wa)&&(e.state.dataFilltrimmer=function(b,c){if(wa)for(var d=0,e=b.option.columnMapping.length;e>d;d++){var f=b.option.columnMapping[d],g=f.key;g&&null==c[g]&&(ua[f.id]&&(c[g]=ua[f.id]===!0?f.defaultValue(c):f.defaultValue),va&&null==c[g]&&(c[g]=b.option.fillUndefinedKey===!0?"":b.option.fillUndefinedKey))}if(xa){var h=a.isArray(xa);for(var i in c)c.hasOwnProperty(i)&&"_state"!=i&&"_index"!=i&&"_key"!=i&&"_edited"!=i&&(h&&a.inArray(i,xa)>=0||b.state.columnMappedKey[i]||delete c[i])}}),e.state.minColumnIndex=J,e.state.maxColumnIndex=I}if(e.state.rowHeightMapByDataId=e.state.rowHeightMapByDataId||{},e.state.testRowAllowSelect=!(!e.option.rowOption||!a.isFunction(e.option.rowOption.allowSelect)),e.state.testRowAllowPaste=!1,e.option.rowOption&&null!=e.option.rowOption.allowPaste&&(e.state.testRowAllowPaste=a.type(e.option.rowOption.allowPaste)),e.state.renderRuleKeyNormalizeMap={text:"text",value:"value",html:"html",checked:"checked"},e.option.renderRuleOption)for(var i in e.option.renderRuleOption)"textKey"===i&&(e.state.renderRuleKeyNormalizeMap[e.option.renderRuleOption[i]]="text"),"valueKey"===i&&(e.state.renderRuleKeyNormalizeMap[e.option.renderRuleOption[i]]="value"),"htmlKey"===i&&(e.state.renderRuleKeyNormalizeMap[e.option.renderRuleOption[i]]="html"),"checkedKey"===i&&(e.state.renderRuleKeyNormalizeMap[e.option.renderRuleOption[i]]="checked");if(e.option.tree&&e.option.tree.useTree?(e.state.treeOption={},e.state.treeOption.expandedValue=e.option.tree.expandedValue||tb.defaultOption.tree.expandedValue,e.state.treeOption.leafValue=e.option.tree.leafValue||tb.defaultOption.tree.leafValue,e.state.treeOption.initialExpandedValue=e.option.tree.hasOwnProperty("initialExpandedValue")?e.option.tree.initialExpandedValue:tb.defaultOption.tree.initialExpandedValue,e.state.treeOption.depthStartValue=e.option.tree.depthStartValue||0):delete e.state.treeOption,e.state.rowSingleSelect=!("only"!==e.option.rowClickSelect&&!e.option.rowSingleSelect),a.isArray(e.option.data)){var ya=e.option.data;e.option.data=null,e.dataSet(ya,!0)}e.option.cellSelectable||e.option.enableHeaderSelect||e.state.hasRowindexColumn||e.option.disableTextSelection?e.$wrapper.addClass("text-selection-disabled").attr("unselectable","on"):e.$wrapper.removeClass("text-selection-disabled").removeAttr("unselectable"),c&&c.disableFocusedState===!1&&e._rowUnfocusAll(),e.option.cellInlineEdit&&(e.option.rowInlineEdit=!1);var za=!1;c&&(c.grouping&&(za=!0),c.tree&&(za=!0)),e.state.sortingRequired&&(za=!0),za&&(e._sortInternalData(),e.state.sortingRequired=!1),e._generateRenderTargetData(),e.state.renderingSuppressed||(Ya(e),oa(e),e.redraw()),e.viewEventUpdate();for(var k=0,l=tb.plugin.length;l>k;k++){var Aa=tb.plugin[k];a.isFunction(Aa)&&Aa.call(e,e,e.option,e.state)}},tb.prototype._getColumnByKey=function(a){return this.state.columnKeyToMapping[a]||this.state.columnMappingMapById[a]||null},tb.prototype._columnIndexKeyToMappingList=function(b){var c=this,d=b;if("string"==typeof b){var e=[];if(c.state.keyMappedToMultipleColumn&&c.state.keyMappedToMultipleColumn[b])e=e.concat(c.state.keyMappedToMultipleColumn[b]);else{var f=c._getColumnByKey(b);e=e.concat(f?[f]:[])}if(!c.option.disableMultiMappingGet&&c.state.multiColumnList.length)for(var g=[],h=0,i=c.state.multiColumnList.length;i>h;h++){var j=c.state.multiColumnList[h],k=j.multi;if(a.isArray(k))for(var l=0,m=k.length;m>l;l++){var n=k[l];n&&(n.key===b||n.id===b||n.columnIndex===b)&&e.push(n)}}return e}if(a.isArray(b)){for(var g=[],h=0,i=b.length;i>h;h++)g=g.concat(c._columnIndexKeyToMappingList(b[h]));return g}return null===d||void 0===d?[].concat(c.option.columnMapping):c.state.columnIndexToMapping[d]?[c.state.columnIndexToMapping[d]]:[]},tb.prototype.updateColumn=function(b,c){if(null==c&&(c=[]),j(b)){var d=this,e=[];if(a.isFunction(b)||a.isFunction(c)){var f=a.isFunction(b)?b:c;if(1===arguments.length)e=d._columnIndexKeyToMappingList();else if("string"==typeof c||"number"==typeof c)e=d._columnIndexKeyToMappingList(c);else if(a.isArray(c)&&c.length)for(var g=0,h=c.length;h>g;g++){var i=d._columnIndexKeyToMappingList(c[g]);e=e.concat(i)}for(var k=0;k<e.length;k++)f.call(d,e[k]);return d.state.sortingRequired=!0,void d.updateOption()}var l=a.isArray(b);if(l&&a.isArray(c)&&b.length&&b.length===c.length){for(var g=0,h=c.length;h>g;g++)if(a.isPlainObject(b[g]))for(var e=d._columnIndexKeyToMappingList(c[g]),m=0,n=e.length;n>m;m++)a.extend(e[m],b[g]);return void d.updateOption()}if(a.isPlainObject(b)&&!a.isEmptyObject(b)){a.isArray(c)?0===c.length&&(e=d._columnIndexKeyToMappingList()):c=[c];for(var g=0,h=c.length;h>g;g++){var i=d._columnIndexKeyToMappingList(c[g]);e=e.concat(i)}if(e&&e.length){for(var k=0;k<e.length;k++){var o=e[k];o&&a.extend(o,b)}d.updateOption()}}}},tb.prototype.updateColumnMapping=function(a,b){return this.updateColumn(b,a)},tb.prototype._processDefaultSorting=function(){var b=this;b.option.defaultSorting&&(a.isArray(b.option.defaultSorting)?b.state.sortingInfo=b._generateSortingInfo(b.option.defaultSorting):a.isPlainObject(b.option.defaultSorting)&&(b.state.sortingInfo=b._generateSortingInfo(b.option.defaultSorting.sortingColumn,b.option.defaultSorting.sortingDirection)))},tb.prototype.viewInit=function(b){var c=this;a(c.root).addClass(_a).html(tb.renderUtil.generateHTMLString(tb.markup))},tb.prototype._getGridOptionHeightValue=function(){var b=this.option.height;return a.isFunction(b)&&(b=b.call(this,this.$root.get(0))),a.isNumeric(b)?b=parseInt(b):null==b||b===!1?b="content":"string"==typeof b&&"px"===b.slice(-2).toLowerCase()&&a.isNumeric(b.slice(0,-2))&&(b=parseInt(b.slice(0,-2))),b},tb.prototype._getGridOptionWidthValue=function(){var b=this.option.width;return a.isFunction(b)&&(b=b.call(this,this.$root.get(0))),a.isNumeric(b)?b=parseInt(b):null==b||b===!1?b="parent":"string"==typeof b&&"px"===b.slice(-2).toLowerCase()&&a.isNumeric(b.slice(0,-2))&&(b=parseInt(b.slice(0,-2))),b},tb.prototype._viewUpdate=function(){var b=this;if(b.state&&!b.state.renderingSuppressed){var c=b._getGridOptionHeightValue(),d=b._getGridOptionWidthValue();b.$title.off(".alopexgridTitleViewEvent");var e=!1;if(null!=b.option.title&&b.option.title!==!1){e=!0;var f=b.option.title;f===!0&&(f=""),"function"==typeof f&&(f=f.call(b)),("number"==typeof f||"string"==typeof f)&&b.$titlelabel.text(f);var g=b.option.titleMarkup;"function"==typeof g&&(g=g.call(b)),g&&b.$titleMarkup.html(g),b.option.hideGridFoldingButton?b.$titleFolding.hide():b.$titleFolding.show(),b.$title.on("click.alopexgridTitleViewEvent",".table-toggle",{self:b},function(b){var c=b.data.self;if(c.$root.hasClass("folded")){c.$root.removeClass("folded");var d=c.$root.data("data-prev-height");c.$root.removeData("data-prev-height"),c.$root.animate({height:d+"px"},function(){var b=c._getGridOptionHeightValue();b||a(this).css({height:""}),c.viewUpdate()})}else c.$root.addClass("folded"),c.$root.data("data-prev-height",c.$root.height()),c.$root.animate({height:c.$title.height()+"px"})}),b.$title.show()}else b.$title.hide();if(!e||!b.$root.hasClass("folded")){if(b.$columnhiddenarea[b.option&&b.option.hiddenColumnArea?"show":"hide"](),b.option&&b.option.hiddenColumnArea){var h=b.option.hiddenColumnArea;h&&b.$columnhiddenarea.find(".columnhiddenarea-label").text("string"==typeof b.option.hiddenColumnArea?b.option.hiddenColumnArea:"");var i=b.$columnhiddenarea.children().length;if(i>1&&b.$columnhiddenarea.find(".headercell").remove(),b.state.hiddenColumnIdxArr&&b.state.hiddenColumnIdxArr.length>0){b.$columnhiddenarea.find(".columnhiddenarea-label").hide();for(var j,k,l,m,n,o,p=0,q=b.state.hiddenColumnIdxArr.length;q>p;p++){if(j=b.state.hiddenColumnIdxArr[p],k=b.state.hiddenColumnIndexToMapping[j],l=a('<div class="headercell"></div>'),l.attr("data-alopexgrid-columnindex",k.columnIndex),m=p*(a(b.$columnhiddenarea.find(".headercell")[0]).width()+10),l.css({left:m+"px"}),n=a('<div class="header-dragdrop-handle"></div>'),n.attr("data-alopexgrid-dragdropcolumnindex",k.columnIndex),n.attr("onmousedown",ab+".run('"+b.key+"','_hiddenHeaderDragStart',event,"+k.columnIndex+");"),o=a('<span class="column-title"></span>'),null!==k.title&&void 0!==k.title&&"string"==typeof k.title)o.text(k.title.replace(/<br>/g,""));else if(k.selectorColumn===!0){var r=a('<div class="alopexgrid-input-wrapper alopexgrid-input-checkbox-wrapper"></div>'),s=a('<input type="checkbox" name="'+b.key+'"class="selector-checkbox selector-column-input">');r.append(s),o.append(r)}else if("function"==typeof k.title){var t=k.title();o.append(t)}k.headerDragDrop===!1?l.append(o):l.append(n,o),b.$columnhiddenarea.append(l)}}else b.$columnhiddenarea.find(".columnhiddenarea-label").show()}b.$pager[b._usePager()?"show":"hide"]();var u=e?b.$title.outerHeight(!0):0,v=b.option.hiddenColumnArea?b.$columnhiddenarea.outerHeight(!0):0,w=b._usePager()?b.$pager.outerHeight(!0):0,x=u+v+w,y=0;if(b.option.header)for(var z=0;z<b.state.columnHeaderDepth;z++)y+=a.isArray(b.option.headerRowHeight)?b.option.headerRowHeight[z]:"number"==typeof b.option.headerRowHeight?b.option.headerRowHeight:b.state.headerRowHeight;var A=0;if(b._hasFooter()&&(A=b.option.footerRowHeight||b.state.rowHeight),b._calculateColumnWidthProperty(),
b.state.headerHeight=y,b.state.footerHeight=A,b.state.gridOptionHeight=c,b.state.gridOptionWidth=d,b.option.rowOption&&"content"===b.option.rowOption.defaultHeight&&b.$wrapper.is(":visible"))for(var B=0,q=b.state.data.length;q>B;B++){var C=b.state.data[B];null==b.state.rowHeightMapByDataId[C._index.id]&&b._setRowHeight(C,"content")}var D=b.option.alwaysShowVerticalScrollBar===!0,E=b.option.alwaysShowHorizontalScrollBar===!0,F=b.state.scrollbarxHeight=0,G=(b.state.scrollbaryWidth=0,0),H=0,I=b.$root.outerHeight()-b.$root.height(),J=b.$root.outerWidth()-b.$root.width(),K=b.$wrapper.outerHeight()-b.$wrapper.height(),L=b.$wrapper.outerWidth()-b.$wrapper.width(),M="",N="",O="",P=b.state.renderTargetDataList.length||0,Q=b.__getAllRowHeight();if(!P&&b.option.message&&b.option.message.nodata&&(Q+=b.state.rowHeight,P+=1),b.option.rowPadding){var R=b.option.rowPadding;R===!0&&b.option.paging&&b.option.paging.perPage&&(R=b.option.paging.perPage),R>P&&(Q+=(R-P)*b.state.rowHeight)}var S=Q+y+A,T=b.state.columnWidth;if(String(c).indexOf("row")>=0){var U="rowpadding"===c.toLowerCase()&&b.option.rowPadding?b.option.rowPadding:c.split("row")[0];if(a.isNumeric(U)){var V=U*b.state.rowHeight;H=V+y+A,O=H+K,M=O+x+I}else c="content"}if("number"==typeof c){M=c;var W=c-I;O=W-x,H=O-K}else"content"===c&&(H=S,O=H+K,M=O+x+I);"number"==typeof d?(N=d,G=N-J-L):"parent"===d?(b.$root.css("width",""),G=b.$root.width()-L):"content"===d&&(N=T+J+L,G=T),S>H&&(D=!0),T>G&&(E=!0);for(var X=null,Y=null,B=0,q=2;q>B;B++){var Z=!1,$=!1;X!==D&&D&&(Z=!0),Y!==E&&E&&($=!0),X=D,Y=E,Z&&(b.$scrollbary.css({width:"",overflow:""}),b.$scrollbarRightButton.css("right",""),b.state.scrollbaryWidth=scrollbaryWidth=b.$scrollbary.outerWidth(),"number"==typeof d||"parent"===d?G-=scrollbaryWidth:"content"===d&&(N+=scrollbaryWidth)),$&&(b.$scrollbarx.css({height:"",overflow:""}),b.$scrollbarDownButton.css("bottom",""),b.state.scrollbarxHeight=F=b.$scrollbarx.outerHeight(),"number"==typeof c?H-=F:(M+=F,O+=F)),S>H&&(D=!0),T>G&&(E=!0)}b.state.wrapperWidth=G,b.state.wrapperHeight=H,b.state.hasVerticalScrollbar=D,b.state.hasHorizontalScrollbar=E,D||(b.$scrollbary.css({width:"0px",overflow:"hidden"}),b.$scrollbarRightButton.css("right","0px")),E||(b.$scrollbarx.css({height:"0px",overflow:"hidden"}),b.$scrollbarDownButton.css("bottom","0px")),H>=S&&(b.state.renderFromRenderedIndex=0,b.state.scrollyEnd=!1),G>=T&&(b.state.renderFromColumnIndex=b.state.visibleColumnIndexArr[0]||0,b.state.scrollxEnd=!1),b.$root.css({width:N+(a.isNumeric(N)?"px":""),height:M+(a.isNumeric(M)?"px":"")}),b.$wrapper.css("height",O+(a.isNumeric(O)?"px":"")),b.state.scrollbaryTrackTop=parseInt(b.$scrollbarUpButton.position().top+b.$scrollbarUpButton.outerHeight()),b.state.scrollbaryTrackBottom=parseInt(b.$scrollbarDownButton.position().top),b.state.scrollbaryTrackLength=parseInt(b.state.scrollbaryTrackBottom-b.state.scrollbaryTrackTop),b.state.scrollbarxTrackLeft=parseInt(b.$scrollbarLeftButton.position().left+b.$scrollbarLeftButton.outerWidth()),b.state.scrollbarxTrackRight=parseInt(b.$scrollbarRightButton.position().left),b.state.scrollbarxTrackLength=parseInt(b.state.scrollbarxTrackRight-b.state.scrollbarxTrackLeft),b._refreshScrollbar(),b._setScrollInfo(),b._refreshBoard(!0)}}},tb.prototype.viewUpdate=function(){return this._viewUpdate()},tb.prototype.getGeometry=function(){var a=this,b={},c=a.$root.offset(),d=a.$root.position();return b.offsetTop=c.top,b.offsetLeft=c.left,b.positionTop=d.top,b.positionLeft=d.left,b.gridWidth=a.$root.width(),b.gridHeight=a.$root.height(),b.clientWidth=a.$wrapper.innerWidth()-a.$scrollbary.outerWidth(),b.clientHeight=a.$wrapper.innerHeight()-a.$scrollbarx.outerHeight(),b},tb.prototype._generateRenderTargetMapping=function(){var a=this,b=0,c=[],d=[],e=a.state.renderFromColumnIndex,f=!!a.state.scrollxEnd,g=0,h=0,i=0;if(a.option.useContinuousXScroll){var j=a._getColumnIndexByBlankWidth(a.state.translateX,!0);j&&(i=Math.ceil(j))}for(var k=0,l=a.option.columnMapping.length;l>k;k++){var m=a.option.columnMapping[k];if(m&&parseInt(m.columnIndex)>=0&&m.hidden!==!0&&(m.columnIndex<=a.state.fixupto?(b+=parseInt(m.width),m.excludeFitWidth&&(h+=parseInt(m.width)),c.push(m),d.push(m),m.columnIndex<e&&g++):m.columnIndex>=e&&(g?g--:(b+=parseInt(m.width),m.excludeFitWidth&&(h+=parseInt(m.width)),c.push(m))),b>a.state.wrapperWidth+i&&!f))break}var n=1,o={};b&&a.option.fitTableWidth&&b<a.state.wrapperWidth&&(n=(a.state.wrapperWidth-h)/(b-h));for(var p=0,k=0,l=c.length;l>k;k++){var m=c[k],q=parseInt(m.width);n>1&&!m.excludeFitWidth&&(q=Math.round(parseInt(m.width)*n)),o[m.id]=q,p+=q}if(n>1&&p!==a.state.wrapperWidth){var r=parseInt(a.state.wrapperWidth-p);r&&(o[c[c.length-1].id]+=r)}var s={};return s.renderTargetMapping=c,s.fixedRenderTargetMapping=d,s.renderTargetWidth=b,s.renderFitWidth=n>1?a.state.wrapperWidth:b,s.fitRatio=n,a.state.columnFitWidthById=s.columnWidthByIdMap=o,s},tb.prototype._refreshHeaderCells=function(b){var c=this,d=i(c.state.headerCellList),e=(c.state.visibleColumnMappingList,c.state.visibleColumnCount,c.state.visibleIndexMapByColumnIndex),g={};for(var h in c.state.columnHeaderStackMap)if(c.state.columnHeaderStackMap.hasOwnProperty(h)){var j=c.state.columnHeaderStackMap[h];a.isArray(j)?g[h]=[].concat(j):g[h]=j}c.state.fixupto;b=b===!0,b===!0&&delete c.state.refreshheadercell,c.state.refreshheadercell=c.state.refreshheadercell||{};var k=c.state.renderFromColumnIndex||0,l=c.state.refreshheadercell.prevRenderFrom,m=k,n=(c.state.wrapperWidth,c.state.scrollxEnd),o=0,p=[],q=[];if(c.option.header!==!1){var r=c.state.renderTargetMappingInfo;p=r.renderTargetMapping,q=r.fixedRenderTargetMapping,o=r.renderTargetWidth;var s=r.fitRatio,t=r.columnWidthByIdMap;m=(p[Math.max(p.length-1,0)]||{}).columnIndex,o<=c.state.wrapperWidth&&(n=!1),!b&&c.option.fitTableWidth&&s!==c.state.refreshheadercell.fitRatio&&(b=!0);var u=-(n?o-c.state.wrapperWidth:0);if(!n&&c.option.useContinuousXScroll){var v=c._getColumnIndexByBlankWidth(c.state.translateX,!0);v&&(u=-Math.min(o-c.state.wrapperWidth,v))}for(var w=[0],x={},y={},z=0,A=p.length;A>z;z++){var B=p[z];y[B.columnIndex]=!0;var C=w[w.length-1];x[B.columnIndex]=C;var F=C+t[B.id];w.push(F)}for(var G={},H=k;m>=H;H++)c.state.columnIndexToMapping[H]&&!y[H]&&(G[H]=!0);for(var C=0,w=[0],I={},z=0,A=p.length;A>z;z++){var B=p[z],J=w[w.length-1];I[B.columnIndex]=J,w.push(J+parseInt(B.width))}for(var K=c.state.columnHeaderDepth,L=0,M=p.length;M>L;L++)for(var B=p[L],N=g[B.columnIndex],O=0,P=N.length;P>O;O++){var Q=N[O];if(Q&&Q.colspan>1)if(Q.isGroup)for(var R=1,S=Q.groupMappingList.length;S>R;R++){var T=Q.groupMappingList[R].columnIndex;if(!(T<=B.columnIndex)){var X=g[T];X&&(X[O]?X[O]=null:0)}}else for(var Y=e[Q.columnIndex],Z=Y+parseInt(Q.colspan)-1,$=B.columnIndex+1,_=(c.state.visibleColumnMappingList[Z]||c.state.visibleColumnMappingList[c.state.visibleColumnMappingList.length-1]).columnIndex,aa=$,ba=_;ba>=aa;aa++){var X=g[aa];X&&(X[O]?X[O]=null:0)}}for(var H in g)y[H]||delete g[H];var ca={},da=c.state.visibleIndexMapByColumnIndex,ea=(da[k]-da[l],[]);d=i(c.state.headerCellList);for(var L=0,M=d.length;M>L;L++)ea.push(d[L]);for(var L=0,M=ea.length;M>L;L++){var fa=ea[L],ga=parseInt(fa.getAttribute("data-alopexgrid-columnindex")),O=parseInt(fa.getAttribute("data-alopexgrid-columndepth"));if(!(ga>=0&&O>=0)||ga>m||O>=K)c.$wrapper[0].removeChild(fa);else{var N=g[ga];N&&N[O]?ca[ga+","+O]=!0:c.$wrapper[0].removeChild(fa)}}for(var L=0,M=p.length;M>L;L++)for(var B=p[L],ga=B.columnIndex,N=g[B.columnIndex],O=0;K>O;O++){var Q=N[O];if(!ca[ga+","+O]&&Q){var fa=document.createElement("div");fa.className="cell headercell alopexgrid-cell",fa.setAttribute("data-alopexgrid-columnindex",ga),fa.setAttribute("data-alopexgrid-columndepth",O),c.$wrapper[0].appendChild(fa)}}ea=[],d=i(c.state.headerCellList);for(var L=0,M=d.length;M>L;L++)ea.push(d[L]);for(var ha=[],ia=[0],O=0;O<c.state.headerDepth;O++)ha[O]=(c.option.headerRowHeight?"number"==typeof c.option.headerRowHeight?c.option.headerRowHeight:c.option.headerRowHeight[O]:null)||c.state.headerRowHeight,ia.push(ia[ia.length-1]+ha[O]);c.option.filteringHeader&&(ha[K-1]=c.state.headerRowHeight,ia.push(ia[ia.length-1]+c.state.headerRowHeight));for(var L=0,M=ea.length;M>L;L++){var fa=ea[L],ga=parseInt(fa.getAttribute("data-alopexgrid-columnindex")),O=parseInt(fa.getAttribute("data-alopexgrid-columndepth")),N=g[ga],Q=N[O],B=Q.mapping;b&&(fa.className="cell headercell alopexgrid-cell");var ja=x[ga];u&&ga>c.state.fixupto&&(ja+=u);var ka=ia[O],la=t[c.state.columnIndexToMapping[ga].id],ma=ha[O];if(Q.rowspan>1){var na=O,oa=O+parseInt(Q.rowspan)-1;ma=0;for(var pa=na;oa>=pa;pa++)ma+=ha[pa];oa===K-1&&tb.renderUtil.addClass(fa,"cell-header-lastrow"),0===na&&tb.renderUtil.addClass(fa,"cell-header-firstrow")}else O===K-1&&tb.renderUtil.addClass(fa,"cell-header-lastrow"),0===O&&tb.renderUtil.addClass(fa,"cell-header-firstrow");if(Q.colspan>1&&Q.isGroup){la=0;for(var qa=Q.columnIndex;qa<=Q.toColumnIndex;qa++){var ra=c.state.columnIndexToMapping[qa];ra&&(la+=t[ra.id]||0),void 0!==c.state.visibleIndexMapByColumnIndex[qa]&&ga>qa&&ra&&(ja-=t[ra.id]||0)}}var sa=ja+"px",ta=ka+"px";fa.style.left!==sa&&(fa.style.left=sa),fa.style.top!==ta&&(fa.style.top=ta);var ua=la+"px",va=ma+"px",wa=ma-4+"px";if(fa.style.width!==ua&&(fa.style.width=ua),fa.style.height!==va&&(fa.style.height=va,fa.style.lineHeight=wa),!fa.isHeaderCellRendered||b){var xa="",ya=document.createDocumentFragment(),za=document.createElement("span"),Aa=!1,Ba=!1;if(fa.id=c.key+"-h-"+O+"-"+ga,fa.setAttribute("data-alopexgrid-root",c.key),Q.filter){var Ca=c.state.columnIndexToMapping[Q.columnIndex];if(Ca&&Ca.key){var Da=c._filterCellRender(Ca,!0);ya.appendChild(Da)}Ba=!0,xa+=" filtercell"}if(ga<=c.state.fixupto&&(xa+=" fixed cell-fixcol",ga===c.state.fixupto&&(xa+=" cell-fixcol-lastcolumn")),Q.isGroup?(xa+=" header-group",Q.rowspan>1&&(xa+=" header-group-rowspan"),Q.colspan>1&&(xa+=" header-group-colspan"),c.state.fixupto>=0&&B.fromIndex<=c.state.fixupto&&B.toIndex>=c.state.fixupto&&(xa+=" cell-fixcol-lastcolumn"),fa.setAttribute("data-alopexgrid-tocolumnindex",Q.toColumnIndex),fa.setAttribute("data-alopexgrid-groupcolumnindexes",Q.groupColumnIndexes.join(","))):(fa.removeAttribute("data-alopexgrid-tocolumnindex"),fa.removeAttribute("data-alopexgrid-groupcolumnindexes")),B){a(fa);if(B.headerStyleclass){var Ea=B.headerStyleclass;a.isFunction(Ea)&&(Ea=Ea.call(c,B)||""),"string"==typeof Ea&&(xa+=" "+Ea)}if(Q.isGroup&&B.styleclass){var Ea=B.styleclass;a.isFunction(Ea)&&(Ea=Ea.call(c,B)||""),"string"==typeof Ea&&(xa+=" "+Ea)}if(c.state.headerSelection){var Fa=Math.min(c.state.headerSelection.from,c.state.headerSelection.to),Ga=Math.max(c.state.headerSelection.from,c.state.headerSelection.to);B.columnIndex>=Fa&&B.columnIndex<=Ga&&(xa+=" header-selected")}if((B.columnIndex||B.fromIndex)+(Q.colspan||0)>=c.state.maxColumnIndex&&(xa+=" cell-lastcolumn"),B.selectorColumn&&"string"!=typeof B.title&&(c.state.rowSingleSelect||fa.setAttribute("onclick",ab+".run('"+c.key+"','_rowSelectAll',event,this);")),B.selectorColumn&&"string"!=typeof B.title){var Ha=document.createElement("input");Ha.type="checkbox",Ha.name=f(),Ha.className="selector-checkbox selector-column-input";var Ia=document.createElement("label");tb.renderUtil.addDefaultInputWrapperClass(Ia,"checkbox"),c.state.rowSingleSelect&&(Ha.disabled=!0),c.state.selectAll&&(Ha.checked=!0,Ia.className+=" checked"),Ia.appendChild(Ha),za.appendChild(Ia)}else if(B.columnFoldingColumn)za.className+=" header-columnfolding-icon alopexgrid-nonsorting-handle",B.columnFolded===!0&&(za.className+=" folded");else{var Ja=B.title;a.isFunction(Ja)&&(Ja=Ja.call(c,B)),tb.renderUtil.setElementContent(za,Ja)}B.selectorColumn&&(xa+=" selector-column",c.state.rowSingleSelect&&(xa+=" single-selector-column")),B.rowindexColumn&&(xa+=" rowindex-column"),B.numberingColumn&&(xa+=" numbering-column"),B.columnFoldingColumn&&(xa+=" columnfolding-column"),B.dragdropColumn&&(xa+=" dragdrop-column");var Ka=B.headerDragDrop,La=document.createDocumentFragment();if(Ka&&Ka===!0&&(Aa=!0,Ka)){var Ma=null;xa+=" headerdragdrop",Ma=U(c,B),La.appendChild(Ma)}var Na=B.sorting,Oa=D(B,"resizing"),Ma=null;if(Na||Oa){if(Aa=!0,Na&&B.key&&!B.selectorColumn&&(xa+=" sorting",c.option.disableHeaderClickSorting!==!0&&(xa+=" click-sortable"),c.option.hideSortingHandle!==!0)){Ma=V(c),ya.appendChild(Ma);var Pa=c._isColumnSorted(B);if(Pa){var Qa=Pa.sortingDirection||"asc";if(xa+=" "+Qa,c.state.sortingInfo.length>1){var Ra=document.createElement("span"),Sa=document.createTextNode(Pa.sortedOrder);Ra.className="multi-sorting-order",Ra.appendChild(Sa),Ma.appendChild(Ra)}}}if(Oa&&!Q.disableResizing)if(a.isArray(Oa))for(var Ta=c.state.columnWidthMap,Ua=0,Va=[],Wa=B.toIndex;Wa>=B.fromIndex;Wa--){var Ma=W(c,{columnIndex:Wa});Wa!==B.toIndex&&(Ma.style.right=Ua+"px"),Va.push(Wa),Ua+=Ta[Wa],a.inArray(Wa,Oa)>=0&&ya.appendChild(Ma)}else ya.appendChild(W(c,{columnIndex:ga}))}}for(;fa.firstChild;)fa.removeChild(fa.firstChild);if(Aa){var Xa=document.createElement("div");Xa.className="relative-wrap",Xa.appendChild(La),Ba||Xa.appendChild(za),Xa.appendChild(ya),fa.appendChild(Xa)}else Ba||fa.appendChild(za),fa.appendChild(ya);if(Ba?fa.removeAttribute("title"):(tb.renderUtil.addClass(za,"column-title"),c.option.disableHeaderTitleAttribute!==!0&&fa.setAttribute("title",za.textContent||za.innerText||"")),B&&B.treeColumnHeader&&c.option.tree&&c.option.tree.useTree){var Ya=document.createElement("span");Ya.className="alopexgrid-treecolumn-icon",c.state.treeHeaderExpandAllState&&(Ya.className+=" expanded"),c.state.treeInfo&&c.state.treeInfo.childCountByIdValueMap&&!a.isEmptyObject(c.state.treeInfo.childCountByIdValueMap)&&(Ya.className+=" expandable"),Aa?Xa.firstChild?Xa.insertBefore(Ya,Xa.firstChild):Xa.appendChild(Ya):fa.firstChild?fa.insertBefore(Ya,fa.firstChild):fa.appendChild(Ya)}if(B&&c.option.grouping&&c.option.grouping.useGrouping&&c.state.groupingLookupTable[B.key]&&(xa+=" headercell-grouping","number"==typeof B.groupFoldingHeader||B.groupFoldingHeader)){var Ya=document.createElement("span");Ya.className="alopexgrid-handle alopexgrid-groupfolding-icon alopexgrid-nonsorting-handle",c.state.headerGroupFoldingIconCollapsed&&c.state.headerGroupFoldingIconCollapsed[B.id]&&(Ya.className+=" group-collapsed"),Ya.setAttribute("data-alopexgrid-groupfolding-depth",B.groupFoldingHeader),Aa?Xa.firstChild?Xa.insertBefore(Ya,Xa.firstChild):Xa.appendChild(Ya):fa.firstChild?fa.insertBefore(Ya,fa.firstChild):fa.appendChild(Ya)}if(fa.className+=xa,fa.isHeaderCellRendered=!0,E(c,fa),fa.className.indexOf("filtercell")<0&&fa.className.indexOf("header-group")<0){var Za=a(fa).height()/2-a(Ma).height()/2;a(Ma).css("top",Za+"px")}}}if(c.state.refreshheadercell.prevRenderFrom=k,c.state.refreshheadercell.fitRatio=s,c.state.headerHeight=0,ha.length)for(var L=0,M=ha.length;M>L;L++)c.state.headerHeight+=ha[L];g=null}else{c.state.headerHeight=0;for(var ea=[],M=d.length||0,L=0;M>L;L++)ea.push(d[L]);M=ea.length;for(var L=0;M>L;L++){var fa=ea[L];fa.parentNode&&fa.parentNode.removeChild(fa)}}},tb.prototype._refreshFooterCells=function(b){var c=this;b=a.isPlainObject(b)?!0:!!b;var d=0,e=c.option.footerRowHeight||c.state.rowHeight,f=null,g=i(c.state.footerCellList);if(c._hasFooter()){var h=c.state.renderTargetMappingInfo,j=h.renderTargetMapping,k=(h.fixedRenderTargetMapping,h.renderTargetWidth),l=(h.fitRatio,h.columnWidthByIdMap),m=c.state.scrollxEnd,n=0;if(m&&k>c.state.wrapperWidth&&(n=k-c.state.wrapperWidth),!m&&c.option.useContinuousXScroll){var o=c._getColumnIndexByBlankWidth(c.state.translateX,!0);o&&(n=Math.min(k-c.state.wrapperWidth,o))}f=c.option.footer.position||"bottom";for(var p={},q=0,r=j.length;r>q;q++)p[j[q].columnIndex]=j[q];var s="top"===f?c.state.headerHeight:c.state.wrapperHeight-e,t=[];g=i(c.state.footerCellList);for(var q=0,r=g.length;r>q;q++)t.push(g[q]);for(var u={},q=0,r=t.length;r>q;q++){var v=t[q],w=v.getAttribute("data-alopexgrid-columnindex");void 0!==w&&null!==w&&p[w]?u[w]=!0:c.$wrapper[0].removeChild(v)}for(var x=[],y={},z=0,A={},q=0,r=j.length;r>q;q++){var B=j[q];if(!u[B.columnIndex]){var v=document.createElement("div");v.className="cell footercell alopexgrid-cell",v.setAttribute("data-alopexgrid-columnindex",B.columnIndex),v.style.width=l[B.id]+"px",v.style.height=e+"px",c.$wrapper[0].appendChild(v)}B.fixed&&(A[B.columnIndex]=!0);var C=0;x.length&&(C=x[x.length-1]+z),x.push(C),y[B.columnIndex]=C,z=l[B.id]}t=[],g=i(c.state.footerCellList);for(var q=0,r=g.length;r>q;q++)t.push(g[q]);for(var D={},q=0,r=c.option.footer.footerMapping.length;r>q;q++){var E=c.option.footer.footerMapping[q],F=E.columnIndex;if("string"==typeof E.columnIndex){var G=c._getColumnByKey(E.columnIndex);G&&(F=G.columnIndex)}else if("string"==typeof E.columnKey){var G=c._getColumnByKey(E.columnKey);G&&(F=G.columnIndex)}else if("string"==typeof E.columnId){var G=c._getColumnByKey(E.columnId);G&&(F=G.columnIndex)}D[F]=E}for(var q=0,r=t.length;r>q;q++){var v=t[q],w=parseInt(v.getAttribute("data-alopexgrid-columnindex"));if(b||!v.isFooterCellRendered){v.setAttribute("data-alopexgrid-root",c.key);var B=p[w];v.className="cell footercell alopexgrid-cell",v.className+="top"===f?" footercell-top":" footercell-bottom",B.fixed&&B.columnIndex<=c.state.fixupto&&(v.className+=" cell-fixcol",B.columnIndex===c.state.fixupto&&(v.className+=" cell-fixcol-lastcolumn")),v.setAttribute("data-alopexgrid-columnindex",B.columnIndex),v.style.width=l[B.id]+"px",v.style.height=e+"px";var E=D[w];if(E){if(E.align&&(v.className+=" align-"+E.align),E.styleclass){var H=E.styleclass;a.isFunction(H)&&(H=H(I,a.extend({},c.state.footerData),E)),H&&"string"==typeof H&&(v.className+=" "+H)}E.colspan||E.colspanTo;var I=c._footerValueByMapping(E);v.innerHTML=I}else v.innerHTML="";v.isFooterCellRendered=!0}var J=s,K=y[w]-(A[w]?0:n);"bottom"===f?(v.style.bottom=c.state.scrollbarxHeight+"px",v.style.top=""):(v.style.bottom="",v.style.top=J+"px"),v.style.left=K+"px"}d=e}else if(g=i(c.state.footerCellList),g&&g.length){for(var L=[],q=0,r=g.length;r>q;q++)L.push(g[q]);for(var q=0,r=L.length;r>q;q++)c.$wrapper[0].removeChild(L[q])}c.state.footerHeight=d||0,c.state.refreshfootercell={},c.state.refreshfootercell.upperHeight="top"===f?d:0,c.state.refreshfootercell.lowerHeight="bottom"===f?d:0},tb.prototype._generateCellAttribute=function(a,b,c){var d=this,e={styleclass:c?[]:["alopexgrid-cell"]},f=b.key,g=d.state;if(a){if(!c){if(e["data-alopexgrid-columnindex"]=b.columnIndex,e["data-alopexgrid-dataindex"]=null!=a._index.data?a._index.data:null,e["data-alopexgrid-dataid"]=a._index.id||null,e.styleclass.push(a._index.id),e.styleclass.push(a._index.row%2?"row-odd":"row-even"),a._state.selected&&e.styleclass.push("selected"),a._state.edited&&e.styleclass.push("edited"),a._state.focused&&e.styleclass.push("focused"),a._state.deleted&&e.styleclass.push("deleted"),a._state.editing&&e.styleclass.push("editing"),a._state.added&&e.styleclass.push("added"),d._isEditingCell(a,b.columnIndex)&&e.styleclass.push("editingcell"),a._state.groupHeader||a._state.groupFooter){if(e.styleclass.push("cell-groupmeta"),a._state.groupHeader){var h=d._getGroupingRangeByGroupId(a._state.groupHeader);if(e.styleclass.push("cell-groupheader"),e.styleclass.push("cell-groupheader-depth-"+h.groupDepth),e["data-alopexgrid-groupheader-depth"]=h.groupDepth,b.groupHeaderAlign&&e.styleclass.push("groupmeta-align-"+b.groupHeaderAlign),b.groupHeaderStyleclass){var i=b.groupHeaderStyleclass;i&&"string"==typeof i&&e.styleclass.push(i)}}else if(a._state.groupFooter){var h=d._getGroupingRangeByGroupId(a._state.groupFooter);if(e.styleclass.push("cell-groupfooter"),e.styleclass.push("cell-groupheader-depth-"+h.groupDepth),e["data-alopexgrid-groupheader-depth"]=h.groupDepth,b.groupFooterAlign&&e.styleclass.push("groupmeta-align-"+b.groupFooterAlign),b.groupFooterStyleclass){var i=b.groupFooterStyleclass;i&&"string"==typeof i&&e.styleclass.push(i)}}}else e["data-alopexgrid-groupheader-depth"]=null;if(d.option.rowOption){if(d.option.rowOption.styleclass){var j=d.option.rowOption.styleclass;"function"==typeof j&&(j=j.call(d,a,d.option.rowOption)),j&&"string"==typeof j&&e.styleclass.push(j)}if(d.option.rowOption.highlight){var j=d.option.rowOption.highlight;"function"==typeof j&&(j=j.call(d,a,d.option.rowOption)),j&&(e.styleclass.push("row-highlight"),"string"==typeof j&&e.styleclass.push(j))}d.option.rowOption.inlineStyle&&(e.style=e.style||{},tb.renderUtil.inlineStyleToStyleObject(d.option.rowOption.inlineStyle,e.style,[a],d))}if(d.state.pinnedDataIdMap&&d.state.pinnedDataIdMap[a._index.id]?(e.styleclass.push("pinnedcell","cell-fixrow","alopexgrid-cell-fixrow"),"string"==typeof d.state.lastPinnedDataId&&a._index.id===d.state.lastPinnedDataId&&e.styleclass.push("cell-fixrow-lastrow","alopexgrid-cell-lastfixrow")):a._index.row>=0&&a._index.row<d.option.rowFixCount&&(e.styleclass.push("cell-fixrow","alopexgrid-cell-fixrow"),a._index.row===d.option.rowFixCount-1&&e.styleclass.push("cell-fixrow-lastrow","alopexgrid-cell-lastfixrow")),b.align){var k="function"==typeof b.align?b.align.call(d,m,a,b)||"left":b.align;e.styleclass.push("align-"+k)}d.option.ellipsisText===!0&&e.styleclass.push("cell-ellipsis-text"),g.cellSelection&&(g.cellSelection.focusColumnIndex===b.columnIndex&&g.cellSelection.focusRenderedIndex===a._index.row?e.styleclass.push("cell-selected-focus"):g.cellSelection.focusRowspanInfo&&g.cellSelection.focusRowspanInfo.from<=a._index.row&&g.cellSelection.focusRowspanInfo.to>=a._index.row&&g.cellSelection.focusColumnIndex===b.columnIndex&&e.styleclass.push("cell-selected-focus"),g.cellSelection.columnIndexMap[b.columnIndex]&&g.cellSelection.renderedIndexMap[a._index.row]&&(e.styleclass.push("cell-selected"),g.cellSelection.leftBoundaryColumnIndex===b.columnIndex&&e.styleclass.push("cell-selected-leftline"),g.cellSelection.rightBoundaryColumnIndex===b.columnIndex&&e.styleclass.push("cell-selected-rightline"),g.cellSelection.topBoundaryRenderedIndex===a._index.row&&e.styleclass.push("cell-selected-topline"),g.cellSelection.bottomBoundaryRenderedIndex===a._index.row&&e.styleclass.push("cell-selected-bottomline")))}if(e["data-alopexgrid-key"]=b.key||null,d._isCellEditable(a,b)?e.styleclass.push("cell-ui-editable"):e.styleclass.push("cell-ui-noneditable"),b.render||b.editable){var l=d._extractRenderObject(a,b);l&&"object"==typeof l&&l.type&&e.styleclass.push("cell-type-"+l.type)}if(!d.option.disableCellTitle&&b.key&&a&&b.tooltip){var m=a[b.key],n=m;"function"==typeof b.tooltip?n=b.tooltip(m,a,b)||"":"string"==typeof b.tooltip?n=b.tooltip:(b.render||b.editable)&&l&&(n=tb.renderUtil.getTextFromRenderRuleArray(m,a,l,b,d)),null!=n&&(e.title=n)}else e.title=null;if(b.styleclass){var i=b.styleclass;"function"==typeof i&&(i=i.call(d,a[f],a,b)),i&&"string"==typeof i&&e.styleclass.push(i)}if(b.highlight){var i=b.highlight;"function"==typeof i&&(i=i.call(d,a[f],a,b)),i&&(e.styleclass.push("cell-highlight","alopexgrid-cell-highlight"),"string"==typeof i&&e.styleclass.push(i))}b.inlineStyle&&(e.style=e.style||{},tb.renderUtil.inlineStyleToStyleObject(b.inlineStyle,e.style,[a[f],a,b],d))}else e.styleclass.push("emptycell"),e.title=null;if(b&&!c){var o=d.state.visibleColumnMappingList[0],p=d.state.visibleColumnMappingList[d.state.visibleColumnMappingList.length-1];o&&o.columnIndex===b.columnIndex&&e.styleclass.push("cell-firstcolumn"),p&&p.columnIndex===b.columnIndex&&e.styleclass.push("cell-lastcolumn"),b.multi&&e.styleclass.push("cell-multi-column"),b.columnIndex<=d.state.fixupto&&(e.styleclass.push("cell-fixcol","alopexgrid-cell-fixedcolumn"),b.columnIndex===d.state.fixupto&&e.styleclass.push("cell-fixcol-lastcolumn","alopexgrid-cell-lastfixedcolumn")),d.option.grouping&&d.option.grouping.by.length>0&&d.state.groupKeyOrderMap[b.key]>=0&&e.styleclass.push("cell-grouping"),b.selectorColumn&&(e.styleclass.push("selector-column"),d.state.rowSingleSelect&&e.styleclass.push("single-selector-column")),b.rowindexColumn&&e.styleclass.push("rowindex-column"),b.numberingColumn&&e.styleclass.push("numbering-column"),b.dragdropColumn&&(e.styleclass.push("dragdrop-column"),e.styleclass.push("cell-unselectable"))}return e.styleclass=e.styleclass.join(" "),e},tb.prototype._extractRenderObject=function(a,b){var c=b.columnIndex,d=a&&b?b.editable&&a._state.editing&&a._state.editing.hasOwnProperty(b.columnIndex):!1,e=(a?d?a._state.editing[c]:a[b.key]:void 0,null);return d?(e=b.editable,e===!0&&(e={type:"text"})):(e=b.render,"editable"===b.render&&b.editable&&(e=b.editable,e===!0&&(e={type:"text"}))),e},tb.prototype._postCellRender=function(b,c,d){var e=this,f=d.columnIndex,g=c&&d?d.editable&&c._state.editing&&c._state.editing.hasOwnProperty(d.columnIndex):!1,h=c?g?c._state.editing[f]:c[d.key]:void 0,i=e._extractRenderObject(c,d);a.isPlainObject(i)&&(e.option.renderMapping[i.type]&&"function"==typeof e.option.renderMapping[i.type].postRender&&e.option.renderMapping[i.type].postRender.call(e,b,h,c,i,d,e),"function"==typeof i.postRender&&i.postRender.call(e,b,h,c,i,d,e)),e._triggerGridEvent("cellRendered",{data:c,mapping:d,value:h,editing:g,render:i},b)},tb.prototype._getMultiParentColumnIndex=function(a){var b=a&&"object"==typeof a?a.columnIndex:a;return"string"==typeof b&&b.indexOf("m")>=0&&(b=parseInt(b.split("m")[0])),b},tb.prototype._getMultiParentMapping=function(a){return"string"==typeof a.columnIndex&&a.columnIndex.indexOf("m")>=0&&(a=this.state.columnIndexToMapping[parseInt(a.columnIndex.split("m")[0])]),a},tb.prototype._iterateMultiMapping=function(b,c,d){var e=this;if(c.multi){var f=c.multi;if(a.isFunction(f)&&(f=f.call(e,b[c.key],b,c),!a.isArray(f)))return;for(var g=0,h=f.length;h>g;g++){var i=null;if(f[g].columnIndex=c.columnIndex+"m"+g,i=d.call(e,g,f[g],f),i===!1)return!1}}},tb.prototype._renderDataByMapping=function(b,c){var d=this;if(c.multi){var e=document.createDocumentFragment();return d._iterateMultiMapping(b,c,function(a,c,f){var g=document.createElement("div");g.className="multicell",0===a?g.className+=" multicell-firstrow":a===f.length-1&&(g.className+=" multicell-lastrow"),g.setAttribute("data-alopexgrid-multi",a),g.style.height=100/f.length+"%",tb.renderUtil.setElementContent(g,d._renderDataByMapping(b,c)),d._setCellAttribute(d._generateCellAttribute(b,c,!0),g),e.appendChild(g)}),e}var f=c.editable&&b._state.editing&&b._state.editing.hasOwnProperty(c.columnIndex),g=g=f?b._state.editing[c.columnIndex]:c.key?b[c.key]:"",h=d._extractRenderObject(b,c),i=g;if(a.isFunction(h)){var j=h.call(d,g,b,h,c,d);if(!j||"object"!=typeof j||j.nodeType||!j.type)return null==j?"":j;h=j}if(a.isPlainObject(h)&&d.option.renderMapping[h.type]){var k=d.option.renderMapping[h.type],l=null;!f&&d.option.readonlyRender&&(l=h.readonly,h.readonly=!0);var m=k.renderer.call(d,g,b,h,c,d);null!==l&&(h.readonly=l),i=m}else null==g&&(g=""),i=d.option.disableValueEscape?g:document.createTextNode(g);return null==i?"":i},tb.prototype._extractEditingValueFromCell=function(b,c,d){var e=this,f=d.editable;f===!0&&(f={type:"text"});var g=null;if(a.isPlainObject(f)&&e.option.renderMapping[f.type]&&(g=e.option.renderMapping[f.type].editedValue),"function"==typeof d.editedValue&&(g=d.editedValue),g)return g.call(e,b[0],c,f,d,e);var h=b.find("input,select,textarea");return h.length?h.val():b.text()},tb.prototype._startupUpdateEditingData=function(a){for(var b=this,c=0,d=b.option.columnMapping.length;d>c;c++){var e=b.option.columnMapping[c];e&&e.editable&&b._isEditingCell(a,e)&&b._updateEditingCellWithoutElement(a,e)}},tb.prototype._updateEditingCellWithoutElement=function(b,c){var d=this;if(c=d._getMultiParentMapping(c)){var e=d._isEditingCell(b,c.columnIndex);if(e===!0){var f=a(d._createCell(b,c));d._updateEditingCell(f),f.remove()}}},tb.prototype._updateEditingForDataMapping=function(a,b,c){var d=this,e=!1,f=c.columnIndex;if(d._isCellEditable(b,c)&&b._state.editing.hasOwnProperty(f)){var g=d._extractEditingValueFromCell(a,b,c),h=b._state.editing[f];if(e=h!==g,b._state.editing[f]=g,d.option.mergeEditingImmediately){var i={};i[c.key]=g,d._dataEdit(b,i)}if(d.state.groupRowspanned&&d.option.rowspanGroupEdit&&c.rowspan){var j=d._getGroupingRangeByMapping(b._index.data,c);if(j)for(var k=j.from;k<=j.to;k++)k!==b._index.data&&(d.state.data[k]._state.editing[f]=g,d.option.mergeEditingImmediately&&d._dataEdit(d.state.data[k],i))}}return e},tb.prototype._refreshByFromChangedCell=function(b,c,d,e){var f=this;if(f.state.hasMappingRefreshBy)for(var g=f.option.refreshByOnHiddenColumn?f.option.columnMapping:f.state.visibleColumnMappingList,h=0,i=g?g.length:-1;i>h;h++){var j=g[h];if(j&&j.hasOwnProperty("refreshBy")&&j.columnIndex!==c.columnIndex&&(!j.id||j.id!==c.id)){var k=!1;if("string"!=typeof j.refreshBy||c.key!==j.refreshBy&&c.id!==j.refreshBy){if("number"==typeof j.refreshBy&&c.columnIndex===j.refreshBy)k=!0;else if(a.isArray(j.refreshBy)&&(a.inArray(c.key,j.refreshBy)>=0||a.inArray(c.columnIndex,j.refreshBy)>=0))k=!0;else if(j.refreshBy===!0)k=!0;else if("function"==typeof j.refreshBy){var l=j.refreshBy.call(f,d,e,c.key,b,c);l===!0&&(k=!0)}}else k=!0;k&&(f._refreshCell(b,j),f._updateEditingCellWithoutElement(b,j))}}},tb.prototype._updateEditingCell=function(b){var c=this;if(!b.nodeType)return void b.each(function(){c._updateEditingCell(this)});b=a(b),b[0].getAttribute("data-alopexgrid-multi")&&(b=b.closest(".alopexgrid-cell"));var d=b.attr("data-alopexgrid-dataid"),e=c._dataGetByIndex({id:d}),f=parseInt(b.attr("data-alopexgrid-columnindex")),g=(parseInt(b.attr("data-alopexgrid-rowindex")),c._columnIndexKeyToMappingList(f)[0]),h=!1,i=tb.currentValue(e,g.key),j=null;if(g.multi){var k=b.children(".multicell"),i={},j={},l=[];c._iterateMultiMapping(e,g,function(a,b){l.push(b),i[b.key]=tb.currentValue(e,b.key);var d=c._updateEditingForDataMapping(k.eq(a),e,b);d===!0&&(h=!0),j[b.key]=tb.currentValue(e,b.key)})}else h=c._updateEditingForDataMapping(b,e,g),j=tb.currentValue(e,g.key);return h&&(c.state.hasMappingRefreshBy&&c._refreshByFromChangedCell(e,g,i,j),c._triggerGridEvent("cellValueEditing",{data:e,mapping:g,value:j,prevValue:i},b)),h},tb.prototype._renderGroupSummaryValue=function(a,b){var c=this,d=null,e=null;return a._state.groupHeader&&(d=c._getGroupingRangeByGroupId(a._state.groupHeader),e=b.groupHeader||null),a._state.groupFooter&&(d=c._getGroupingRangeByGroupId(a._state.groupFooter),e=b.groupFooter||null),d&&e?c._groupSummaryValue(d,e,a,b):void 0},tb.prototype._groupSummaryValue=function(b,c,d,e){var f=this;if(!c)return null;if(a.isArray(c)||(c=[c]),!c.length)return null;for(var g=document.createDocumentFragment(),h=0,i=c.length;i>h;h++){var j=c[h],k="",l=!1;if("string"==typeof j){var m=(j.match(/((^\w+)[(].*[)])/i)||[null]).pop(),n=(j.match(/[^(]*\(([^)]*)\)/)||["",null])[1],o=n?n.split(/\W+/):null;if("groupValue"===m)if(o&&o.length){var p=parseInt(o[0])||0;k=b.member[0][f.option.grouping.by[p]]}else k=b.value;else if("getValue"===m&&o)k=d[o[0]];else if("groupFoldingIcon"===m){var q=f._isGroupRangeCollapsed(b),r=q?" group-collapsed":"";k='<span class="alopexgrid-handle alopexgrid-groupfolding-icon'+r+'"',k+=' data-alopexgrid-rangeid="'+b.id+'"',k+="></span>",l=!0}else if(tb.aggregateFunction[m]){for(var s=[],t=0,u=b.member.length;u>t;t++)null!=b.member[t]._index.target&&s.push(b.member[t]);var v=tb.aggregateFunction.primitive(s,(o?o[0]:null)||e.key);k=tb.aggregateFunction[m](v)}else k=j,l=!0}else"number"==typeof j?k=tb.renderUtil.addCommas(j):"function"==typeof j&&(k=j.call(f,b,e),null==k&&(k=""),l=!0);if(l){var w=document.createElement("span");w.className="groupsummary-value",w.innerHTML=k,g.appendChild(w)}else{var x=document.createTextNode(String(k)||"");g.appendChild(x)}}return g},tb.prototype._setCellAttribute=function(b,c){for(var d in b)if("styleclass"===d)c.className+=(c.className?" ":"")+b[d];else if("style"===d){var e=b[d];if("string"==typeof e){var f=e.split(";");e={};for(var g=0,h=f.length;h>g;g++){var i=f[g].split(":");e[a.trim(i[0])]=a.trim(i[1])}}for(var j in e){var k=e[j];null!=k?c.style[j]=k:c.style[j]=""}}else null===b[d]?c.removeAttribute(d):c.setAttribute(d,b[d])},tb.prototype._setCellContent=function(b,c){
tb.renderUtil.setElementContent(c,b),E(this,c),"/text"===c.title&&(c.title=a.text(c))},tb.prototype._generateCellContent=function(a,b,c){var d=this,e=d.state,g=d.option,h="";if(!a)return h;if(a._state.groupHeader||a._state.groupFooter)h=d._renderGroupSummaryValue(a,b);else if(b.selectorColumn){var i=!!a._state.selected,j=!1;e.testRowAllowSelect&&g.rowOption.allowSelect(a)===!1&&(i=!1,j=!0);var k=null;if(c&&c.firstChild&&c.firstChild.tagName){var l=c;"DIV"===c.firstChild.tagName&&tb.renderUtil.hasClass(l.firstChild,"cell-content")&&(l=c.firstChild),l.firstChild&&"LABEL"===l.firstChild.tagName&&tb.renderUtil.hasDefaultInputWrapperClass(l.firstChild)&&(k=l.firstChild)}if(k&&k.firstChild&&"INPUT"===k.firstChild.tagName&&(tb.renderUtil.hasClass(k.firstChild,"selector-checkbox")&&(!d.state.rowSingleSelect||!d.option.singleSelectorColumnWithRadio)||tb.renderUtil.hasClass(k.firstChild,"selector-radio")&&d.state.rowSingleSelect&&d.option.singleSelectorColumnWithRadio))h=!1,i?tb.renderUtil.addClass(k,"checked"):tb.renderUtil.removeClass(k,"checked"),k.firstChild.checked=i,k.firstChild.disabled=j;else{var m='type="checkbox" class="selector-checkbox selector-column-input"';d.state.rowSingleSelect&&d.option.singleSelectorColumnWithRadio&&(m='type="radio" class="selector-radio selector-column-input"');var n="<input "+m+' name="'+f()+'" '+(i?'checked="checked"':"")+(j?' disabled="disabled"':"")+">";h=document.createElement("label"),d.state.rowSingleSelect&&d.option.singleSelectorColumnWithRadio?(tb.renderUtil.addDefaultInputWrapperClass(h,"radio"),tb.renderUtil.addClass(h,"alopexgrid-selectorcolumn-radio-wrapper")):(tb.renderUtil.addDefaultInputWrapperClass(h,"checkbox"),tb.renderUtil.addClass(h,"alopexgrid-selectorcolumn-checkbox-wrapper")),i&&(h.className+=" checked"),h.innerHTML=n}}else if(b.rowindexColumn){var o=a._index.row;d.option.rowindexColumnFromZero||(o+=1),h=o}else if(b.dragdropColumn){var p=' onmousedown="'+ab+".run('"+d.key+"', '_rowDragStart',event);\"";h='<div class="row-dragdrop-handle alopexgrid-handle" '+p+"></div>"}else if(b.numberingColumn){var q,r=d.pageInfo(),s=d.option.numberingColumnFromZero?0:1;d.state.dynamicBinding&&(s+=r.perPage>0&&r.current>0?Math.max(0,r.perPage*(r.current-1)):0),q=a._index.data+s,h='<div class="numbering-column-wrapper" style="text-align:center;">'+q+"</div>"}else h=d._renderDataByMapping(a,b);if(d.option.tree&&d.option.tree.useTree&&b.treeColumn){for(var t=document.createDocumentFragment(),u=a._state.treeNodeDepth,v=parseInt(d.option.tree.depthStartValue),w=u;w>v;v++){var x=document.createElement("span");x.className="alopexgrid-treecolumn-indent",t.appendChild(x)}var y=document.createElement("span");y.className="alopexgrid-treecolumn-icon",a._state.expandedTreeNode&&(y.className+=" expanded"),a._state.treeNodeLeaf?y.className+=" leaf":y.className+=" expandable",t.appendChild(y);var z=h===!1?c:document.createElement("div");for(h!==!1&&tb.renderUtil.setElementContent(z,h);z.firstChild;)t.appendChild(z.firstChild);h=t}if(a&&a._index&&a._index.id&&(b.rowResizing||b.rowindexColumn)){var t=document.createDocumentFragment(),A=document.createElement("div");A.className="rowindex-column-resizing-handle resizing-handle alopexgrid-handle",A.setAttribute("onmousedown",ab+".run('"+d.key+"', '_rowResizeStart',event,"+a._index.row+","+b.columnIndex+");"),A.setAttribute("ondblclick",ab+".run('"+d.key+"', 'setRowHeight',{_index:{row:"+a._index.row+"}},'content');");var z=h===!1?c:document.createElement("div");for(h!==!1&&tb.renderUtil.setElementContent(z,h);z.firstChild;)t.appendChild(z.firstChild);t.appendChild(A),h=t}if(d.option.wrapCellContent&&h!==!1){var B=document.createElement("div");return B.className=d.option.wrapCellContentClassName,d._setCellContent(h,B),B}return h},tb.prototype._createCell=function(a,b,c){var d=this,e=null;e=c?c:document.createElement("div"),e.className="cell bodycell",b=d._getMultiParentMapping(b);var f=(c?c.getAttribute("data-alopexgrid-rowindex"):null,d._generateCellAttribute(a,b));d._setCellAttribute(f,e);var g=d._generateCellContent(a,b);return g!==!1&&d._setCellContent(g,e),e.isCellAttributeGenerated=!0,e.isCellContentGenerated=!0,d._postCellRender(e,a,b),e},tb.prototype._refreshBodyCells=function(b){var c=this,d=i(c.state.bodyCellList),e={dataIndexList:null,columnIndexList:null,dataIndexMap:{},columnIndexMap:{}};if(b&&a.isPlainObject(b)){if(e.dataIndexList=b.dataIndexList,e.dataIndexList)for(var f=0,g=e.dataIndexList.length;g>f;f++)e.dataIndexMap[e.dataIndexList[f]]=!0;if(e.columnIndexList=b.columnIndexList,e.columnIndexList)for(var f=0,g=e.columnIndexList.length;g>f;f++)e.columnIndexMap[e.columnIndexList[f]]=!0;b=!1}if(b===!0&&c.state.refreshbodycell){for(var h in c.state.refreshbodycell)delete c.state.refreshbodycell[h];delete c.state.refreshbodycell}c.state.refreshbodycell=c.state.refreshbodycell||{},c.state.bodyHeight=0;var j=(c.state.headerHeight||0)+c.state.refreshfootercell.upperHeight,k=c.state.wrapperHeight-c.state.refreshfootercell.lowerHeight,l=0,m=c.state.wrapperWidth,n=c.state.scrollxEnd,o=c.state.scrollyEnd,p=l,q=j,r=c.state.renderFromColumnIndex||0,s=c.state.renderFromRenderedIndex||0,t=c.state.refreshbodycell.prevColumnIndex,u=c.state.refreshbodycell.prevRenderedIndex;c.state.refreshbodycell.prevRowFixCount!==c.option.rowFixCount&&(b=!0);var v=1,w=0,x=0;c.state.fixupto>=0&&(p+=c.state.fixedColumnWidth);var y=[],z=c._hasPinnedData();if(z)for(var f=0,g=c.state.pinnedDataIdList.length;g>f;f++){var A=c.state.pinnedDataIdList[f],B=c.state.data[c.state.dataIdToIndexMap[A]];B&&null!=B._index.row&&(q+=c.state.rowHeightMapByDataId[A]||c.state.rowHeight,y.push(B))}else if(c.option.rowFixCount>0)for(var f=0,g=c.option.rowFixCount;g>f;f++){var B=c.state.renderTargetDataList[f];B&&(y[f]=B,q+=c.state.rowHeightMapByDataId[B._index.id]||c.state.rowHeight)}z&&y.length?c.state.lastPinnedDataId=y[y.length-1]._index.id:c.state.lastPinnedDataId=null;for(var C=[],f=0,g=d.length;g>f;f++)C.push(d[f]);var D=0,E=[],F=[],G=c.state.renderTargetMappingInfo;E=G.renderTargetMapping,F=G.fixedRenderTargetMapping,D=G.renderTargetWidth,v=G.fitRatio;var H=G.columnWidthByIdMap,I=G.renderFitWidth;w=(E[Math.max(E.length-1,0)]||{}).columnIndex;for(var J={},f=0,g=E.length;g>f;f++)J[E[f].columnIndex]=f;for(var K=0,L=[],M=[],N=k-j,O=[],P=c.option.useContinuousYScroll?c.__getRenderedIndexByBlankHeight(c.state.translateY,!0):0,Q=c.option.useContinuousXScroll?c._getColumnIndexByBlankWidth(c.state.translateX,!0):0,R=0,f=s,g=c.state.renderTargetDataList.length;g>f;f++,R++){var B=R<y.length?y[R]:c.state.renderTargetDataList[f],S=(B?c.state.rowHeightMapByDataId[B._index.id]:null)||c.state.rowHeight;if(K+=S,L.push(B),M.push(f),R<y.length&&O.push(B),K>N+P&&!o)break}var T=O[O.length-1]||null;if(x=s+L.length-1,N+P>K&&c.option.rowPadding){var U=c.option.rowPadding;U===!0&&c.option.paging&&(U=c.option.paging.perPage);for(var f=x+1;U>f&&(L.push(null),K+=c.state.rowHeight,!(K>N+P));f++);}c.state.renderToRenderedIndex=x,c.state.renderToColumnIndex=w,!b&&c.option.fitTableWidth&&v!==c.state.refreshbodycell.fitRatio&&(b=!0);for(var V={},W={},X=s-u,Y=c.state.visibleIndexMapByColumnIndex,Z=Y[r]-Y[t],f=0,g=C.length;g>f;f++){var $=C[f],_=$["data-localbody-x"],aa=$["data-localbody-y"],ba=parseInt($.getAttribute("data-alopexgrid-columnindex"));if(_<F.length){var ca=F[_];if(ba>=0&&ca.columnIndex!==ba){c.$wrapper[0].removeChild($);continue}}else if(Z){if(_-=Z,_<F.length){c.$wrapper[0].removeChild($);continue}$["data-localbody-x"]=_}if(aa<O.length);else if(X){if(aa-=X,aa<O.length){c.$wrapper[0].removeChild($);continue}$["data-localbody-y"]=aa}_>=E.length||aa>=L.length?c.$wrapper[0].removeChild($):null===_||null===aa||0>_||0>aa?c.$wrapper[0].removeChild($):V[_+","+aa]=!0}for(var da=i(c.state.nodataCellList);da.length;)c.$wrapper[0].removeChild(da[0]),da=i(c.state.nodataCellList);if((!c.state.data||!c.state.data.length)&&c.option.message&&c.option.message.nodata){var ea=document.createElement("div");ea.setAttribute("data-alopexgrid-root",c.key),ea.className="cell emptycell nodata nodatacell",ea.style.top=j+"px",ea.style.left=l+"px",ea.style.width=Math.max(0,Math.min(I,m-l))+"px",ea.style.height=c.state.rowHeight+"px";var fa=document.createElement("span");fa.className="emptycell-message",fa.innerHTML=c.option.message.nodata,ea.appendChild(fa),c.$wrapper[0].appendChild(ea);for(var ga=0,ia=E.length;ia>ga;ga++)W[ga+",0"]=!0;L.length||L.push(null)}for(var ja=[l],ka=[j],la=0,ga=0,ia=E.length;ia>ga;ga++){var ma=E[ga];ja.push(ja[ja.length-1]+H[ma.id]);for(var na=0,oa=0,pa=L.length;pa>oa;oa++){if(0==ga){var B=L[oa],S=(B&&B._index?c.state.rowHeightMapByDataId[B._index.id]:0)||c.state.rowHeight;na+=S,ka[oa+1]=ka[oa]+parseInt(S)}if(!V[ga+","+oa]){var ea=document.createElement("div");ea.className="cell bodycell",ea["data-localbody-x"]=ga,ea["data-localbody-y"]=oa,c.$wrapper[0].appendChild(ea)}}la=Math.max(la,na)}C=[],d=i(c.state.bodyCellList);for(var f=0,g=d.length;g>f;f++)C.push(d[f]);for(var qa=[],f=0,g=E.length;g>f;f++)qa.push([]);var ra=(K||0)+(c.state.headerHeight||0)+(c.state.footerHeight||0),sa=-(n?D-c.state.wrapperWidth:0),ta=-(o?ra-c.state.wrapperHeight:0);!o&&c.option.useContinuousYScroll&&P&&(ta=-Math.min(ra-c.state.wrapperHeight,P)),!n&&c.option.useContinuousXScroll&&Q&&(sa=-Math.min(D-c.state.wrapperWidth,Q));for(var f=0,g=ka.length;g>f;f++)ta&&f>=y.length&&(ka[f]+=ta);for(var f=0,g=ja.length;g>f;f++){var ma=E[f];ma&&sa&&ma.columnIndex>c.state.fixupto&&(ja[f]+=sa)}for(var f=0,g=C.length;g>f;f++){var $=C[f],_=parseInt($["data-localbody-x"]),aa=parseInt($["data-localbody-y"]),B=L[aa],ma=E[_],ua=M[aa],va=L[aa-1],wa=L[aa+1],xa=!!(b||B&&e.dataIndexMap[B._index.data]&&!e.columnIndexList||B&&e.dataIndexMap[B._index.data]&&e.columnIndexMap[ma.columnIndex]);if(qa[_][aa]=$,B&&ma?($.id=c._cellIdFromRowIndex(ua,ma.columnIndex),$.setAttribute("data-alopexgrid-rowindex",ua)):$.removeAttribute("id"),xa===!0&&($.className="cell bodycell",$.setAttribute("data-alopexgrid-root",c.key)),W[_+","+aa])c.$wrapper[0].removeChild($);else{var ya=c.state.hasLeftColspanMapByColumnIndex[ma.columnIndex],za=0;if(!$.cellWidthProcessed||xa||Z||isNaN(Z)||ya){var Aa=ma.columnIndex,Ba=H[ma.id];if(B){var Ca=c.state.fixupto>=0&&ma.columnIndex===c.state.fixupto,Da=0;if(ya)for(var Ea=Aa;Ea>=0;){var Ga=c.state.columnIndexToMapping[Ea--];if(Ga&&ha(Ga)&&(Ga.colspan||Ga.colspanTo)){var Ha=Fa(c,B,Ga);if(Ha>=Aa){Ba=H[Ga.id]||0,Ga.columnIndex<Aa&&(za-=Ba),Ha===c.state.fixupto&&(Ca=!0);for(var Ia=Ga.columnIndex+1;Ha>=Ia;Ia++){var Ja=c.state.columnIndexToMapping[Ia];if(Ja&&ha(Ja)){Ba+=H[Ja.id]||0,Da++,Aa>Ia&&(za-=H[Ja.id]||0);var Ka=J[Ia];void 0!==Ka&&Ia>Aa&&(W[Ka+","+aa]=!0)}}ma=Ga;break}}}Da&&tb.renderUtil.addClass($,"cell-colspan-column"),Ca&&tb.renderUtil.addClass($,"cell-fixcol-lastcolumn")}$.style.width!==Ba+"px"&&($.style.width=Ba+"px"),$.cellWidthProcessed=!0}if(!$.cellHeightProcessed||xa||X||isNaN(X)){var S=(B&&B._index?c.state.rowHeightMapByDataId[B._index.id]:0)||c.state.rowHeight;if(B){var La=B===T,Ma=0,Na=!1;if(ma.rowspan&&c.option.grouping&&c.option.grouping.useGroupRowspan){var Oa=c._getGroupingRangeByMapping(B._index.data,ma);if(Oa){Ma++;var Pa=va?c._getGroupingRangeByMapping(va._index.data,ma):null,Qa=aa<O.length;if(Pa&&Oa.id===Pa.id?O.length===aa&&(Na=!0):Na=!0,Na)for(var Ra=aa+1,Sa=L.length;Sa>Ra;Ra++){if(Qa&&O.length===Ra){La=!0;break}var Ta=L[Ra];if(!Ta||"object"!=typeof Ta)break;var Ua=c._getGroupingRangeByMapping(Ta._index.data,ma);if(!Ua)break;if(Oa.id!==Ua.id)break;S+=c.state.rowHeightMapByDataId[Ta._index.id]||c.state.rowHeight,Ma++}}if(Ma){if(!Na){W[_+","+aa]=!0,c.$wrapper[0].removeChild($);continue}tb.renderUtil.addClass($,"cell-rowspan-column");for(var Va=!1,Wa=!1,Xa=Oa.member,Ya=0,Za=Xa.length;Za>Ya;Ya++)Xa[Ya]._state.selected&&(Va=!0),Xa[Ya]._state.focused&&(Wa=!0);Va&&(tb.renderUtil.addClass($,"cell-rowspan-contain-selected"),tb.renderUtil.addClass($,"selected")),Wa&&(tb.renderUtil.addClass($,"cell-rowspan-contain-focused"),tb.renderUtil.addClass($,"focused"))}}La&&tb.renderUtil.addClass($,"cell-fixrow-lastrow")}$.style.height=S+"px",$.cellHeightProcessed=!0}var ga=ja[_],$a=ga+za+"px";$.style.left!==$a&&($.style.left=$a);var oa=ka[aa],_a=oa+"px";if($.style.top!==_a&&($.style.top=_a),!$.isCellAttributeGenerated||xa===!0){var ab=c._generateCellAttribute(B,ma);c._setCellAttribute(ab,$),$.isCellAttributeGenerated=!0}if(!$.isCellContentGenerated||xa===!0){var bb=c._generateCellContent(B,ma,$);bb!==!1&&c._setCellContent(bb,$),c._postCellRender($,B,ma),$.isCellContentGenerated=!0}va&&(va._state.selected===!0?tb.renderUtil.addClass($,"prevrow-selected"):tb.renderUtil.removeClass($,"prevrow-selected")),wa&&(wa._state.selected===!0?tb.renderUtil.addClass($,"nextrow-selected"):tb.renderUtil.removeClass($,"nextrow-selected"))}}for(var h in W)if(h){var _=h.split(",")[0],aa=h.split(",")[1];if(qa[_]&&qa[_][aa]){var $=qa[_][aa];$.parentNode&&$.parentNode.removeChild($)}}for(var cb={},f=L.length-1;f>=0;f--)null!==L[f]?cb[L[f]._index.id]=L[f]:L.splice(f,1);c.state.refreshbodycell.prevColumnIndex=c.state.renderFromColumnIndex,c.state.refreshbodycell.prevRenderedIndex=c.state.renderFromRenderedIndex,c.state.refreshbodycell.renderedDataList=L,c.state.refreshbodycell.renderedDataIdMap=cb,c.state.refreshbodycell.renderedColumnMappingList=E,c.state.refreshbodycell.renderedFixedColumnMappingList=F,c.state.refreshbodycell.renderedPinnedDataList=y,c.state.refreshbodycell.prevRowFixCount=c.option.rowFixCount,c.state.refreshbodycell.fitRatio=v,c.state.refreshbodycell.bodyCellStartX=l,c.state.refreshbodycell.bodyCellStartY=j,c.state.refreshbodycell.bodyCellEndX=m,c.state.refreshbodycell.bodyCellEndY=k,c.state.refreshbodycell.bodyCellPositionY=ka,c.state.refreshbodycell.bodyCellPositionX=ja,c.state.refreshbodycell.scrollEndXOffset=sa,c.state.refreshbodycell.scrollEndYOffset=ta,c.state.refreshbodycell.scrollxEnd=n,c.state.refreshbodycell.scrollyEnd=o,c.state.refreshbodycell.wrapperWidth=c.state.wrapperWidth,c.state.refreshbodycell.wrapperHeight=c.state.wrapperHeight,c.state.fixupto&&c.state.fixupto>0&&(ja[c.state.fixupto]-=sa),c.state.refreshbodycell.bodyCellPositionXForHeaderDrag=ja,c.state.bodyHeight=la},tb.prototype._refreshPagingUnit=function(b){var c=this;if(c._usePager()){var d={},e=c.pageInfo();for(var f in e)d[f]=e[f];if(c.option.paging&&d.pagerTotal){var g=(c.$pager,c.$pagerleft),h=c.$pagerright,j=[];if(a.isFunction(d.pagerTotal))j.push(d.pagerTotal(d));else if("string"==typeof d.pagerTotal)j.push(d.pagerTotal);else if(d.pagerTotal){var k="<span>"+tb.i18n("totalCount")+" : "+d.dataLength+"</span>";j.push(k)}g.html(j.join(""))}else c.$pagerleft.empty();if(c.option.paging&&d.enabled){var h=(c.$pager,c.$pagerright),m=[];if(a.isFunction(d.pagerSelect))m.push(d.pagerSelect(d));else if("string"==typeof d.pagerSelect)m.push(d.pagerSelect);else if(d.pagerSelect){var n=[];a.isArray(d.pagerSelect)?n=n.concat(d.pagerSelect):n.push(10,20,30,50,100),c.state.userSetPerPage&&(n=n.concat(c.state.userSetPerPage));for(var o=0,p=n.length;p>o;o++)n[o]=Number(n[o]);d.perPage&&-1===a(n).index(Number(d.perPage))&&(n.push(Number(d.perPage)),c.state.userSetPerPage=c.state.userSetPerPage||[],c.state.userSetPerPage.push(Number(d.perPage))),"number"!=typeof d.perPage&&isNaN(Number(d.perPage))?d.perPage=Number(n[0]):d.hasOwnProperty("perPage")&&!isNaN(Number(d.perPage))&&(d.perPage=Number(d.perPage)),n.sort(function(a,b){return a-b}),m.push('<select class="perPage">');for(var q={},r=0;r<n.length;r++){var s=parseInt(n[r]);if(q[s])return;q[s]=!0,m.push('<option value="',s,'"'),Number(s)===Number(d.perPage)&&m.push(' selected="selected"'),m.push(">",String(s),"</option>")}m.push("</select>")}h.html(m.join(""))}else c.$pagerright.empty();var t=i(c.state.paginationList),u=c.option.paging&&c.option.paging.hidePageList===!0;if(u?c.$pagercenter.hide():c.$pagercenter.show(),d.enabled)for(var o=0,p=t.length;p>o;o++){var v=t[o],w=v.getAttribute("data-to-page");switch(w){case"first":case"prev":case"next":case"last":if(!v.children.length||b===!0){var x=document.createElement("a");for(x.className="page-set",x.href="#"+w,x.appendChild(document.createTextNode(c.pageInfo()[w]||""));v.firstChild;)v.removeChild(v.firstChild);v.appendChild(x)}break;case"list":var y=1,z=d.total,A=Number(d.pagerCount)||5;if(c.option.currentPageInCenter&&z-y>=A)y=d.current-(A/2|0),z=y+A-1,1>y&&(y=1,z=y+A-1),z>d.total&&(z=d.total,y=d.total-A+1);else{for(z=l(z,A);z<d.current;)y+=A,z+=A;z>d.total&&(z=d.total)}for(var B=v.getElementsByTagName("li"),C=[],D=0,E=B.length;E>D;D++)C.push(B[D]);for(var F=null,G=null,H=null,D=0,E=C.length;E>D;D++){var I=C[D];if(I.children.length){var J=parseInt(I.firstChild.getAttribute("href").split("#").pop());y>J?v.removeChild(I):J>z?v.removeChild(I):J>=y&&z>=J&&(F=null===F?J:Math.min(F,J),F===J&&(G=I),H=null===H?J:Math.max(H,J),J===d.current?I.className="page-item page-button current":I.className="page-item page-button")}else v.removeChild(I)}for(var K=y;z>=K;K++)if(!(null!==F&&K>=F&&H>=K)){var I=document.createElement("li");I.setAttribute("data-alopexgrid-pagenumber",K),I.className="page-item page-button",K===d.current&&(I.className+=" current"),I.innerHTML='<a class="page-set" href="#'+K+'">'+K+"</a>",null!==F&&F>K?v.insertBefore(I,G):v.appendChild(I)}}}else for(var o=0,p=t.length;p>o;o++){var v=t[o],w=v.getAttribute("data-to-page");"list"===w&&v.children&&v.children.length&&a(v).empty()}}},tb.prototype._refreshTimerActivate=function(a){var b=this,c=jb?80:40;parseInt(b.option.useAdaptiveScrollDelay);return b.option.useAdaptiveScrollDelay?void 0:void(a===!0?null==b.state.gridRefreshTimer&&(b.state.gridRefreshTimer=setInterval(function(){b._refreshBoard()},c)):a===!1&&(b.state.gridRefreshTimer&&(b._refreshBoard(),clearInterval(b.state.gridRefreshTimer)),b.state.gridRefreshTimer=null))},tb.prototype._generateTranslatex=function(b){var c=this,d=0,e=0;if(null!=c.state.fixedColumnMapping&&(e=c.state.fixedColumnMapping.length),null!=c.state.standardColumnWidthMap){var f,g;for(var h in c.state.standardColumnWidthMap){if(f=c.state.standardColumnWidthMap[h],g=c.state.columnIndexArr[a.inArray(Number(h),c.state.columnIndexArr)-e],0>=b||g>=b)break;d+=f}}return d},tb.prototype._getColumnIndexByBlankWidth=function(b,c){var d=this,e=0,f=0,g=0;if(null!=d.state.fixedColumnMapping&&(g=d.state.fixedColumnMapping.length),null!=d.state.standardColumnWidthMap)for(var h in d.state.standardColumnWidthMap)if(e+=d.state.standardColumnWidthMap[h],e*d.state.scrollxRatio>=b){if(f=d.state.columnIndexArr[a.inArray(Number(h),d.state.columnIndexArr)-g],null==f&&(f=d.state.columnIndexArr[0]),c===!0)return-((e-d.state.standardColumnWidthMap[h])*d.state.scrollxRatio-b)/d.state.scrollxRatio;break}return f},tb.prototype.__getRenderedIndexByBlankHeight=function(a,b){var c=this,d=c.state,f=d.pagingInfo,g=Math.max(f.pageDataLength,c.option.rowPadding>0?c.option.rowPadding:0),h=d.renderTargetDataList,i=d.rowHeightMapByDataId,j=0,k=0,l=0,m=d.renderFromRenderedIndex;if(j=jb?e(i):Object.keys(i).length,0===j){if(m=Math.floor(a/(c.state.scrollyRatio*c.state.rowHeight)),b===!0){var n=a/(c.state.scrollyRatio*c.state.rowHeight)-m;return c.state.rowHeight*n}return m}for(var o=0;g>o;o++){var p=h[o],q=0;if(q=p&&p._index&&i[p._index.id]?i[p._index.id]:d.rowHeight,k+=q,m=o,l=Math.ceil(d.scrollyRatio*k*d.scrollRatioConst)/d.scrollRatioConst,l>=a){if(b===!0){var n=q*c.state.scrollyRatio,r=c.state.scrollyRatio*(k-q);return Math.ceil((a-r)/c.state.scrollyRatio)}break}}return m},tb.prototype.__getRowHeightByRenderedIdx=function(a){var b=this,c=b.state,d=(b.pageInfo(),a),e=c.rowHeightMapByDataId,f=0;if(e)for(var g in e){var h=c.dataMapById[g];h&&null!=h._index.row&&h._index.row<a&&(f+=e[g],d-=1)}return d>0&&(f+=d*c.rowHeight),f},tb.prototype.__getAllRowHeight=function(){var a=this,b=a.state,c=a.pageInfo(),d=c.pageDataLength,e=b.rowHeightMapByDataId,f=0;if(e)for(var g in e){var h=b.dataMapById[g];h&&null!=h._index.row&&(f+=e[g],d-=1)}return f+=d*b.rowHeight},tb.prototype._setScrollInfo=function(){var b=this;if(b.state.renderTargetMappingInfo=b._generateRenderTargetMapping(),0==b.state.renderTargetDataList.length)return b.state.renderFromRenderedIndex=0,void(b.state.translateY=0);var c=0;if(b.state.scrollxEnd===!0){if(b.state.wrapperWidth>=b.state.columnWidth)b.state.scrollxMoveable=!1,b.state.renderFromColumnIndex=b.state.columnIndexArr[0],c=0;else{b.state.scrollxRatio=b.state.wrapperWidth/b.state.columnWidth;var d=b.state.scrollbarxTrackLength*b.state.scrollxRatio;c=b.state.scrollbarxTrackLength-d,b.state.renderFromColumnIndex=b._getColumnIndexByBlankWidth(c)}}else if(b.state.wrapperWidth>=b.state.columnWidth)b.state.renderFromColumnIndex=b.state.columnIndexArr[0],c=0;else{var e=a.inArray(b.state.renderFromColumnIndex,b.state.columnIndexArr);for(b.state.scrollxRatio=b.state.wrapperWidth/b.state.columnWidth;0>e&&null!=b.state.prevColumnIndexArr;){if(b.state.renderFromColumnIndex=b.state.prevColumnIndexArr[a.inArray(b.state.renderFromColumnIndex,b.state.prevColumnIndexArr)+1],null==b.state.renderFromColumnIndex){b.state.renderFromColumnIndex=b.state.columnIndexArr[0];break}e=a.inArray(b.state.renderFromColumnIndex,b.state.columnIndexArr)}var f=b.state.renderTargetMappingInfo;if(f.renderTargetWidth<b.state.wrapperWidth&&b.state.renderFromColumnIndex!==b.state.columnIndexArr[0]){for(var g=b.state.wrapperWidth-f.renderTargetWidth;--b.state.renderFromColumnIndex>0;)if(g-=b.state.columnWidthMap[b.state.renderFromColumnIndex]||0,0>g){b.state.scrollxEnd=!0;break}b.state.renderFromColumnIndex<=0&&(b.state.renderFromColumnIndex=b.state.columnIndexArr[0],b.state.scrollxEnd=!1)}c=b._generateTranslatex(b.state.renderFromColumnIndex)*b.state.scrollxRatio,b.option.useContinuousXScroll&&b.state.refreshbodycell&&!b.state.scrollxEnd&&(c+=Math.abs(b.state.refreshbodycell.scrollEndXOffset||0)*b.state.scrollxRatio)}b.state.translateX=c;var h=0,i=Math.max(b.option.rowPadding>0?b.option.rowPadding:0,b.state.renderTargetDataList.length);if(b.state.renderFromRenderedIndex-1>i)b.state.renderFromRenderedIndex=0,b.state.scrollyEnd=!1;else if(0===b.state.renderFromRenderedIndex)h=0,b.state.refreshbodycell?b.state.refreshbodycell.scrollEndYOffset=0:null;else if(b.state.scrollyEnd)h=b.state.scrollbaryTrackLength-b.state.scrollbaryHeight;else{if(b.state.refreshbodycell&&b.state.refreshbodycell.scrollyEnd&&b.state.refreshbodycell.scrollEndYOffset<0){var j=b.state.refreshbodycell.renderedPinnedDataList.length,k=b.state.refreshbodycell.bodyCellPositionY[j+1]-b.state.refreshbodycell.bodyCellPositionY[j];if(Math.abs(b.state.refreshbodycell.scrollEndYOffset)>k/2&&(b.state.renderFromRenderedIndex+=1,b.state.renderFromRenderedIndex>=i)){var l=b.state.scrollbaryTrackLength-b.state.scrollbaryHeight;b.state.renderFromRenderedIndex=b.__getRenderedIndexByBlankHeight(l)}b.state.refreshbodycell.scrollEndYOffset=0}var m=b.__getRowHeightByRenderedIdx(b.state.renderFromRenderedIndex);h=Math.ceil(b.state.scrollyRatio*m*b.state.scrollRatioConst)/b.state.scrollRatioConst,b.option.useContinuousYScroll&&b.state.refreshbodycell&&!b.state.scrollyEnd&&(h=b.state.scrollyRatio*m,h+=Math.abs(b.state.refreshbodycell.scrollEndYOffset||0)*b.state.scrollyRatio)}b.state.translateY=h},tb.prototype._scrollRightEvent=function(b,c){var d=this;if(d.state.hasHorizontalScrollbar){null==c&&(c=!0);var e=0,f=0;d.state.scrollxEnd||d.state.wrapperWidth>=d.state.standardColumnWidth||(f=d.state.columnIndexArr[a.inArray(d.state.renderFromColumnIndex,d.state.columnIndexArr)+b],e=d._generateTranslatex(f)*d.state.scrollxRatio,e>=d.state.scrollbarxTrackLength-d.state.scrollbarxWidth?(d.state.scrollxEnd=!0,e=d.state.scrollbarxTrackLength-d.state.scrollbarxWidth):d.state.renderFromColumnIndex=f,d.state.translateX=e,c&&d._refreshBoard())}},tb.prototype._scrollLeftMostEvent=function(a){return this._scrollLeftEvent(1/0,a)},tb.prototype._scrollLeftEvent=function(b,c){var d=this;if(d.state.hasHorizontalScrollbar){null==c&&(c=!0);var e=0,f=d.state.columnIndexArr[a.inArray(d.state.renderFromColumnIndex,d.state.columnIndexArr)-b];null==f||b===1/0?(e=0,d.state.renderFromColumnIndex=d.state.columnIndexArr[0]):(e=d._generateTranslatex(f)*d.state.scrollxRatio,d.state.renderFromColumnIndex=f),d.state.scrollxEnd=!1,d.state.translateX=e,c&&d._refreshBoard()}},tb.prototype._scrollTopEvent=function(a){return this._scrollUpEvent(this.state.renderFromRenderedIndex,a)},tb.prototype._scrollUpEvent=function(a,b){var c=this;if(null==b&&(b=!0),c.state.hasVerticalScrollbar){if(c.state.scrollyEnd=!1,c.state.renderFromRenderedIndex=Math.max(0,c.state.renderFromRenderedIndex-a),0===c.state.renderFromRenderedIndex)c.state.translateY=0;else{var d=c.__getRowHeightByRenderedIdx(c.state.renderFromRenderedIndex);translateY=Math.ceil(c.state.scrollyRatio*d*c.state.scrollRatioConst)/c.state.scrollRatioConst,c.state.translateY=translateY}b&&c._refreshBoard()}},tb.prototype._scrollDownEvent=function(a,b){var c=this,d=0;if(null==b&&(b=!0),!c.state.scrollyEnd&&c.state.hasVerticalScrollbar){var e=c.__getRowHeightByRenderedIdx(c.state.renderFromRenderedIndex+a);d=Math.ceil(c.state.scrollyRatio*e*c.state.scrollRatioConst)/c.state.scrollRatioConst,d>=c.state.scrollbaryTrackLength-c.state.scrollbaryHeight?(c.state.scrollyEnd=!0,d=c.state.scrollbaryTrackLength-c.state.scrollbaryHeight,c.state.renderFromRenderedIndex=c.__getRenderedIndexByBlankHeight(d)):c.state.renderFromRenderedIndex+=a,c.state.translateY=d,b&&c._refreshBoard()}},tb.prototype._activateBoardScrollEvent=function(){function b(){var a,b=l.state.columnWidth-l.state.wrapperWidth,c=0;for(var d in l.state.standardColumnWidthMap)if(a=l.state.standardColumnWidthMap[d],c+=a,c>b){c-=a,l.state.lastScrollxPixcel=b-c;break}return l.state.lastScrollxPixcel}function c(c,d){var e=Math.ceil(Math.abs(c)/100),f=0,g=0;if(c>=0){if(l.state.scrollxEnd)return;g=l.state.columnIndexArr[a.inArray(l.state.renderFromColumnIndex,l.state.columnIndexArr)+e],f=l._generateTranslatex(g)*l.state.scrollxRatio,f>=l.state.scrollbarxTrackLength-d?(l.state.scrollxEnd=!0,f=l.state.scrollbarxTrackLength-d,l.state.renderFromColumnIndex=l._getColumnIndexByBlankWidth(f)):l.state.renderFromColumnIndex=g,l.state.translateX=f}else{if(l.state.scrollxEnd){var h=b;f=l.state.scrollbarxTrackLength-(d+h*l.state.scrollxRatio)}else g=l.state.columnIndexArr[a.inArray(l.state.renderFromColumnIndex,l.state.columnIndexArr)-e],null==g?(f=0,l.state.renderFromColumnIndex=l.state.columnIndexArr[0]):(f=l._generateTranslatex(g)*l.state.scrollxRatio,l.state.renderFromColumnIndex=g);l.state.scrollxEnd=!1,l.state.translateX=f}return!0}function d(a,b){var c=Math.ceil(Math.abs(a)/100);if(a>=0){if(l.state.scrollyEnd)return;var d=l.__getRowHeightByRenderedIdx(l.state.renderFromRenderedIndex+c);translateY=Math.ceil(l.state.scrollyRatio*d*l.state.scrollRatioConst)/l.state.scrollRatioConst,translateY>=Math.ceil(l.state.scrollbaryTrackLength-b)?(l.state.scrollyEnd=!0,translateY=Math.ceil(l.state.scrollbaryTrackLength-b),l.state.renderFromRenderedIndex=l.__getRenderedIndexByBlankHeight(translateY)):l.state.renderFromRenderedIndex+=c,l.state.translateY=translateY}else{l.state.renderFromRenderedIndex=Math.max(0,l.state.renderFromRenderedIndex-c),l.state.scrollyEnd=!1;var d=l.__getRowHeightByRenderedIdx(l.state.renderFromRenderedIndex);translateY=Math.ceil(l.state.scrollyRatio*d*l.state.scrollRatioConst)/l.state.scrollRatioConst,0===l.state.renderFromRenderedIndex?l.state.translateY=0:l.state.translateY=translateY}return!0}function e(a,b,c,d){var e=d.width(),f=a.data.scrollxHandlePosition;a.data.scrollbarxStartPosition,a.data.startPositionXDff;c.state.scrollxEnd=!1;var g=f+(a.data.startPageX-b.pageX)*c.state.scrollxRatio;0>=g?(c.state.renderFromColumnIndex=c.state.columnIndexArr[0],c.state.translateX=0):g+e>=c.state.scrollbarxTrackLength?(c.state.scrollxEnd=!0,c.state.translateX=c.state.scrollbarxTrackLength-e,c.state.renderFromColumnIndex=c._getColumnIndexByBlankWidth(c.state.translateX)):(c.state.renderFromColumnIndex=c._getColumnIndexByBlankWidth(g),c.state.translateX=g)}function f(a,b,c,d){var e=d.height(),f=a.data.scrollyHandlePosition;a.data.scrollbaryStartPosition,a.data.startPositionYDff;c.state.scrollyEnd=!1;var g=f+(a.data.startPageY-b.pageY)*c.state.scrollyRatio;0>=g?(c.state.renderFromRenderedIndex=0,c.state.translateY=0):g+e>=c.state.scrollbaryTrackLength?(c.state.scrollyEnd=!0,c.state.translateY=Math.ceil(c.state.scrollbaryTrackLength-e),c.state.renderFromRenderedIndex=c.__getRenderedIndexByBlankHeight(c.state.translateY)):(c.state.renderFromRenderedIndex=c.__getRenderedIndexByBlankHeight(g),c.state.translateY=g)}function g(b,c,d,e,f,g){var h=(l.option.horizontalScrollMoveTempo||2)*e,i=0;if(b>c){if(l.state.scrollxEnd)return;var j=l.state.columnIndexArr[a.inArray(l.state.renderFromColumnIndex,l.state.columnIndexArr)+h];j>=f?(i=g,i>=l.state.scrollbarxTrackLength-d?(l.state.scrollxEnd=!0,i=l.state.scrollbarxTrackLength-d,l.state.renderFromColumnIndex=l._getColumnIndexByBlankWidth(i)):l.state.renderFromColumnIndex=f):(i=l._generateTranslatex(j)*l.state.scrollxRatio,i>=l.state.scrollbarxTrackLength-d?(l.state.scrollxEnd=!0,i=l.state.scrollbarxTrackLength-d,l.state.renderFromColumnIndex=l._getColumnIndexByBlankWidth(i)):l.state.renderFromColumnIndex=j),l.state.translateX=i}else{l.state.scrollxEnd=!1;var k=Math.max(0,a.inArray(l.state.renderFromColumnIndex,l.state.columnIndexArr)-h),m=l.state.columnIndexArr[k];null==m||isNaN(m)?(l.state.renderFromColumnIndex=l.state.columnIndexArr[0],i=0):f>=m?(l.state.renderFromColumnIndex=f,i=g):(l.state.renderFromColumnIndex=m,i=l._generateTranslatex(m)*l.state.scrollxRatio),0===l.state.renderFromColumnIndex?l.state.translateX=0:l.state.translateX=i}var n=l.option.useContinuousXScroll;l.option.useContinuousXScroll=!1,l._refreshBoard(),l.option.useContinuousXScroll=n}function h(c,d){var e=0,f=0;if(-1==c.attr("class").indexOf("leftbutton")){if(l.state.scrollxEnd)return;f=l.state.columnIndexArr[a.inArray(l.state.renderFromColumnIndex,l.state.columnIndexArr)+1],e=l._generateTranslatex(f)*l.state.scrollxRatio,e>=l.state.scrollbarxTrackLength-d?(l.state.scrollxEnd=!0,e=l.state.scrollbarxTrackLength-d,l.state.renderFromColumnIndex=l._getColumnIndexByBlankWidth(e)):l.state.renderFromColumnIndex=f,l.state.translateX=e}else{if(l.state.scrollxEnd){var g=b;e=l.state.scrollbarxTrackLength-(d+g*l.state.scrollxRatio)}else f=l.state.columnIndexArr[a.inArray(l.state.renderFromColumnIndex,l.state.columnIndexArr)-1],null==f?(e=0,l.state.renderFromColumnIndex=l.state.columnIndexArr[0]):(e=l._generateTranslatex(f)*l.state.scrollxRatio,l.state.renderFromColumnIndex=f);l.state.scrollxEnd=!1,l.state.translateX=e}var h=l.option.useContinuousXScroll;l.option.useContinuousXScroll=!1,l._refreshBoard(),l.option.useContinuousXScroll=h}function i(a,b,c,d,e,f){var g=(l.option.verticalScrollMoveTempo||l.state.refreshbodycell.renderedDataList.length)*d,h=0;if(a>b){if(l.state.scrollyEnd)return;var i=l.state.renderFromRenderedIndex+g;if(i>=e)h=f,h>=l.state.scrollbaryTrackLength-c?(l.state.scrollyEnd=!0,h=Math.ceil(l.state.scrollbaryTrackLength-c),l.state.renderFromRenderedIndex=l.__getRenderedIndexByBlankHeight(h)):l.state.renderFromRenderedIndex=e;else{var j=l.__getRowHeightByRenderedIdx(i);h=Math.ceil(l.state.scrollyRatio*j*l.state.scrollRatioConst)/l.state.scrollRatioConst,h>=l.state.scrollbaryTrackLength-c?(l.state.scrollyEnd=!0,h=Math.ceil(l.state.scrollbaryTrackLength-c),l.state.renderFromRenderedIndex=l.__getRenderedIndexByBlankHeight(h)):l.state.renderFromRenderedIndex=i}l.state.translateY=h}else{l.state.scrollyEnd=!1;var k=Math.max(0,l.state.renderFromRenderedIndex-g);if(e>=k)l.state.renderFromRenderedIndex=e,h=f;else{l.state.renderFromRenderedIndex=k;var j=l.__getRowHeightByRenderedIdx(l.state.renderFromRenderedIndex);h=Math.ceil(l.state.scrollyRatio*j*l.state.scrollRatioConst)/l.state.scrollRatioConst}0===l.state.renderFromRenderedIndex?l.state.translateY=0:l.state.translateY=h}var m=l.option.useContinuousYScroll;l.option.useContinuousYScroll=!1,l._refreshBoard(),l.option.useContinuousYScroll=m}function j(){for(var a=l.state.wrapperHeight-l.state.headerHeight-l.state.footerHeight+l.state.scrollbarxHeight,b=l.state.refreshbodycell.renderedDataList,c=0,d=l.state.rowHeightMapByDataId,e=0,f=b.length;f>e;e++){
var g=b[e],h=d[g._index.id];c+=null!=h?h:l.state.rowHeight}return Math.max(0,c-a)}function k(a,b){var c=0;if(-1==a.attr("class").indexOf("upbutton")){if(l.state.scrollyEnd)return;var d=l.__getRowHeightByRenderedIdx(l.state.renderFromRenderedIndex+1);c=Math.ceil(l.state.scrollyRatio*d*l.state.scrollRatioConst)/l.state.scrollRatioConst,c>=l.state.scrollbaryTrackLength-b?(l.state.scrollyEnd=!0,c=Math.ceil(l.state.scrollbaryTrackLength-b),l.state.renderFromRenderedIndex=l.__getRenderedIndexByBlankHeight(c)):l.state.renderFromRenderedIndex+=1,l.state.translateY=c}else{if(!l.state.scrollyEnd&&0===l.state.renderFromRenderedIndex)return;if(l.state.scrollyEnd){var e=j();if(0===e){var d=l.__getRowHeightByRenderedIdx(l.state.renderFromRenderedIndex-1);l.state.renderFromRenderedIndex=Math.max(0,l.state.renderFromRenderedIndex-1),c=Math.ceil(l.state.scrollyRatio*d*l.state.scrollRatioConst)/l.state.scrollRatioConst}else{var d=l.__getRowHeightByRenderedIdx(l.state.renderFromRenderedIndex);c=Math.ceil(l.state.scrollyRatio*d*l.state.scrollRatioConst)/l.state.scrollRatioConst}}else{var d=l.__getRowHeightByRenderedIdx(l.state.renderFromRenderedIndex-1);l.state.renderFromRenderedIndex=Math.max(0,l.state.renderFromRenderedIndex-1),c=Math.ceil(l.state.scrollyRatio*d*l.state.scrollRatioConst)/l.state.scrollRatioConst}l.state.scrollyEnd=!1,0===l.state.renderFromRenderedIndex?l.state.translateY=0:l.state.translateY=c}var f=l.option.useContinuousYScroll;l.option.useContinuousYScroll=!1,l._refreshBoard(),l.option.useContinuousYScroll=f}var l=this,m=".alopexgridScrollbarEvent";hb.off(m+l.key),l.$scrollbarx.off(m),l.$scrollbary.off(m),l.$wrapper.off(m);var n=l.$scrollbarx.find(".scrollhandle"),o=l.$scrollbary.find(".scrollhandle"),p=l.$scrollbarLeftButton,q=l.$scrollbarUpButton;l.$wrapper.on((jb?"mousewheel":"wheel")+m,{self:l},function(a){var b=a.data.self;if(null!=a.originalEvent){var e,f,g=a.originalEvent.deltaX,h=jb?parseInt(a.originalEvent.wheelDelta*(-1/40)):a.originalEvent.deltaY;if(b.state.hasHorizontalScrollbar&&b.state.scrollxMoveable&&0!==g&&(g>0&&b.state.scrollxEnd||0>g&&0===b.state.renderFromColumnIndex||(a.preventDefault(),a.stopPropagation()),e=c(g,b.state.scrollbarxWidth)),b.state.hasVerticalScrollbar&&b.state.scrollyMoveable&&0!==h&&(h>0&&b.state.scrollyEnd||0>h&&0===b.state.renderFromRenderedIndex||(a.preventDefault(),a.stopPropagation()),f=d(h,b.state.scrollbaryHeight)),e===!0||f===!0){var i=b.option.useContinuousXScroll,j=b.option.useContinuousYScroll;b.option.useContinuousXScroll=!1,b.option.useContinuousYScroll=!1,b._refreshBoard(),b.option.useContinuousXScroll=i,b.option.useContinuousYScroll=j}}}),ib&&l.$wrapper.on("touchstart"+m,{self:l},function(b){if(null!=b.originalEvent){var c=b.target.className;if(!(c.indexOf("scrollbar")>=0||c.indexOf("scrollbutton")>=0||c.indexOf("scrollhandle")>=0)){var d=b.data.self;$target=a(b.target),$target.off(m+d.key);var g=b.originalEvent.touches[0],h=g.pageX,i=p.offset().left+p.width(),j=n.offset().left-i,k=h-i,l=g.pageY,r=q.offset().top+q.height(),s=o.offset().top-r,t=l-r,u={};u.self=d,u.startPageX=h,u.scrollxHandlePosition=j,u.scrollbarxStartPosition=i,u.startPositionXDff=k,u.startPageY=l,u.scrollyHandlePosition=s,u.scrollbaryStartPosition=r,u.startPositionYDff=t,d._refreshTimerActivate(!0),$target.on("touchmove"+m+d.key,u,function(a){if(a.cancelable!==!1){var b,c,d=a.data.self,g=a.originalEvent.touches[0],h=g.pageX-a.data.startPageX,i=g.pageY-a.data.startPageY,j=Math.abs(h),k=Math.abs(i);j>k?(b=!0,c=!1):(b=!1,c=!0),b&&d.state.hasHorizontalScrollbar&&d.state.scrollxMoveable&&(0>h&&d.state.scrollxEnd||h>0&&0===d.state.renderFromColumnIndex||(a.preventDefault(),a.stopPropagation())),c&&d.state.hasVerticalScrollbar&&d.state.scrollyMoveable&&(0>i&&d.state.scrollyEnd||i>0&&0===d.state.renderFromRenderedIndex||(a.preventDefault(),a.stopPropagation())),b&&g&&d.state.scrollxMoveable&&e(a,g,d,n),c&&g&&d.state.scrollyMoveable&&f(a,g,d,o)}}),$target.on("touchend"+m+d.key+" touchcancel"+m+d.key,{self:d},function(b){var c=b.data.self;c._refreshTimerActivate(!1),a(this).off(m+c.key)})}}}),l.$scrollbarx.on("mousedown"+m,{self:l},function(a){var b=a.data.self;if(b.state.scrollxMoveable&&a.target===this){hb.off(m+b.key),b.state.isScrollyMoving=!1;var c=a.pageX;ib&&a.pageX===a.clientX&&(c+=hb.scrollLeft());var d=b.state.scrollbarxWidth,e=p.offset().left+p.width(),f=n.offset().left+d,h=1,i=c-e-d/2,j=b._getColumnIndexByBlankWidth(i);g(c,f,d,h,j,i);var k=null,l=null;k=setTimeout(function(){l=setInterval(function(){f=n.offset().left+d,f-c>0&&d>=f-c||b.state.renderFromColumnIndex!==j&&(g(c,f,b.state.scrollbarxWidth,h,j,i),b.option.useScrollAcceleration===!0&&h++)},50),k=null},200),hb.on("selectstart"+m+b.key+b.eventns,function(a){a.preventDefault()}),hb.on("mouseup"+m+b.key+b.eventns+" touchend"+m+b.key+b.eventns+" touchcancel"+m+b.key+b.eventns,{self:b},function(a){var b=a.data.self;k&&clearTimeout(k),l&&clearInterval(l),hb.off(m+b.key)})}}),l.$scrollbarx.on("mousedown"+m+" touchstart"+m,".scrollhandle",{self:l},function(a){var b=a.data.self;if(b.state.scrollxMoveable){hb.off(m+b.key),b.state.isScrollyMoving=!1;var c=a;"touchstart"===a.originalEvent.type&&(c=a.originalEvent.touches[0]);var d=c.pageX,e=p.offset().left+p.width(),f=n.offset().left-e,g=d-e;b._refreshTimerActivate(!0),hb.on("selectstart"+m+b.key+b.eventns,function(a){a.preventDefault()}),hb.on("mousemove"+m+b.key+b.eventns+" touchmove"+m+b.key+b.eventns,{self:b,scrollxHandlePosition:f,scrollbarxStartPosition:e,startPositionDff:g},function(a){a.preventDefault();var b=a.data.self,c=a;"touchmove"===a.originalEvent.type&&(c=a.originalEvent.touches[0]);var d=n.width(),e=a.data.scrollxHandlePosition,f=a.data.scrollbarxStartPosition,g=a.data.startPositionDff;b.state.scrollxEnd=!1;var h=c.pageX-g-f+e;0>=h?(b.state.renderFromColumnIndex=b.state.columnIndexArr[0],b.state.translateX=0):h+d>=b.state.scrollbarxTrackLength?(b.state.scrollxEnd=!0,b.state.translateX=b.state.scrollbarxTrackLength-d,b.state.renderFromColumnIndex=b._getColumnIndexByBlankWidth(b.state.translateX)):(b.state.renderFromColumnIndex=b._getColumnIndexByBlankWidth(h),b.state.translateX=h)}).on("mouseup"+m+b.key+" touchend"+m+b.key+" touchcancel"+m+b.key,{self:b},function(a){var b=a.data.self;b._refreshTimerActivate(!1),hb.off(m+b.key)})}}),l.$scrollbarx.on("mousedown"+m,".scrollbutton",{self:l},function(b){var c=b.data.self;if(c.state.scrollxMoveable){hb.off(m+c.key);var d=a(b.target);c.state.isScrollyMoving=!1,h(d,c.state.scrollbarxWidth);var e=null,f=null;e=setTimeout(function(){f=setInterval(function(){h(d,c.state.scrollbarxWidth)},50),e=null},200),hb.on("selectstart"+m+c.key+c.eventns,function(a){a.preventDefault()}),hb.on("mouseup"+m+c.key+c.eventns+" touchend"+m+c.key+c.eventns+" touchcancel"+m+c.key+c.eventns,{self:c},function(a){e&&clearTimeout(e),f&&clearInterval(f),hb.off(m+a.data.self.key)})}}),l.$scrollbary.on("mousedown"+m,{self:l},function(a){var b=a.data.self;if(b.state.scrollyMoveable&&a.target===this){hb.off(m+b.key),b.state.isScrollyMoving=!1;var c=a.pageY;ib&&a.pageY===a.clientY&&(c+=hb.scrollTop());var d=b.state.scrollbaryHeight,e=q.offset().top+q.height(),f=o.offset().top+d,g=1,h=c-e-d/2,j=b.__getRenderedIndexByBlankHeight(h);i(c,f,d,g,j,h);var k=null,l=null;k=setTimeout(function(){l=setInterval(function(){f=o.offset().top+d,f-c>0&&d>=f-c||b.state.renderFromRenderedIndex!==j&&(i(c,f,d,g,j,h),b.option.useScrollAcceleration===!0&&g++)},50),k=null},200),hb.on("selectstart"+m+b.key+b.eventns,function(a){a.preventDefault()}),hb.on("mouseup"+m+b.key+b.eventns+" touchend"+m+b.key+b.eventns+" touchcancel"+m+b.key+b.eventns,{self:b},function(a){var b=a.data.self;k&&clearTimeout(k),l&&clearInterval(l),hb.off(m+b.key)})}}),l.$scrollbary.on("mousedown"+m+" touchstart"+m,".scrollhandle",{self:l},function(a){if(null!=a.originalEvent){var b=a.data.self;if(b.state.scrollyMoveable){hb.off(m+b.key),b.state.isScrollyMoving=!0;var c=a;"touchstart"===a.originalEvent.type&&(c=a.originalEvent.touches[0]);var d=c.pageY,e=q.offset().top+q.height(),f=o.offset().top-e,g=d-e,h=Math.ceil(b.state.scrollbaryTrackLength-o.height());H(function(){setTimeout(function(){I(),hb.trigger("__alopexgridscrollyend"+b.key)},0)}),b._refreshTimerActivate(!0),hb.on("selectstart"+m+b.key+b.eventns,function(a){a.preventDefault()}),hb.on("mousemove"+m+b.key+b.eventns+" touchmove"+m+b.key+b.eventns,{self:b,scrollyHandlePosition:f,scrollbaryStartPosition:e,startPositionDff:g,maxBlankHeight:h},function(a){a.preventDefault();var b=a.data.self,c=a;"touchmove"===a.originalEvent.type&&(c=a.originalEvent.touches[0]);var d=o.height(),e=a.data.scrollyHandlePosition,f=a.data.scrollbaryStartPosition,g=a.data.startPositionDff,h=a.data.maxBlankHeight;b.state.scrollyEnd=!1;var i=c.pageY-g-f+e;0>=i?(b.state.renderFromRenderedIndex=0,b.state.translateY=0):i+d>=b.state.scrollbaryTrackLength?(b.state.scrollyEnd=!0,b.state.translateY=h,b.state.renderFromRenderedIndex=b.__getRenderedIndexByBlankHeight(b.state.translateY)):(b.state.renderFromRenderedIndex=b.__getRenderedIndexByBlankHeight(i),b.state.translateY=i)}).on("mouseup"+m+b.key+" touchend"+m+b.key+" touchcancel"+m+b.key+" __alopexgridscrollyend"+b.key+m+b.key,{self:b},function(a){var b=a.data.self;b._refreshTimerActivate(!1),hb.off(m+b.key)})}}}),l.$scrollbary.on("mousedown"+m,".scrollbutton",{self:l},function(b){var c=b.data.self;if(c.state.scrollyMoveable&&b.target===this){var d=a(b.target);hb.off(m+c.key),c.state.isScrollyMoving=!0,k(d,c.state.scrollbaryHeight);var e=null,f=null;e=setTimeout(function(){f=setInterval(function(){k(d,c.state.scrollbaryHeight)},jb?80:40),e=null},200),H(function(){setTimeout(function(){I(),hb.trigger("__alopexgridscrollyend"+c.key)},0)}),hb.on("selectstart"+m+c.key+c.eventns,function(a){a.preventDefault()}),hb.on("touchend"+m+c.key+c.eventns+" touchcancel"+m+c.key+c.eventns+" mouseup"+m+c.key+c.eventns+" __alopexgridscrollyend"+c.key+m+c.key+c.eventns,{self:c},function(a){var b=a.data.self;e&&(clearTimeout(e),e=null),f&&(clearInterval(f),f=null),hb.off(m+b.key)})}})},tb.prototype._refreshScrollbar=function(){var a=this;a.state.scrollRatioConst=1e3;var b=a.$scrollbarx.find(".scrollhandle"),c=a.$scrollbarx.find(".leftbutton");if(a.state.scrollxMoveable=!0,a.state.columnWidth<=a.state.wrapperWidth)b.width(a.state.scrollbarxTrackLength),a.state.scrollbarxWidth=b.width(),a.state.scrollxMoveable=!1,a.state.translateX=0,a.state.scrollxRatio=0,a.state.renderFromColumnIndex=a.state.columnIndexArr[0];else{a.state.scrollxRatio=a.state.wrapperWidth/a.state.columnWidth;var d=a.state.scrollbarxTrackLength*a.state.scrollxRatio,e=2*c.width();if(e>d){var f=e-d;d=e,a.state.scrollxRatio=(a.state.wrapperWidth-f)/a.state.columnWidth}b.width(d),a.state.scrollbarxWidth=d}var g=a.$scrollbary.find(".scrollhandle"),h=a.$scrollbary.find(".upbutton");a.state.scrollyMoveable=!0;var i=a.state.wrapperHeight-a.state.headerHeight-a.state.footerHeight,j=a.__getAllRowHeight(),k=a.state.renderTargetDataList.length;if(!k&&a.option.message&&a.option.message.nodata&&(j+=a.state.rowHeight,k+=1),a.option.rowPadding>0&&k<a.option.rowPadding&&(j+=a.state.rowHeight*(a.option.rowPadding-k)),i>=j)g.height(a.state.scrollbaryTrackLength),a.state.scrollbaryHeight=g.height(),a.state.scrollyMoveable=!1,a.state.translateY=0,a.state.scrollyRatio=0;else{var l=j+a.state.headerHeight+a.state.footerHeight-2*h.height();a.state.scrollyRatio=a.state.scrollbaryTrackLength/l;var m=a.state.scrollbaryTrackLength*a.state.scrollyRatio,n=2*h.height();if(n>m){var o=n-m;m=n,a.state.scrollyRatio=(a.state.scrollbaryTrackLength-o)/l}m=Math.ceil(Math.min(a.state.scrollbaryTrackLength,m)),g.height(m),a.state.scrollbaryHeight=Math.ceil(m*a.state.scrollRatioConst)/a.state.scrollRatioConst}(a.state.data.length!==a.state.scrollbarRefreshLastDatalength||a.option.columnMapping.length!==a.state.scrollbarRefreshLastColumnLength)&&a._setScrollInfo(),jb?b.css("left",a.state.scrollbarxTrackLeft+a.state.translateX+"px"):b.css("transform","translateX("+a.state.translateX+"px)"),jb?g.css("top",a.state.scrollbaryTrackTop+a.state.translateY+"px"):g.css("transform","translateY("+a.state.translateY+"px)"),a.state.scrollbarRefreshLastDatalength=a.state.data.length,a.state.scrollbarRefreshLastColumnLength=a.option.columnMapping.length},tb.prototype._refreshBoard=function(a){var b=this;if(!b.state.renderingSuppressed){b.state.renderFromRenderedIndex=Math.max(0,b.state.renderFromRenderedIndex),b.state.renderFromColumnIndex=Math.max(0,b.state.renderFromColumnIndex),b.state.renderTargetMappingInfo=b._generateRenderTargetMapping();var c=b.option.useContinuousXScroll&&b.state.prevTranslateX!==b.state.translateX,d=b.option.useContinuousYScroll&&b.state.prevTranslateY!==b.state.translateY;if(!a&&b.state.prevRenderFromRenderedIndex===b.state.renderFromRenderedIndex&&b.state.prevRenderFromColumnIndex===b.state.renderFromColumnIndex&&b.state.prevWrapperWidth===b.state.wrapperWidth&&b.state.prevWrapperHeight===b.state.wrapperHeight&&b.state.prevScrollxEnd===b.state.scrollxEnd&&b.state.prevScrollyEnd===b.state.scrollyEnd&&b.state.prevColumnIndexArr===b.state.columnIndexArr&&!c&&!d)return b._refreshScrollbar(a),void b._triggerGridEvent("gridRefresh",{});var e=!(b.state.prevRenderFromRenderedIndex===b.state.renderFromRenderedIndex&&b.state.prevRenderFromColumnIndex===b.state.renderFromColumnIndex&&b.state.prevScrollxEnd===b.state.scrollxEnd&&b.state.prevScrollyEnd===b.state.scrollyEnd);b.state.prevRenderFromRenderedIndex=b.state.renderFromRenderedIndex,b.state.prevRenderFromColumnIndex=b.state.renderFromColumnIndex,b.state.prevWrapperWidth=b.state.wrapperWidth,b.state.prevWrapperHeight=b.state.wrapperHeight,b.state.prevScrollxEnd=b.state.scrollxEnd;var f=b.state.prevScrollyEnd!==b.state.scrollyEnd&&b.state.scrollyEnd;if(b.state.prevScrollyEnd=b.state.scrollyEnd,b.state.prevColumnIndexArr=b.state.columnIndexArr,b.state.prevTranslateX=b.state.translateX,b.state.prevTranslateY=b.state.translateY,b._refreshPagingUnit(a),b._refreshScrollbar(a),b._refreshHeaderCells(a),b._refreshFooterCells(a),b._refreshBodyCells(a),b.option.sortCellElements){var g="desc"===b.option.sortCellElements?-1:1;b.$wrapper.find(".alopexgrid-cell").sort(function(a,b){var c=[],d=[];tb.renderUtil.hasClass(a,"headercell")&&(c[0]=0),tb.renderUtil.hasClass(a,"bodycell")&&(c[0]=1),tb.renderUtil.hasClass(a,"footercell")&&(c[0]=2),tb.renderUtil.hasClass(b,"headercell")&&(d[0]=0),tb.renderUtil.hasClass(b,"bodycell")&&(d[0]=1),tb.renderUtil.hasClass(b,"footercell")&&(d[0]=2),c[1]=a.getAttribute("data-alopexgrid-rowindex"),d[1]=b.getAttribute("data-alopexgrid-rowindex"),null==c[1]&&(c[1]=a.getAttribute("data-alopexgrid-columndepth")),null==d[1]&&(d[1]=b.getAttribute("data-alopexgrid-columndepth")),(null==c[1]||null==d[1])&&(c[1]=a["data-localbody-y"],d[1]=b["data-localbody-y"]),c[2]=a.getAttribute("data-alopexgrid-columnindex"),d[2]=b.getAttribute("data-alopexgrid-columnindex"),(null==c[2]||null==d[2])&&(c[2]=a["data-localbody-x"],d[2]=b["data-localbody-x"]);for(var e=0;3>e;e++)if(c[e]!=d[e])return g*(parseInt(c[e])-parseInt(d[e]));return 0}).appendTo(b.$wrapper)}b._triggerGridEvent("gridRefresh",{}),e&&b._triggerGridEvent("gridScroll",b.scrollOffset()),f&&b._triggerGridEvent("scrollBottom",{})}},tb.prototype.calcAndRedraw=function(){var a=this;a.state.renderingSuppressed||(a._sortInternalData(),a._generateRenderTargetData(),a.viewUpdate())},tb.prototype.filterAndRedraw=function(){var a=this;a.state.renderingSuppressed||(a._generateRenderTargetData(),a.viewUpdate(),ta(a))},tb.prototype.redraw=function(){var a=this;a.state.renderingSuppressed||a.viewUpdate()},tb.prototype._getFilteredDataListExcept=function(a){for(var b=this,c=[],d=0,e=b.state.data.length;e>d;d++)b._doesDataPassFilter(b.state.data[d],a)&&c.push(b.state.data[d]);return c},tb.prototype._getFilteredDataList=function(b,c){for(var d=this,e=[],f=b.length,g=!1,h=0,i=c.length;i>h;h++){var j=c[h];g=!1;for(var k=0;f>k;k++){var l=b[k];a.isPlainObject(l)&&(l=d._filterDataToFunction(l)),a.isFunction(l)&&l(j)!==!0&&(g=!0)}g||e.push(j)}return e},tb.prototype._generateFilterColumnList=function(){for(var b=this,c=[],d=0,e=b.state.visibleColumnMappingList.length;e>d;d++){var f=b.state.visibleColumnMappingList[d];if(f.filter!==!1&&f.filterOption){var g=a.isFunction(f.filterOption)?f.filterOption:tb.filterFunction[f.filterOption.type];a.isFunction(g)&&c.push(f)}}return b.state.filterColumnMappingList=c,c},tb.prototype._doesDataPassFilter=function(b,c){var d=this,e=!1;d.option.rowOption&&d.option.rowOption.filter&&a.each(d.option.rowOption.filter,function(c,f){return a.isPlainObject(f)&&(f=d._filterDataToFunction(f)),a.isFunction(f)&&f(b)!==!0?(e=!0,!1):void 0}),(null===d.state.removeFilterColumnMapping||void 0===d.state.removeFilterColumnMapping)&&(d.state.removeFilterColumnMapping=[]);for(var f=0;f<d.state.filterColumnMappingList.length;f++){var g=d.state.filterColumnMappingList[f],h=d._getColumnFilterFunction(g);if(null==c||g.columnIndex!==c){if(h&&h(b[g.key],b,g)!==!0){e=!0,d.state.removeFilterColumnMapping[f]=!1;break}d.state.removeFilterColumnMapping[f]=!0}}return!e},tb.prototype._isGroupRangeCollapsed=function(a){var b=a.member[0]._state.collapsedGroupNode&&a.member[0]._state.collapsedGroupNode[a.groupKey];return b},tb.prototype._toggleCollapseGroupRange=function(a){this._isGroupRangeCollapsed(a)?this._expandGroupRange(a):this._collapseGroupRange(a)},tb.prototype._collapseGroupRange=function(a){for(var b=0,c=a.member.length;c>b;b++)a.member[b]._state.collapsedGroupNode=a.member[b]._state.collapsedGroupNode||{},a.member[b]._state.collapsedGroupNode[a.groupKey]=!0},tb.prototype._expandGroupRange=function(b){for(var c=0,d=b.member.length;d>c;c++)b.member[c]._state.collapsedGroupNode&&(delete b.member[c]._state.collapsedGroupNode[b.groupKey],a.isEmptyObject(b.member[c]._state.collapsedGroupNode)&&delete b.member[c]._state.collapsedGroupNode)},tb.prototype._isGroupDataCollapsed=function(a,b,c){var d=this,e=d._getGroupingRange(a._index.data,b);if(e)for(var f=e.groupDepth,g=c===!0?f:0;f>=g&&f>=0;f--)if(e=d._getGroupingRange(a._index.data,d.option.grouping.by[f]),d._isGroupRangeCollapsed(e))return!0;return!1},tb.prototype._collapseGroupData=function(a,b){var c=this._getGroupingRange(a._index.data,b);c&&this._collapseGroupRange(c)},tb.prototype._expandGroupData=function(a,b){var c=this._getGroupingRange(a._index.data,b);c&&this._expandGroupRange(c)},tb.prototype._toggleGroupData=function(a,b){var c=this._getGroupingRange(a._index.data,b);c&&(this._isGroupRangeCollapsed(c)?this._expandGroupData(a,b):this._collapseGroupData(a,b))},tb.prototype.isGroupCollapsed=function(a,b,c){var d=this,e=d._dataGet(a)[0];return arguments[arguments.length-1]===!0&&(c=!0),null==b?b=d.option.grouping.by[d.option.grouping.by.length-1]:"number"==typeof b&&(b=d.option.grouping.by[b]),e?d._isGroupDataCollapsed(e,b,c):null},tb.prototype.collapseGroup=function(b,c){var d=this;c="string"==typeof b||"number"==typeof b?b:c,b=a.isPlainObject(b)?b:{};var e=d._dataGet(b);if("number"==typeof c&&(c=d.option.grouping.by[c]),c=null==c?d.option.grouping.by:[c],e&&e.length){for(var f=0,g=e.length;g>f;f++)for(var h=0,i=c.length;i>h;h++)d._collapseGroupData(e[f],c[h]);d.filterAndRedraw()}},tb.prototype.expandGroup=function(b,c){var d=this;c="string"==typeof b||"number"==typeof b?b:c,b=a.isPlainObject(b)?b:{};var e=d._dataGet(b);if("number"==typeof c&&(c=d.option.grouping.by[c]),c=null==c?d.option.grouping.by:[c],e&&e.length){for(var f=0,g=e.length;g>f;f++)for(var h=0,i=c.length;i>h;h++)d._expandGroupData(e[f],c[h]);d.filterAndRedraw()}},tb.prototype.toggleGroup=function(b,c){var d=this;c="string"==typeof b||"number"==typeof b?b:c,b=a.isPlainObject(b)?b:{};var e=d._dataGet(b);"number"==typeof c&&(c=d.option.grouping.by[c]),c=null==c?d.option.grouping.by:[c];var f={};if(e&&e.length){for(var g=0,h=e.length;h>g;g++)for(var i=0,j=c.length;j>i;i++){var k=this._getGroupingRange(e[g]._index.data,c[i]);k&&!f[k.id]&&(f[k.id]=!0,this._isGroupRangeCollapsed(k)?this._expandGroupData(e[g],c[i]):this._collapseGroupData(e[g],c[i]))}d.filterAndRedraw()}},tb.prototype._generateRenderTargetData=function(){var b=this,c=b.state.data,d=[],e=[],f={enabled:null,current:null,total:null,dataLength:null,pageDataLength:null,perPage:null,pagerCount:null,pagerSelect:null,pagerTotal:null,first:null,prev:null,next:null,last:null},g=b.option.paging||{};f.pagerSelect=g.pagerSelect,f.pagerTotal=g.pagerTotal,f.first=g.first||null,f.prev=g.prev||null,f.next=g.next||null,f.last=g.last||null;var h=g.customPaging,i=f.enabled=!!g.enabled;g.enabledByPager&&(i=f.enabled=!!b.option.pager),b.option.tree&&b.option.tree.useTree&&(i=f.enabled=!1),h||null!=g.perPage||(i=f.enabled=!1),f.pagerCount=g.pagerCount||10,f.current=(h?h.current:g.current)||1,f.perPage=h?h.perPage:g.perPage,null==f.perPage&&(f.perPage=c.length),b._generateFilterColumnList();var j=b.option.rowOption&&a.isPlainObject(b.option.rowOption.filter)&&!a.isEmptyObject(b.option.rowOption.filter)||b.state.filterColumnMappingList.length;b.state.filterApplied=!1;var k=b._hasPinnedData(),l=!!(b.option.tree&&b.option.tree.useTree&&b.state.treeInfo),m=!!(b.option.grouping&&b.option.grouping.useGrouping&&b.option.grouping.by&&b.option.grouping.by.length),n=!(!m||!b.option.grouping.useGroupHeader),o=!(!m||!b.option.grouping.useGroupFooter);if(m){for(var p=[],q=0,r=b.option.grouping.by.length;r>q;q++)p.push({});if(n)for(var s={},q=0,r=b.option.grouping.by.length;r>q;q++)b.option.grouping.useGroupHeader===!0?s[b.option.grouping.by[q]]=!0:a.isArray(b.option.grouping.useGroupHeader)&&a.inArray(b.option.grouping.by[q],b.option.grouping.useGroupHeader)>=0&&(s[b.option.grouping.by[q]]=!0);if(o)for(var t={},q=0,r=b.option.grouping.by.length;r>q;q++)b.option.grouping.useGroupFooter===!0?t[b.option.grouping.by[q]]=!0:a.isArray(b.option.grouping.useGroupFooter)&&a.inArray(b.option.grouping.by[q],b.option.grouping.useGroupFooter)>=0&&(t[b.option.grouping.by[q]]=!0)}for(var u=b.state.groupHeaderDataMapById=b.state.groupHeaderDataMapById||{},v=b.state.groupFooterDataMapById=b.state.groupFooterDataMapById||{},w=0,x=0,y=c.length;y>x;x++){var z=c[x];if(delete z._index.row,delete z._index.target,z._state.filtered=!1,j){var A=!b._doesDataPassFilter(z);if(A){b.state.filterApplied=!0;continue}z._state.filtered=!0}if(!(k&&b.state.pinnedDataIdMap[z._index.id]||l&&z._index.parentid&&b._isTreeParentNodeExpanded(z)!==!0)){if(m&&(n||o)){for(var B=[],q=0,r=b.option.grouping.by.length;r>q;q++){var C=b.option.grouping.by[q],D=b._getGroupingRange(x,C);B.push(D)}if(o)for(var q=b.option.grouping.by.length-1;q>=0;q--){var E=p[q];if(t[b.option.grouping.by[q]]&&E.id&&E.id!==B[q].id){if(b._isGroupDataCollapsed(E.member[0],b.option.grouping.by[E.groupDepth-1]))continue;var F=v[E.id]||{_index:{},_state:{groupFooter:E.id}};F._index.id||b._giveDataId(F),v[E.id]=F,d.push(F)}}for(var q=0,r=b.option.grouping.by.length;r>q;q++)if(s&&s[b.option.grouping.by[q]]&&p[q].id!==B[q].id&&n){if(b._isGroupDataCollapsed(z,b.option.grouping.by[q-1]))continue;var G=u[B[q].id]||{_index:{},_state:{groupHeader:B[q].id}};G._index.id||b._giveDataId(G),u[B[q].id]=G,d.push(G)}for(var q=0,r=b.option.grouping.by.length;r>q;q++)p[q]=B[q]}d.push(z),z._index.target=w++}}if(b.state.filterApplied!==!0&&void 0!==b.state.removeFilterColumnMapping&&void 0!==b.state.filterColumnMappingList)for(var H=b.state.removeFilterColumnMapping.length;H>0;H--)b.state.removeFilterColumnMapping[H-1]===!0&&(b.state.filterColumnMappingList.length>0&&(b.state.columnIndexToMapping[b.state.filterColumnMappingList[H-1].columnIndex].filterOption=null,b.state.filterColumnMappingList.splice(H-1,1)),b.state.removeFilterColumnMapping.splice(H-1,1));if(o)for(var q=b.option.grouping.by.length-1;q>=0;q--)if(t[b.option.grouping.by[q]]&&p[q].id){if(b._isGroupDataCollapsed(z,b.option.grouping.by[q-1]))break;var F=v[p[q].id]||{_index:{},_state:{groupFooter:p[q].id}};F._index.id||b._giveDataId(F),v[p[q].id]=F,d.push(F)}h?f.total=h.total:d.length?f.total=Math.floor(d.length/f.perPage)+(d.length%f.perPage?1:0):f.total=0,(f.total===1/0||isNaN(f.total))&&(f.total=d.length?1:0),f.current=Math.min(f.total,Math.max(1,f.current));var I=null,J=null;i?(I=(f.current-1)*f.perPage,J=f.current*f.perPage-1):f.current=1;var K=0,L=0,M=0;if(b.state.dataIdToRowIndexMap={},k)for(var H=0,N=b.state.pinnedDataIdList.length;N>H;H++){var O=b.state.pinnedDataIdList[H],x=b.state.dataIdToIndexMap[O],z=b.state.data[x];O&&z&&(z._index.row=K++,e.push(z),b.state.dataIdToRowIndexMap[z._index.id]=b.state.dataIdToRowIndexMap[z._index.id]||{},b.state.dataIdToRowIndexMap[z._index.id][z._index.row]=!0,M++,L++)}for(var H=0,N=d.length;N>H;H++)if(!i||h||!(I>H||H>J)){var z=d[H];b._isGroupDataCollapsed(z,b.option.grouping.by[b.option.grouping.by.length-1])||(z._index.row=K++,e.push(z),b.state.dataIdToRowIndexMap[z._index.id]=b.state.dataIdToRowIndexMap[z._index.id]||{},b.state.dataIdToRowIndexMap[z._index.id][z._index.row]=!0,M++)}f.dataLength=h?h.dataLength:d.length+L,f.pageDataLength=M,j?b.state.filteredDataList=d:delete b.state.filteredDataList,b.state.targetDataList=d,b.state.renderTargetDataList=e,b.state.pagingInfo=f},tb.prototype._hiddenHeaderDragStart=function(b,c){var d=this;b=a.event.fix(b);var e=b.pageX,f=b.pageY;b.preventDefault(),d.$wrapper.off(".alopexgridHeaderSelectEngine");var g=a(b.target).closest(".headercell"),i={};i.self=d,i.headercell=g,i.columnIndex=c,i.wrapperX=d.$wrapper.offset().left,i.atColumnIndex=null,i.after=!1,i.$proxy=null,i.$bar=null,i.scrollTimer=null,i.prevX=e,i.prevY=f,i.toHideArea=!1,i.canDragDrop=!0,i.groupDragDrop=!1,d.state.hiddenColumnDraging=!0,hb.off(".alopexgridhiddenheaderdragdropevent"+d.key),hb.on("keydown.alopexgridhiddenheaderdragdropevent"+d.key+d.eventns,i,function(a){var b=a.data.self,c=a.keyCode;switch(c){case 27:hb.off(".alopexgridhiddenheaderdragdropevent"+b.key),b._enableHeaderSelect(!!b.option.enableHeaderSelect),a.data.$proxy&&(a.data.$proxy.remove(),delete a.data.$proxy),a.data.$bar&&(a.data.$bar.remove(),delete a.data.$bar),a.data.scrollTimer&&(clearInterval(a.data.scrollTimer),a.data.scrollTimer=null),null!==a.data.atColumnIndex&&(a.data.atColumnIndex=null)}}),hb.on("mousemove.alopexgridhiddenheaderdragdropevent"+d.key+d.eventns,i,function(b){if(b.data.prevX!==b.pageX||b.data.prevY!==b.pageY){b.data.prevX=b.pageX,b.data.prevY=b.pageY;var c=b.data.self,d=b.data.headercell,e=b.data.columnIndex;b.preventDefault(),h();var f=b.data.$proxy,g=b.data.$bar;if(null===f||void 0===f){f=a("<div>"),f.addClass(_a+" alopexgrid-proxy alopexgrid-dragdrop-header alopexgrid-refer-"+c.key);var i=a('<div class="columnhiddenarea"><div>').css("overflow","visible");$cloneHeader=d.clone(),$cloneHeader.css({top:"0px",left:"0px"}),i.append($cloneHeader),f.append(i),f.appendTo(document.body),b.data.$proxy=f}(null===g||void 0===g)&&(g=a("<div>"),g.addClass("alopexgrid-dragdrop-header-indicator"),b.data.$bar=g),b.data.$bar.prependTo(c.$wrapper),f.css({top:b.pageY+"px",left:b.pageX+"px"}),b.data.scrollTimer&&(clearInterval(b.data.scrollTimer),b.data.scrollTimer=null);var j=c.state.refreshbodycell.bodyCellStartX;c.state.fixedColumnWidth>0&&(j+=c.state.fixedColumnWidth);var k=c.state.refreshbodycell.bodyCellEndX;if(b.pageX<=b.data.wrapperX+j){var l=Math.ceil(Math.abs(b.pageX-(b.data.wrapperX+j))/25),m=function(){c._scrollLeftEvent(l)};m(),b.data.scrollTimer=setInterval(m,100)}else if(b.pageX>=b.data.wrapperX+k){var l=Math.ceil(Math.abs(b.pageX-(b.data.wrapperX+k))/25),m=function(){c._scrollRightEvent(l)};m(),b.data.scrollTimer=setInterval(m,100)}var n=c.state.renderTargetMappingInfo,o=n.fixedRenderTargetMapping,p=n.renderTargetWidth,q=n.fitRatio,r=c.state.scrollxEnd,s=0;if(r&&p>c.state.wrapperWidth&&(s=p-c.state.wrapperWidth),a(b.target).closest(".columnhiddenarea")&&0!==a(b.target).closest(".columnhiddenarea").length&&"true"===a(b.target).closest(".columnhiddenarea").attr("data-alopexgrid-columnhiddenarea"))b.data.atColumnIndex=null,b.data.toHideArea=!0;else{b.data.toHideArea=!1;for(var t=0,u=c.state.refreshbodycell.renderedColumnMappingList.length;u>t;t++){var v=c.state.refreshbodycell.renderedColumnMappingList[t],w=v.columnIndex,x=c.state.columnIndexToMapping[w],y=c.state.columnWidthMap[w];1!==q&&(y=c.state.columnFitWidthById[x.id]),o.length>0&&c.state.refreshbodycell.renderedColumnMappingList[o.length].columnIndex===w&&(y-=s);var z=c.state.refreshbodycell.bodyCellPositionXForHeaderDrag[t],A=z+b.data.wrapperX;if(b.pageX>=A&&b.pageX<=A+y){b.data.atColumnIndex=w,Math.abs(b.pageX-A)>Math.abs(b.pageX-(A+y))?(b.data.after=!0,jb?b.data.$bar.css("left",z+y+"px"):b.data.$bar.css("transform","translateX("+(z+y)+"px)")):(b.data.after=!1,jb?b.data.$bar.css("left",z+"px"):b.data.$bar.css("transform","translateX("+z+"px)"));break}}}if(b.data.toHideArea===!1)if(null!==b.data.atColumnIndex){if(b.data.$bar.show(),c.option.grouping&&c.option.grouping.by.length>0&&c.option.grouping.useGroupColumnRearrange===!0){var B,C=a.inArray(b.data.atColumnIndex,c.state.visibleColumnIndexArr);b.data.after?(C+=1,B=c.state.visibleColumnIndexArr[C]):B=c.state.visibleColumnIndexArr[C];var D=c.state.groupingColumnIndexToMapping[e],E=c.state.groupingColumnIndexToMapping[B];if(c.option.grouping.useDragDropBetweenGroups)null!==D&&void 0!==D&&null!==E&&void 0!==E?(b.data.canDragDrop=!0,b.data.groupDragDrop=!0,b.data.$bar.removeClass("disabled"),b.data.$proxy.removeClass("disabled")):null!==D&&void 0!==D||null!==E&&void 0!==E?(b.data.groupDragDrop=!1,b.data.canDragDrop=!1,b.data.$bar.addClass("disabled"),b.data.$proxy.addClass("disabled")):(b.data.groupDragDrop=!1,b.data.canDragDrop=!0,b.data.$bar.removeClass("disabled"),b.data.$proxy.removeClass("disabled"));else if(null!==D&&void 0!==D&&null!==E&&void 0!==E)b.data.canDragDrop=!0,b.data.groupDragDrop=!0,b.data.$bar.removeClass("disabled"),b.data.$proxy.removeClass("disabled");else if(null===D||void 0===D||null!==E&&void 0!==E)if(null!==D&&void 0!==D||null===E||void 0===E)b.data.groupDragDrop=!1,b.data.canDragDrop=!0,b.data.$bar.removeClass("disabled"),b.data.$proxy.removeClass("disabled");else{b.data.groupDragDrop=!1;var F=c.state.columnIndexToKeyMap[e];"undefined"===F?(b.data.canDragDrop=!1,b.data.$bar.addClass("disabled"),b.data.$proxy.addClass("disabled")):(b.data.canDragDrop=!0,b.data.$bar.removeClass("disabled"),b.data.$proxy.removeClass("disabled"))}else{b.data.groupDragDrop=!1;var G=c.option.grouping.by,H=G[G.length-1],I=(c._getColumnByKey(H)||{}).columnIndex,J=a.inArray(I,c.state.visibleColumnIndexArr),K=c.state.visibleColumnIndexArr[J+1],L=c.state.columnIndexToKeyMap[K];"undefined"===L?(b.data.canDragDrop=!1,b.data.$bar.addClass("disabled"),b.data.$proxy.addClass("disabled")):(b.data.canDragDrop=!0,b.data.$bar.removeClass("disabled"),b.data.$proxy.removeClass("disabled"))}}}else b.data.$bar.hide()}}).on("mouseup.alopexgridhiddenheaderdragdropevent"+d.key+d.eventns,i,function(b){function c(a){return null!==a&&void 0!==a}var d=b.data.self,e=(b.data.headercell,b.data.columnIndex);if(hb.off(".alopexgridhiddenheaderdragdropevent"+d.key),d._enableHeaderSelect(!!d.option.enableHeaderSelect),b.data.$proxy&&(b.data.$proxy.remove(),delete b.data.$proxy),b.data.$bar&&(b.data.$bar.remove(),delete b.data.$bar),b.data.scrollTimer&&(clearInterval(b.data.scrollTimer),b.data.scrollTimer=null),!b.data.toHideArea&&b.data.canDragDrop!==!1&&null!==b.data.atColumnIndex){var f=d.state.hiddenColumnIndexToMapping[e];if(null!==f&&void 0!==f){var g=a.inArray(f.columnIndex,d.state.hiddenColumnIdxArr);d.state.hiddenColumnIdxArr.splice(g,1),delete d.state.hiddenColumnIndexToMapping[e]}d.showCol(e);var h=b.data.atColumnIndex,i=a.inArray(e,d.state.visibleColumnIndexArr),j=a.inArray(h,d.state.visibleColumnIndexArr);if(e===h)return;if(b.data.after&&i===j+1)return;if(!b.data.after&&i+1===j)return;var k=d.state.columnIndexToMapping[e],l=d.state.columnIndexToMapping[h];if(d.option.grouping&&d.option.grouping.by.length>0&&d.option.grouping.useDragDropBetweenGroups===!1&&d.option.grouping.useGroupColumnRearrange===!0&&b.data.groupDragDrop===!1){var m=d.state.groupingColumnIndexToMapping[e],n=d._getColumnByKey(l.key);
if(null!==m&&void 0!==m){var o=d.option.grouping.by,p=o[o.length-1],q=(d._getColumnByKey(p)||{}).columnIndex,r=a.inArray(q,d.state.visibleColumnIndexArr),s=d.state.visibleColumnIndexArr[r+1],t=d.state.columnIndexToKeyMap[s],u=a.inArray(k.key,d.option.grouping.by);d.option.grouping.by.splice(u,1),d.option.grouping.by.push(t),d.state.sortingRequired=!0}else if(n){var v=a.inArray(l.key,d.option.grouping.by);d.option.grouping.by.splice(v,0,k.key),d.option.grouping.by.splice(d.option.grouping.by.length-1,1),d.state.sortingRequired=!0}}if(null!==d.option.autoColumnIndex&&void 0!==d.option.autoColumnIndex&&d.option.autoColumnIndex===!0)if(e>h){b.data.after&&(j+=1,h=d.state.visibleColumnIndexArr[j]);for(var w=h;e>w;w++)l=d.state.columnIndexToMapping[w],l.columnIndex=w+1;k.columnIndex=h,d.option.columnMapping.splice(h,0,k),d.option.columnMapping.splice(e+1,1)}else{b.data.after||(j-=1,h=d.state.visibleColumnIndexArr[j]);for(var w=e+1;h+1>w;w++)l=d.state.columnIndexToMapping[w],l.columnIndex=w-1;k.columnIndex=h,d.option.columnMapping.splice(h+1,0,k),d.option.columnMapping.splice(e,1)}else{if(i>j){b.data.after&&(j+=1,h=d.state.visibleColumnIndexArr[j]);for(var x,w=j;i>w;w++)x=d.state.columnIndexArr[w],l=d.state.columnIndexToMapping[x],l.columnIndex=d.state.columnIndexArr[w+1]}else{b.data.after||(j-=1,h=d.state.visibleColumnIndexArr[j]);for(var x,w=i+1;j+1>w;w++)x=d.state.columnIndexArr[w],l=d.state.columnIndexToMapping[x],l.columnIndex=d.state.columnIndexArr[w-1]}k.columnIndex=h}if(b.data.groupDragDrop){for(var y,z=d.option.grouping.by,A=[],B=0,C=z.length;C>B;B++)y=d._getColumnByKey(z[B]),A[y.columnIndex]=y.key;d.option.grouping.by=A.filter(c),d.state.sortingRequired=!0}d.updateOption(),d.state.hiddenColumnDraging=!1}})},tb.prototype._headerDragStart=function(b,c){var d=this;b=a.event.fix(b);var e=b.pageX,f=b.pageY;b.preventDefault(),d.$wrapper.off(".alopexgridHeaderSelectEngine");var g=a(b.target).closest(".headercell"),i={};i.self=d,i.headercell=g,i.columnIndex=c,i.wrapperX=d.$wrapper.offset().left,i.atColumnIndex=null,i.after=!1,i.$proxy=null,i.$bar=null,i.scrollTimer=null,i.prevX=e,i.prevY=f,i.toHideArea=!1,i.canDragDrop=!0,i.groupDragDrop=!1,i.dragColumnMapping=null,i.leftColumn=null,i.leftColumnMapping=null,i.rightColumn=null,i.rightColumnMapping=null,hb.off(".alopexgridheaderdragdropevent"+d.key),hb.on("keydown.alopexgridheaderdragdropevent"+d.key+d.eventns,i,function(a){var b=a.data.self,c=a.keyCode;switch(c){case 27:hb.off(".alopexgridheaderdragdropevent"+b.key),b._enableHeaderSelect(!!b.option.enableHeaderSelect),a.data.$proxy&&(a.data.$proxy.remove(),delete a.data.$proxy),a.data.$bar&&(a.data.$bar.remove(),delete a.data.$bar),a.data.scrollTimer&&(clearInterval(a.data.scrollTimer),a.data.scrollTimer=null),null!==a.data.atColumnIndex&&(a.data.atColumnIndex=null)}}),hb.on("mousemove.alopexgridheaderdragdropevent"+d.key+d.eventns,i,function(b){if(b.data.prevX!==b.pageX||b.data.prevY!==b.pageY){b.data.prevX=b.pageX,b.data.prevY=b.pageY;var c=b.data.self,d=b.data.headercell,e=b.data.columnIndex;b.preventDefault(),h();var f=b.data.$proxy,g=b.data.$bar;if(null===f||void 0===f){f=a("<div>"),f.addClass(_a+" alopexgrid-proxy alopexgrid-dragdrop-header alopexgrid-refer-"+c.key);var i=a('<div class="'+_a+'"><div>').css("overflow","visible"),j=a('<div class="wrapper"><div>').css("overflow","visible");if(null!==d&&void 0!==d){var k=d.clone();k.css({top:"0px",left:"0px"}),j.append(k)}var l,m,n,o=c.columnInfo(e),p=c.state.refreshbodycell.renderedDataList;n=null===k||void 0===k?0:k.height();for(var q=0,r=p.length;r>q;q++)m=p[q],l=a(c._createCell(m,o)),l.css({top:n+"px",left:"0px",height:c.state.rowHeight+"px",width:c.state.columnFitWidthById[o.id]+"px"}),l.appendTo(j),n+=c.state.rowHeight;i.append(j),f.append(i),f.appendTo(document.body),b.data.$proxy=f}(null===g||void 0===g)&&(g=a("<div>"),g.addClass("alopexgrid-dragdrop-header-indicator"),b.data.$bar=g),b.data.$bar.prependTo(c.$wrapper),b.data.$proxy.css({top:b.pageY+"px",left:b.pageX+"px"}),b.data.scrollTimer&&(clearInterval(b.data.scrollTimer),b.data.scrollTimer=null);var s=c.state.refreshbodycell.bodyCellStartX;c.state.fixedColumnWidth>0&&(s+=c.state.fixedColumnWidth);var t=c.state.refreshbodycell.bodyCellEndX;if(b.pageX<=b.data.wrapperX+s){var u=Math.ceil(Math.abs(b.pageX-(b.data.wrapperX+s))/25),v=function(){c._scrollLeftEvent(u)};v(),b.data.scrollTimer=setInterval(v,100)}else if(b.pageX>=b.data.wrapperX+t){var u=Math.ceil(Math.abs(b.pageX-(b.data.wrapperX+t))/25),v=function(){c._scrollRightEvent(u)};v(),b.data.scrollTimer=setInterval(v,100)}var w=c.state.renderTargetMappingInfo,x=w.fixedRenderTargetMapping,y=w.renderTargetWidth,z=w.fitRatio,A=c.state.scrollxEnd,B=0;if(A&&y>c.state.wrapperWidth&&(B=y-c.state.wrapperWidth),a(b.target).closest(".columnhiddenarea")&&0!==a(b.target).closest(".columnhiddenarea").length&&"true"===a(b.target).closest(".columnhiddenarea").attr("data-alopexgrid-columnhiddenarea"))b.data.atColumnIndex=null,b.data.toHideArea=!0;else{b.data.toHideArea=!1;for(var C=0,r=c.state.refreshbodycell.renderedColumnMappingList.length;r>C;C++){var D=c.state.refreshbodycell.renderedColumnMappingList[C],E=D.columnIndex,F=(c.state.columnIndexToMapping[E],c.state.columnWidthMap[E]);1!==z&&(F*=c.state.refreshbodycell.fitRatio),x.length>0&&c.state.refreshbodycell.renderedColumnMappingList[x.length].columnIndex===E&&(F-=B);var G=c.state.refreshbodycell.bodyCellPositionXForHeaderDrag[C],H=G+b.data.wrapperX;if(b.pageX>=H&&b.pageX<=H+F){b.data.atColumnIndex=E,Math.abs(b.pageX-H)>Math.abs(b.pageX-(H+F))?(b.data.after=!0,jb?b.data.$bar.css("left",G+F+"px"):b.data.$bar.css("transform","translateX("+(G+F)+"px)")):(b.data.after=!1,jb?b.data.$bar.css("left",G+"px"):b.data.$bar.css("transform","translateX("+G+"px)"));break}}}if(null!==b.data.atColumnIndex){b.data.$bar.show(),b.data.dragColumnMapping=c.state.columnIndexToMapping[e];var I=a.inArray(b.data.atColumnIndex,c.state.visibleColumnIndexArr);b.data.after?(b.data.leftColumn=b.data.atColumnIndex,b.data.leftColumnMapping=c.state.columnIndexToMapping[b.data.atColumnIndex],b.data.rightColumn=c.state.visibleColumnIndexArr[I+1],null===b.data.rightColumn||void 0===b.data.rightColumn?(b.data.lrightColumn=null,b.data.lrightColumnMapping=null):b.data.rightColumnMapping=c.state.columnIndexToMapping[b.data.rightColumn]):(b.data.leftColumn=c.state.visibleColumnIndexArr[I-1],null===b.data.leftColumn||void 0===b.data.leftColumn?(b.data.leftColumn=null,b.data.leftColumnMapping=null):b.data.leftColumnMapping=c.state.columnIndexToMapping[b.data.rightColumn],b.data.rightColumn=b.data.atColumnIndex,b.data.rightColumnMapping=c.state.columnIndexToMapping[b.data.atColumnIndex]);var J=c._triggerGridEvent("headerDragOver",{dragColumn:e,dragColumnMapping:b.data.dragColumnMapping,leftColumn:b.data.leftColumn,leftColumnMapping:b.data.leftColumnMapping,rightColumn:b.data.rightColumn,rightColumnMapping:b.data.rightColumnMapping});if(J&&(b.data.canDragDrop=!0,b.data.$bar.removeClass("disabled"),b.data.$proxy.removeClass("disabled")),c.option.grouping&&c.option.grouping.by.length>0&&c.option.grouping.useGroupColumnRearrange===!0){var K;b.data.after?(I+=1,K=c.state.visibleColumnIndexArr[I]):K=c.state.visibleColumnIndexArr[I];var L=c.state.groupingColumnIndexToMapping[e],M=c.state.groupingColumnIndexToMapping[K];if(c.option.grouping.useDragDropBetweenGroups)null!==L&&void 0!==L&&null!==M&&void 0!==M?(b.data.canDragDrop=!0,b.data.groupDragDrop=!0,b.data.$bar.removeClass("disabled"),b.data.$proxy.removeClass("disabled")):null!==L&&void 0!==L||null!==M&&void 0!==M?(b.data.groupDragDrop=!1,b.data.canDragDrop=!1,b.data.$bar.addClass("disabled"),b.data.$proxy.addClass("disabled")):(b.data.groupDragDrop=!1,b.data.canDragDrop=!0,b.data.$bar.removeClass("disabled"),b.data.$proxy.removeClass("disabled"));else if(null!==L&&void 0!==L&&null!==M&&void 0!==M)b.data.canDragDrop=!0,b.data.groupDragDrop=!0,b.data.$bar.removeClass("disabled"),b.data.$proxy.removeClass("disabled");else if(null===L||void 0===L||null!==M&&void 0!==M)if(null!==L&&void 0!==L||null===M||void 0===M)b.data.groupDragDrop=!1,b.data.canDragDrop=!0,b.data.$bar.removeClass("disabled"),b.data.$proxy.removeClass("disabled");else{b.data.groupDragDrop=!1;var N=c.state.columnIndexToKeyMap[e];"undefined"===N?(b.data.canDragDrop=!1,b.data.$bar.addClass("disabled"),b.data.$proxy.addClass("disabled")):(b.data.canDragDrop=!0,b.data.$bar.removeClass("disabled"),b.data.$proxy.removeClass("disabled"))}else{b.data.groupDragDrop=!1;var O=c.option.grouping.by,P=O[O.length-1],Q=(c._getColumnByKey(P)||{}).columnIndex,R=a.inArray(Q,c.state.visibleColumnIndexArr),S=c.state.visibleColumnIndexArr[R+1],T=c.state.columnIndexToKeyMap[S];"undefined"===T?(b.data.canDragDrop=!1,b.data.$bar.addClass("disabled"),b.data.$proxy.addClass("disabled")):(b.data.canDragDrop=!0,b.data.$bar.removeClass("disabled"),b.data.$proxy.removeClass("disabled"))}}J===!1&&(b.data.canDragDrop=!1,b.data.$bar.addClass("disabled"),b.data.$proxy.addClass("disabled"))}else b.data.$bar.hide()}}).on("mouseup.alopexgridheaderdragdropevent"+d.key+d.eventns,i,function(b){function c(a){return null!==a&&void 0!==a}var d=b.data.self,e=b.data.headercell,f=b.data.columnIndex;if(hb.off(".alopexgridheaderdragdropevent"+d.key),d._enableHeaderSelect(!!d.option.enableHeaderSelect),b.data.$proxy&&(b.data.$proxy.remove(),delete b.data.$proxy),b.data.$bar&&(b.data.$bar.remove(),delete b.data.$bar),b.data.scrollTimer&&(clearInterval(b.data.scrollTimer),b.data.scrollTimer=null),b.data.canDragDrop!==!1){if(b.data.toHideArea){if(null===e&&void 0===e)return;var g=d.state.columnIndexToMapping[f];return d.state.hiddenColumnIdxArr.push(f),d.state.hiddenColumnIndexToMapping[f]=g,void d.hideCol(f)}if(null!==b.data.atColumnIndex){d._triggerGridEvent("headerDragDrop",{dropColumn:b.data.columnIndex,dropColumnMapping:b.data.dragColumnMapping,leftColumn:b.data.leftColumn,leftColumnMapping:b.data.leftColumnMapping,rightColumn:b.data.rightColumn,rightColumnMapping:b.data.rightColumnMapping});var h=b.data.atColumnIndex,i=a.inArray(f,d.state.visibleColumnIndexArr),j=a.inArray(h,d.state.visibleColumnIndexArr);if(f===h)return;if(b.data.after&&i===j+1)return;if(!b.data.after&&i+1===j)return;var g=d.state.columnIndexToMapping[f],k=d.state.columnIndexToMapping[h];if(d.option.grouping&&d.option.grouping.by.length>0&&d.option.grouping.useDragDropBetweenGroups===!1&&d.option.grouping.useGroupColumnRearrange===!0&&b.data.groupDragDrop===!1){var l=d.state.groupingColumnIndexToMapping[f],m=d._getColumnByKey(k.key);if(null!==l&&void 0!==l){var n=d.option.grouping.by,o=n[n.length-1],p=(d._getColumnByKey(o)||{}).columnIndex,q=a.inArray(p,d.state.visibleColumnIndexArr),r=d.state.visibleColumnIndexArr[q+1],s=d.state.columnIndexToKeyMap[r],t=a.inArray(g.key,d.option.grouping.by);d.option.grouping.by.splice(t,1),d.option.grouping.by.push(s),d.state.sortingRequired=!0}else if(m){var u=a.inArray(k.key,d.option.grouping.by);d.option.grouping.by.splice(u,0,g.key),d.option.grouping.by.splice(d.option.grouping.by.length-1,1),d.state.sortingRequired=!0}}if(null!==d.option.autoColumnIndex&&void 0!==d.option.autoColumnIndex&&d.option.autoColumnIndex===!0)if(f>h){b.data.after&&(j+=1,h=d.state.visibleColumnIndexArr[j]);for(var v=h;f>v;v++)k=d.state.columnIndexToMapping[v],k.columnIndex=v+1;g.columnIndex=h,d.option.columnMapping.splice(h,0,g),d.option.columnMapping.splice(f+1,1)}else{b.data.after||(j-=1,h=d.state.visibleColumnIndexArr[j]);for(var v=f+1;h+1>v;v++)k=d.state.columnIndexToMapping[v],k.columnIndex=v-1;g.columnIndex=h,d.option.columnMapping.splice(h+1,0,g),d.option.columnMapping.splice(f,1)}else{if(i>j){b.data.after&&(j+=1,h=d.state.visibleColumnIndexArr[j]);for(var w,v=j;i>v;v++)w=d.state.columnIndexArr[v],k=d.state.columnIndexToMapping[w],k.columnIndex=d.state.columnIndexArr[v+1]}else{b.data.after||(j-=1,h=d.state.visibleColumnIndexArr[j]);for(var w,v=i+1;j+1>v;v++)w=d.state.columnIndexArr[v],k=d.state.columnIndexToMapping[w],k.columnIndex=d.state.columnIndexArr[v-1]}g.columnIndex=h}if(b.data.groupDragDrop){for(var x,y=d.option.grouping.by,z=[],A=0,B=y.length;B>A;A++)x=d._getColumnByKey(y[A]),z[x.columnIndex]=x.key;d.option.grouping.by=z.filter(c),d.state.sortingRequired=!0}d.updateOption(),d._triggerGridEvent("headerDragDropEnd",{dropColumn:b.data.columnIndex,dropColumnMapping:b.data.dragColumnMapping,leftColumn:b.data.leftColumn,leftColumnMapping:b.data.leftColumnMapping,rightColumn:b.data.rightColumn,rightColumnMapping:b.data.rightColumnMapping})}}})},tb.prototype._rowDragStart=function(b){var c=this;b=a.event.fix(b);var d=a(b.target).closest(".bodycell"),e=d.attr("data-alopexgrid-dataid"),f=c._dataGetByIndex({id:e});if(f){var g=b.pageX,i=b.pageY;b.preventDefault();var j={};j.self=c,j.wrapperY=c.$wrapper.offset().top,j.$proxy=null,j.$bar=null,j.dragdata=[f],j.atDataIndex=null,j.after=!1,j.scrollTimer=null,j.lastHoverGrid=null,j.prevX=g,j.prevY=i,j.treeInfo=c.state.treeInfo||null,hb.off(".alopexgriddragdropevent"+c.key),hb.on("keydown.alopexgriddragdropevent"+c.key+c.eventns,j,function(a){var b=a.keyCode;switch(b){case 27:hb.off(".alopexgriddragdropevent"+c.key),a.data.$proxy&&(a.data.$proxy.remove(),delete a.data.$proxy),a.data.$bar&&(a.data.$bar.remove(),delete a.data.$bar),a.data.scrollTimer&&(clearInterval(a.data.scrollTimer),a.data.scrollTimer=null),null!==a.data.atColumnIndex&&(a.data.atColumnIndex=null)}}),hb.on("mousemove.alopexgriddragdropevent"+c.key+c.eventns,j,function(b){if(b.data.prevX!==b.pageX||b.data.prevY!==b.pageY){b.data.prevX=b.pageX,b.data.prevY=b.pageY;var c=b.data.self;b.preventDefault(),h();var d=b.data.$proxy,e=b.data.$bar;if(null===d||void 0===d){d=a("<div>"),d.addClass(_a+" alopexgrid-proxy alopexgrid-dragdrop-row alopexgrid-refer-"+c.key);for(var f=a('<div class="'+_a+'">').css("overflow","visible"),g=a('<div class="wrapper">').css("overflow","visible"),i=c.state.refreshbodycell.renderedColumnMappingList,j=0,k=0,l=b.data.dragdata.length;l>k;k++)for(var m=b.data.dragdata[k],n=0,o=i.length;o>n;n++){var p=i[n],q=a(c._createCell(m,p));q.css({top:"0px",left:j+"px",height:c.state.rowHeight+"px",width:parseInt(p.width)+"px"}),j+=parseInt(p.width),q.appendTo(g)}f.append(g),d.append(f),d.appendTo(document.body),b.data.$proxy=d}(null===e||void 0===e)&&(e=a("<div>"),e.addClass("alopexgrid-dragdrop-row-indicator"),b.data.$bar=e),b.data.$bar.prependTo(c.$wrapper),d.css({top:b.pageY+10+"px",left:b.pageX-5+"px"}),b.data.scrollTimer&&(clearInterval(b.data.scrollTimer),b.data.scrollTimer=null),b.data.treeExpandTimer&&(clearTimeout(b.data.treeExpandTimer),b.data.treeExpandTimer=null);var r=c.state.refreshbodycell.bodyCellStartY,s=c.state.refreshbodycell.bodyCellEndY;if(b.data.atRowIndex=null,b.data.atDataIndex=null,b.pageY<=b.data.wrapperY+r){var t=Math.ceil(Math.abs(b.pageY-(b.data.wrapperY+r))/25),u=function(){c.state.scrollyMoveable&&c._scrollUpEvent(t)};u(),b.data.scrollTimer=setInterval(u,100)}else if(b.pageY>=b.data.wrapperY+s){var t=Math.ceil(Math.abs(b.pageY-(b.data.wrapperY+s))/25),u=function(){c.state.scrollyMoveable&&c._scrollDownEvent(t)};u(),b.data.scrollTimer=setInterval(u,100)}else for(var v=0,o=c.state.refreshbodycell.renderedDataList.length;o>v;v++){var w=c.state.refreshbodycell.renderedDataList[v],x=w._index.data,y=c.state.refreshbodycell.bodyCellPositionY[v],z=y+b.data.wrapperY,A=c.state.rowHeightMapByDataId[w._index.id]||c.state.rowHeight;if(b.pageY>=z&&b.pageY<=z+A){b.data.atDataIndex=x,b.data.atRowIndex=w._index.row;var B=Math.abs(b.pageY-z),C=Math.abs(b.pageY-(z+A)),D=B-C;if(D>0?(b.data.after=!0,jb?b.data.$bar.css("top",y+A+"px"):b.data.$bar.css("transform","translateY("+(y+A)+"px)")):(b.data.after=!1,jb?b.data.$bar.css("top",y+"px"):b.data.$bar.css("transform","translateY("+y+"px)")),b.data.treeInfo){var E=A-Math.min(2*c.state.rowHeight/3,2*A/3);b.data.$bar.css("height",""),b.data.center=Math.abs(D)<E,b.data.center?(jb?b.data.$bar.css("top",y+"px"):b.data.$bar.css("transform","translateY("+y+"px)"),b.data.$bar.css("height",A+"px"),b.data.$bar.addClass("alopexgrid-dragdrop-parentrow-indicator"),c._isTreeLeafNode(w)||c._isTreeNodeExpanded(w)||(b.data.treeExpandTimer=setTimeout(function(){c.expandTreeNode(w)},c.option.tree.dragdropExpandDelay||0))):b.data.$bar.removeClass("alopexgrid-dragdrop-parentrow-indicator");var F=null;if(b.data.center)F=c.state.data[b.data.atDataIndex];else{var G=b.data.atRowIndex;b.data.after&&(G+=1);var H=c._dataGetByIndex({row:G-1}),I=c._dataGetByIndex({row:G}),J=c._getTreeNodeDepth(H),K=c._getTreeNodeDepth(I);F=null,H&&(F=c.treeGetParent(H)[0],K>J&&(F=H))}var w=b.data.dragdata[0];F&&(w===F||c._isTreeNodeIncludeChild(w,F))?(b.data.$bar.addClass("alopexgrid-dragdrop-not-allowed"),b.data.$proxy.addClass("alopexgrid-dragdrop-not-allowed")):(b.data.$bar.removeClass("alopexgrid-dragdrop-not-allowed"),b.data.$proxy.removeClass("alopexgrid-dragdrop-not-allowed"))}break}}null!==b.data.atDataIndex?b.data.$bar.show():b.data.$bar.hide()}}).on("mouseup.alopexgriddragdropevent"+c.key+c.eventns,j,function(a){var b=a.data.self;if(hb.off(".alopexgriddragdropevent"+b.key),a.data.$proxy&&(a.data.$proxy.remove(),delete a.data.$proxy),a.data.$bar&&(a.data.$bar.remove(),delete a.data.$bar),a.data.scrollTimer&&(clearInterval(a.data.scrollTimer),a.data.scrollTimer=null),a.data.center&&null!=a.data.atDataIndex){var c=b.state.data[a.data.atDataIndex],d=a.data.dragdata[0];if(c&&(d===c||b._isTreeNodeIncludeChild(d,c)))return;b.treeDataMove(d,c)}else if(null!==a.data.atDataIndex){var e=a.data.atDataIndex,f=a.data.atRowIndex,d=a.data.dragdata[0],g=a.data.after;if(g&&(e+=1,f+=1),a.data.treeInfo){var h=b._dataGetByIndex({row:f-1}),i=b._dataGetByIndex({row:f}),j=b._getTreeNodeDepth(h),k=b._getTreeNodeDepth(i),c=null;if(h&&(c=b.treeGetParent(h)[0],k>j&&(c=h)),c&&(d===c||b._isTreeNodeIncludeChild(d,c)))return;return void b.treeDataMove(d,c,{_index:{row:f}})}var l=d._index.data,m=l>e?l+1:l;b.state.data.splice(e,0,d),b.state.data.splice(m,1),oa(b),b.sortClear(),b.calcAndRedraw()}})}},tb.prototype._rowResizeStart=function(b,c,d){if(b&&b.type){var e=this;if(!e.state.rowResizing&&(b=a.event.fix(b),1===b.which&&"dblclick"!==b.type)){e.state.$rowResizeBar&&(e.state.$rowResizeBar.remove(),e.state.$rowResizeBar=null),e.state.rowHeightMapByDataId=e.state.rowHeightMapByDataId||{};var f=a(b.target),g=f.closest(".bodycell"),h=e._dataGetByIndex({row:c}),i=e.state.columnIndexToMapping[d],j=h._index.id,k=e.state.groupRowspanned&&i.rowspan?e._getGroupingRangeByMapping(h._index.data,i):null;if(k)for(var l=k.member.length;l>0;)if(h=k.member[--l],null!=h._index.row&&e.state.refreshbodycell&&e.state.refreshbodycell.renderedDataIdMap&&e.state.refreshbodycell.renderedDataIdMap[h._index.id]){j=h._index.id,c=h._index.row;break}var m=b.pageY,n=g.offset().top-e.$wrapper.offset().top+g.height(),o=a('<div class="resize-align row-resize-align">');jb?o.css("top",n+"px"):o.css("transform","translateY("+n+"px)");var p=o.clone();p.addClass("resize-align-reference"),e.$wrapper.append(p,o),e.state.$rowResizeBar=o;var q={self:this,$bar:o,$pos:p,startPageY:m,startTop:n,rowIndex:c,dataId:j,$cell:g},r=e.state.rowHeightMapByDataId[j]||e.state.rowHeight;e._triggerGridEvent("UIRowResizeStart",{row:c,height:r}),a(document.body).on("mousemove.alopexgridRowResize."+e.key+e.eventns,q,J).on("mouseup.alopexgridRowResize."+e.key+e.eventns,q,K)}}},tb.prototype._columnResizeStart=function(b,c){if(b&&b.type){b=a.event.fix(b),b.preventDefault();var d=this,e=a(b.target),f=a(b.target).closest(".headercell"),g=f[0],h=a('<div class="resize-align column-resize-align">')[0],i=parseInt(g.style.left)+parseInt(g.style.width)+"px",j=(b.target.offsetWidth,d.state.columnIndexToMapping[c]),k={self:this,bar:h,prevX:0,totalMoveAmount:0,columnIndex:c,mapping:j};e.siblings(".resizing-handle").length>0&&(i=f.position().left+e.position().left+e.width()+"px"),h.style.top="0px",h.style.left=i,h.style.height=parseInt(1.5*d.state.wrapperHeight)+"px",d.$wrapper[0].appendChild(h),d.state.resizing=!0,k.prevX=parseInt(b.pageX),d._triggerGridEvent("UIColumnResizeStart",{mapping:j,width:parseInt(j.width),fitWidth:d.state.columnFitWidthById[j.id]}),hb.on("mousemove.alopexgridresizeevent"+d.eventns+d.key,k,L).on("mouseup.alopexgridresizeevent"+d.eventns+d.key,k,M)}},tb.prototype._isColumnSorted=function(a){var b=this;if(b.state.sortingInfo&&b.state.sortingInfo.length)for(var c=0,d=b.state.sortingInfo.length;d>c;c++){var e=b.state.columnMappingMapById[b.state.sortingInfo[c].mappingId];if("number"==typeof a&&e.columnIndex===a||"string"==typeof a&&e.key===a||a&&"object"==typeof a&&a.id===e.id)return b.state.sortingInfo[c]}return!1},tb.prototype.sortToggle=function(a,b){var c=this,d=null;if(c.state.sortingInfo&&c.state.sortingInfo.length)for(var e=0,f=c.state.sortingInfo.length;f>e;e++){var g=c.state.columnMappingMapById[c.state.sortingInfo[e].mappingId];if("number"==typeof a&&g.columnIndex===a||"string"==typeof a&&g.key===a){d=c.state.sortingInfo[e];break}}var h=null;if(!d){var i=c._columnIndexKeyToMappingList(a)[0];if(i){var j={};j.mappingId=i.id,h=j}}var k=d||h;if(k){var l=b?b:"asc"===k.sortingDirection?"desc":"asc",m={},g=c.state.columnMappingMapById[k.mappingId];if(m.sortingKey=g.key,m.sortingColumn=g.columnIndex,m.sortingDirection=l,m.mapping=g,m.pageinfo=c.pageInfo(),m.sortingInfo=c.sortingInfo(),c._triggerGridEvent("sortToggle",m)===!1)return;k.sortingDirection=l,h&&(c.state.sortingInfo=c.state.sortingInfo||[],c.state.sortingInfo.push(h)),c.showProgress(function(){c.calcAndRedraw();var a={},b=c.state.columnMappingMapById[k.mappingId];a.sortingKey=b.key,a.sortingColumn=b.columnIndex,a.sortingDirection=l,a.mapping=b,a.pageinfo=c.pageInfo(),a.sortingInfo=c.sortingInfo(),c._triggerGridEvent("sortToggleEnd",a)})}},tb.prototype._generateSortingInfo=function(b,c){var d=this,e=[];if("number"==typeof b||"string"==typeof b){var f=d._columnIndexKeyToMappingList(b)[0];if(f){var g={};g.mappingId=f.id,g.sortingDirection=c||"asc",e.push(g)}}else if(a.isArray(b))for(var h=0,i=b.length;i>h;h++){var j=b[h].sortingColumn;if(void 0!==j){var f=d._columnIndexKeyToMappingList(j)[0];if(f){var g={};g.mappingId=f.id,g.sortingDirection=b[h].sortingDirection||"asc",e.push(g)}}}return e},tb.prototype._setSortingInfo=function(a,b){var c=this,d=c._generateSortingInfo(a,b);c.state.sortingInfo=d||[]},tb.prototype.dataSort=function(b,c){var d=this;if(a.isFunction(b))return d.sortClear(),d.state.data.sort(b),void d.calcAndRedraw();d.sortClear();var e=d._generateSortingInfo(b,c);d.state.sortingInfo=e||[],d.calcAndRedraw()},tb.prototype._focusInfo=function(){var a=this,b=a.$focusfixture.prop("renderedIndex"),c=a.$focusfixture.prop("columnIndex"),d=null,e=null;return void 0===b||null===b?b=null:d=a._getRenderedDataFromRenderedIndex(b),void 0===c||null===c?c=null:e=a.state.columnIndexToMapping[c]||null,{row:b,column:c,data:d,mapping:e}},tb.prototype._focusRestore=function(a){var b=this;a&&j(a.row)&&j(a.column)&&(Qa(b,a.row,a.column),La(b,a.row,a.column))},tb.prototype.focusInfo=function(){var b=this,c={},d=a(document.activeElement),e=d.closest(b.$root).length?d.closest(".alopexgrid-cell"):null,f=b.$focusfixture.prop("renderedIndex"),g=b.$focusfixture.prop("columnIndex");return c.cellFocus={},b.option.cellSelectable&&null!=f&&null!=g?(c.cellFocus.row=f,c.cellFocus.columnIndex=g,c.cellFocus.data=b._getRenderedDataFromRenderedIndex(f)||null,c.cellFocus.mapping=b.state.columnIndexToMapping[g]||null,c.cellFocus.rowSelectionFrom=b.state.cellSelection.topBoundaryRenderedIndex,c.cellFocus.rowSelectionTo=b.state.cellSelection.bottomBoundaryRenderedIndex,c.cellFocus.columnSelectionFrom=b.state.cellSelection.leftBoundaryColumnIndex,c.cellFocus.columnSelectionTo=b.state.cellSelection.rightBoundaryColumnIndex):c.cellFocus=null,e&&e.length&&tb.regex.inputControls.test(document.activeElement.tagName)?(c.inputFocus={},c.inputFocus.row=parseInt(e.attr("data-alopexgrid-rowindex")),c.inputFocus.columnIndex=parseInt(e.attr("data-alopexgrid-columnindex")),c.inputFocus.data=b._getRenderedDataFromRenderedIndex(c.inputFocus.row)||null,c.inputFocus.mapping=b.state.columnIndexToMapping[c.inputFocus.columnIndex]||null,c.inputFocus.caretPostion=tb.regex.caretAvailableType.test(document.activeElement.type)?P(document.activeElement):null,c.inputFocus.tagName=document.activeElement.tagName,c.inputFocus.tagOrder=e.find(c.inputFocus.tagName).index(d)):c.inputFocus=null,c},tb.prototype.focusRestore=function(a){var b=this;if(a&&(a.cellFocus&&(null==a.cellFocus.rowSelectionFrom||null==a.cellFocus.columnSelectionFrom||null==a.cellFocus.rowSelectionTo||null==a.cellFocus.columnSelectionTo||b.option.disableCellSelectionRestore||a.disableCellSelectionRestore?Ba(b,a.cellFocus.row,a.cellFocus.columnIndex,a.cellFocus.row,a.cellFocus.columnIndex):Ba(b,a.cellFocus.rowSelectionFrom,a.cellFocus.columnSelectionFrom,a.cellFocus.rowSelectionTo,a.cellFocus.columnSelectionTo,a.cellFocus.row,a.cellFocus.columnIndex),La(b,a.cellFocus.row,a.cellFocus.columnIndex)),a.inputFocus)){var c=b.cellElementGet({_index:{row:a.inputFocus.row}},a.inputFocus.columnIndex),d=c.find(a.inputFocus.tagName).eq(a.inputFocus.tagOrder).focus().get(0);if(d&&null!=a.inputFocus.caretPostion&&tb.regex.caretAvailableType.test(d.type)){var e;a.inputFocus.caretPostion;O(d,a.inputFocus.caretPostion,null!=e?e:null)}}},tb.prototype.focusCell=function(b,c,d){var e=this,f=e.cellElementGet(b,c);if(!f||!f.length){var g=e._dataGet(b)[0],b={_index:{row:g._index.row}},h=c;if("string"==typeof h){var i=e._getColumnByKey(h);i&&(h=i.columnIndex)}(h<e.state.renderFromColumnIndex||h>e.state.renderToColumnIndex)&&(b._index.column=h),e.dataScroll(b),f=e.cellElementGet(b,c)}return f&&f.length&&(f.eq(0).mousedown().mouseup(),a.isFunction(d)?d.call(e.$root,f):null),f},tb.prototype._getContentFitRowHeight=function(b){var c=this,d=c._dataGetByIndex(b&&b._index?b._index:{row:b});if(!d)return null;for(var e=c.state.rowHeight,f=0,g=c.state.visibleColumnMappingList.length;g>f;f++){var h=c.state.visibleColumnMappingList[f],i=parseInt(h.width),j=c.state.rowHeight,k=c._createCell(d,h);k.style.overflow="visible",k.style.height="auto",k.style.width=i+"px",k.style.left=2*-i+"px",k.style.top=2*-j+"px",c.$wrapper[0].appendChild(k);var l=k.scrollHeight;l&&!isNaN(Number(l))&&(e=Math.max(e,l)),a(k).remove()}return e||null},tb.prototype._setRowHeight=function(a,b){var c=this;if("content"===b&&c.$wrapper.is(":visible")&&(b=c._getContentFitRowHeight(a)),null!=b&&b>0){var d=c._dataGetByIndex(a&&a._index?a._index:{row:a});c.state.rowHeightMapByDataId[d._index.id]=parseInt(b)}},tb.prototype.setRowHeight=function(b,c){if(null!=c||!a.isNumeric(b)&&"content"!==b||(c=b,b={}),null!=c){var d=this,e=d._dataGet(b);if(e&&e.length){for(var f=0,g=e.length;g>f;f++){var h=e[f];d._setRowHeight(h,c)}d.redraw()}}},tb.prototype.cellElementGet=function(b,c,d){var e=this;if(arguments.length&&arguments[arguments.length-1]===!0&&(d=!0),!jb&&!d&&!e.state.bodyCellList.length)return a();if(!arguments.length)return a(i(e.state.bodyCellList));for(var f=e._dataGet(b),g=e._columnIndexKeyToMappingList(c),h=[],j=0,k=f.length;k>j;j++){var l=f[j];if(!e.state.refreshbodycell||!e.state.refreshbodycell.renderedDataIdMap||e.state.refreshbodycell.renderedDataIdMap[l._index.id])for(var m={},n=0,o=g.length;o>n;n++){var p=g[n],q=e._getMultiParentColumnIndex(p);if(!m[q]){m[q]=!0;var r=e._cellElementGet(l,p);if(r?r.length&&(h=h.concat(r)):d===!0&&(r=e._createCell(l,p),r&&h.push(r)),e.state.groupRowspanned&&p.rowspan){var s=!1;if(p.rowspan===!0&&e.state.groupingKeyMap.hasOwnProperty(p.key)?s=!0:"object"==typeof p.rowspan&&"string"==typeof p.rowspan.by&&e.state.groupingKeyMap.hasOwnProperty(p.rowspan.by)&&(s=!0),s){var t=e._getGroupingRangeByMapping(l._index.data,p);if(t)for(var u=t.from;u<=t.to;u++)u!==l._index.data&&(r=e._cellElementGet(e.state.data[u],p),r&&r.length&&(h=h.concat(r)))}}}}}return a(h)},tb.prototype._cellElementGet=function(a,b){var c=this,d=c.state.dataIdToRowIndexMap[a._index.id],e=[];b=c._getMultiParentMapping(b);for(var f in d){var g=c._cellIdFromRowIndex(f,b.columnIndex),h=document.getElementById(g);h&&e.push(h)}return e},tb.prototype.rowElementGet=function(a){return this.cellElementGet(a,null)},tb.prototype.refreshRow=function(a,b){var c=this,d=c._dataGet(a);if(d&&d.length)for(var e=0,f=d.length;f>e;e++){var g=d[e];g&&c.refreshCell(g)}},tb.prototype.refreshCell=function(b,c){for(var d=this,e=d._dataGet(b),f=d._columnIndexKeyToMappingList(c),g=[],h=0,i=e.length;i>h;h++)for(var j=e[h],k=0,l=f.length;l>k;k++){var m=f[k],n=d._refreshCell(j,m);n&&n.length&&(g=g.concat(n))}return d._refreshBoard(),a(g)},tb.prototype._refreshCell=function(b,c){if(b&&c){var d=this,e=d.state.dataIdToRowIndexMap[b._index.id],f=[];c=d._getMultiParentMapping(c);for(var g in e){var i=d._cellIdFromRowIndex(parseInt(g),c.columnIndex),j=document.getElementById(i);if(j){var k=a(j),l=k.hasClass("prevrow-selected"),m=k.hasClass("nextrow-selected"),n=k.css("width"),o=k.css("height"),p=k.css("top"),q=k.css("left");d._createCell(b,c,j),k.css({width:n,height:o,top:p,left:q}),k[l?"addClass":"removeClass"]("prevrow-selected"),k[m?"addClass":"removeClass"]("nextrow-selected"),f.push(j)}}if(a.isFunction(window.getSelection)){var r=window.getSelection();if(r.containsNode)for(var s=0,q=f.length;q>s;s++)if(r.containsNode(f[s])){h();break}}return f}},tb.prototype._setCursorUnderPointer=function(b,c,d){if(h(),b&&(null==c||null==d))return void b.find("input,select,textarea").focus();try{var e=b.find("input,select,textarea");if(e.length){var f=Number.POSITIVE_INFINITY,g=e.get(0);e.each(function(b,e){var h=a(e),i=R(h,c,d);f>=i&&(g=h,f=i)}),e=g;var i=e.prop("tagName");if("SELECT"===i)e.focus();else{var j=null,k=0,l=-1,m=-1;do{if(j=N(e[0],k),j.left>c){Math.abs(l-1-c)<=Math.abs(j.left-1-c)&&(k-=1);break}if(l===j.left&&m===j.top)break;l=j.left,m=j.top,k++}while(j);O(e[0],k)}}}catch(n){var o=b.find("input,select,textarea");"radio"===o.prop("type")?o.filter(":checked").focus():o.focus()}},tb.prototype._triggerGridEvent=function(b,c,d){var e=this,f=null;try{f=new Event(b,{bubbles:!0,cancelable:!0})}catch(g){jb?f=a.Event(b):(f=document.createEvent("Event"),f.initEvent(b,!0,!0))}if(f.alopexgrid={},f.alopexgrid.$grid=e.$root,c&&"object"==typeof c)for(var h in c)c.hasOwnProperty(h)&&(f.alopexgrid[h]=c[h]);var i=e.$root?e.$root:d;if(d){var j=a(d);d.nodeType?(i=j,f.alopexgrid.$cell=j.closest(".alopexgrid-cell")):d.jquery&&d.length&&(i=d.eq(0),f.alopexgrid.$cell=j.closest(".alopexgrid-cell"))}return f.alopexgrid.$cell&&!f.alopexgrid.$cell.length?delete f.alopexgrid.$cell:f.alopexgrid.$cell&&f.alopexgrid.$cell.length&&(f.alopexgrid.cell=f.alopexgrid.$cell[0]),i?i.nodeType&&(i=a(i)):i=e.$root,e.root===i[0]||a.contains(e.root,i[0])||(i=e.$root),jb?i.trigger(f):i[0].dispatchEvent(f)},tb.prototype._viewEventRemove=function(){var a=this,b=".alopexgridViewEventUpdate";hb.off(b+a.key),gb.off(b+a.key),a.$root.off(b),a.$title.off(b),a.$pager.off(b),a.$wrapper.off(b),a.$focusfixture.off(b),a.$pager.off(b)},tb.prototype.viewEventUpdate=function(b){function c(b){var c=b.data.self,d=parseInt(b.currentTarget.getAttribute("data-alopexgrid-dataindex")),e=parseInt(b.currentTarget.getAttribute("data-alopexgrid-columnindex")),f=S(c,e),g=a.extend(!0,{},c.option.getEditingDataOnEvent?c._getRecentData(d):c.state.data[d]);return f&&f.key&&(g._key=f.key),f&&f.hasOwnProperty("columnIndex")&&(g._column=f.columnIndex),!isNaN(e)&&e>=0&&g&&g._index&&(g._index.column=e),g}function d(a){var b=a.data.self,d=c(a),e=a.data.handle,f="function"==typeof e?[e]:e;for(var g in f){var h=f[g];h.call(b,d,a)}}function e(a){if(a.state.rowInlineEditPool.length)for(var b=a.state.rowInlineEditPool.length-1;b>=0;b--){var c=a.state.rowInlineEditPool[b],d=a._dataGetByIndex({id:c});d&&d._state.editing&&"click"!==B||a.state.rowInlineEditPool.splice(b,1)}}function g(a,b){if(!b||!b._index||!b._index.id)return!1;for(var c=0,d=a.state.rowInlineEditPool.length;d>c;c++){var e=a.state.rowInlineEditPool[c];if(b._index.id===e)return!0}return!1}function i(a,b){if(!b||!b._index||!b._index.id)return!1;if(e(a),!a.state.rowInlineEditPool.length&&!g(a,b)){
if(a.startEdit(b)===!1)return!1;a.state.rowInlineEditPool.push(b._index.id),h(),a.option.disableRowInlineEditEvent||a._triggerGridEvent("rowInlineEditStart",{data:b})}}function j(a){var b=[];if(a.option.rowInlineEditEndAll)b=a._dataGet({_state:{editing:!0}}),a.endEdit(b);else for(var c=0,d=a.state.rowInlineEditPool.length;d>c;c++){var f=a.state.rowInlineEditPool[c],g=a._dataGetByIndex({id:f});if(g&&g._state.editing){if(a.endEdit(g)===!1)return e(a),!1;g._state.editing||b.push(g)}}if(e(a),h(),!a.option.disableRowInlineEditEvent)for(var c=0,d=b.length;d>c;c++)a._triggerGridEvent("rowInlineEditEnd",{data:b[c]})}function k(a,b){return a.state.renderTargetDataList[b.getAttribute("data-alopexgrid-rowindex")]}function l(a,b){return a.state.columnIndexToMapping[b.getAttribute("data-alopexgrid-columnindex")]}function m(a,b,c){if(!c.editable)return null;if("function"==typeof c.editable){var d=b._state.editing&&b._state.editing.hasOwnProperty(c.columnIndex)?b._state.editing[c.columnIndex]:b[c.key],e=c.editable.call(a,d,b,c.editable,c,a);if(e&&"object"==typeof e)return e.type||null}else if(c.editable===!0)return"text";return c.editable.type||null}function n(a,b,c){for(var d=0,e=c.length;e>d;d++)if(c[d][0]._index.id===a._index.id&&c[d][1].columnIndex===b.columnIndex)return!0;return!1}function o(a,b){for(var c=[],d=!1,e=!1,f=a.option.grouping&&a.option.grouping.useGrouping&&a.option.grouping.by&&a.option.grouping.by.length,g=!1,h=b.length-1;h>=0;h--){var i=b[h],j=i[0],k=i[1],l=j[k.key];if(a._isEditingCell(j._index.row,k.columnIndex)){if(a._endCellEdit(j,k)===!1){g=!0;continue}var m=j[k.key];if(c.push(i),a.state.sortingInfoKeyMap[k.key]&&l!==m&&(e=!0),f&&!d&&l!==m){var n=a._getGroupingRangeByMapping(j._index.data,k);n&&(d=!0)}}b.splice(h,1)}if(c.length){if(a.option.sortClearOnEdit&&e&&a.sortClear(),d||!a.option.sortClearOnEdit&&e)a.calcAndRedraw();else for(var h=0,o=c.length;o>h;h++)a.refreshRow(c[h]);a._hasFooter()&&a._refreshFooterCells(!0);for(var h=0,o=c.length;o>h;h++)a._triggerGridEvent("cellInlineEditEnd",{data:c[h][0],mapping:c[h][1]})}return g===!0?!1:void 0}function p(a,b,c,d){if(a._startCellEdit(b,c),a._isEditingCell(b,c)&&(a._refreshCell(b,c),d.push([b,c]),a._triggerGridEvent("cellInlineEditStart",{data:b,mapping:c}),a.state.groupRowspanned&&a.option.rowspanGroupEdit&&c.rowspan)){var e=a._getGroupingRangeByMapping(b._index.data,c);if(e)for(var f=e.from;f<=e.to;f++)f!==b._index.data&&(a._startCellEdit(a.state.data[f],c),a._refreshCell(a.state.data[f],c),d.push([a.state.data[f],c]),a._triggerGridEvent("cellInlineEditStart",{data:a.state.data[f],mapping:c}))}}function q(b,c){var d=c[c.length-1];if(d){var e=d[0],f=d[1];b.option.cellSelectable&&Na(b,e._index.row,f.columnIndex);var g=b._cellElementGet(e,f);setTimeout(function(){a(g).find("input,select,textarea").focus()},0)}}function r(b,c,d,e){var f=!1;if(d.instantInlineEditable){if(d.instantInlineEditable===!0)return!0;if("function"==typeof d.instantInlineEditable)return d.instantInlineEditable.call(b,c[d.key],c,d,b)}if(b.option.instantInlineEditType&&b.option.instantInlineEditType.length)for(var g=m(b,c,d),h=0,i=b.option.instantInlineEditType.length;i>h;h++){var j=b.option.instantInlineEditType[h],k=a.type(j);if("string"===k?(j=a.extend({},b.option.defaultInstantInlineEdit,{type:j}),k="object"):"object"===k&&(j=a.extend({},b.option.defaultInstantInlineEdit,j)),"object"===k&&!a.isEmptyObject(j)){if(j.type&&g!==j.type)continue;if(j.hasOwnProperty("columnIndex")){if("number"==typeof j.columnIndex&&d.columnIndex!==j.columnIndex)continue;if("string"==typeof j.columnIndex&&d.key!==j.columnIndex)continue}f=!0;break}if("function"===k&&j.call(b,c[d.key],c,d,e)===!0){f=!0;break}}return f}function s(b,c,d,e,f,g){if(!n(d,e,c)){var h=b._isEditingCell(d._index.row,e.columnIndex);if(!h){var i=o(b,c);if(i===!1&&b.option.restoreFocusOnInvalidInlineEdit===!0)return void q(b,c);var j=r(b,d,e,g);j&&setTimeout(function(){(i!==!1||b.option.allowStartCellInlineEditWithInvalid===!0)&&p(b,d,e,c),a.isFunction(f)&&f()},1)}}}var t=this,u=(t.$root,t.$wrapper),v=t.option,w=".alopexgridViewEventUpdate",x={self:t};t._viewEventRemove();var y=[{target:"cell",delegate:".bodycell"},{target:"headercell",delegate:".headercell"}];if(a.each(y,function(b,c){v.on&&v.on[c.target]&&a.each(v.on[c.target],function(a,b){u.on((t.option.eventMapping[a]||a)+w,c.delegate,{self:t,handle:b},d)})}),t.option.on&&t.option.on.focus&&"object"==typeof t.option.on.focus)for(var z in t.option.on.focus)"string"==typeof z&&t.$focusfixture.on(z+w,{self:t,handle:t.option.on.focus[z]},d);if(u.on("click"+w,".alopexgrid-input-wrapper",x,function(b){return"LABEL"===b.target.tagName?(a(b.target).find("input").click().change(),!1):void 0}),u.on("change"+w,".alopexgrid-input-wrapper",x,function(b){var c=a(this),d=c.children("input");c.siblings(".alopexgrid-input-wrapper").removeClass("checked");var e=d[0].checked,f=d[0].alopexgridChecked;"boolean"==typeof f&&e!==f&&(e=f),e?c.addClass("checked"):c.removeClass("checked")}),u.on("change"+w+" click"+w+" keyup"+w,".alopexgrid-cell.editingcell",x,function(a){a.data.self._updateEditingCell(this)}),t.option.disableHeaderClickSorting!==!0){var A="click";ib&&(A="touchstart"),u.on(A+w,".headercell.click-sortable",x,function(a){var b=a.target.className;if(!(b.indexOf("header-dragdrop-handle")>=0||b.indexOf("column-resizing-handle")>=0||b.indexOf("alopexgrid-treecolumn")>=0||b.indexOf("alopexgrid-nonsorting-handle")>=0||tb.renderUtil.isGridPointerActionProhibited(a.target))){var c=parseInt(this.getAttribute("data-alopexgrid-columnindex"));if(!isNaN(c)){var d=a.data.self._isColumnSorted(c),e=null;"touchstart"===a.originalEvent.type?a.originalEvent.touches&&a.originalEvent.touches.length<2&&a.data.self.sortClear():a.shiftKey||a.data.self.sortClear(),d&&("asc"===d.sortingDirection?e="desc":"desc"===d.sortingDirection&&(e="asc")),a.data.self.sortToggle(c,e);var f=a.data.self.state.columnIndexToMapping[c];t._triggerGridEvent("UISortToggle",{sortingKey:f.key,sortingColumn:c,sortingDirection:e,mapping:f,pageInfo:a.data.self.state.pagingInfo})}}})}var B=t.option.rowInlineEditStartEvent||"dblclick";v.rowInlineEdit?(t.state.rowInlineEditPool=t.state.rowInlineEditPool||[],u.on(B+w,x,function(b){var c=b.data.self,d=tb.parseEvent(b),f=d.data,k=d.mapping;if(f&&"INPUT"!==b.target.tagName&&"SELECT"!==b.target.tagName&&"TEXTAREA"!==b.target.tagName&&!tb.renderUtil.hasClass(b.target,"alopexgrid-input-wrapper")){var l=g(c,f);if(l){var m=j(c);if(m&&c.option.restoreFocusOnInvalidInlineEdit===!0){var n=c.state.rowInlineEditPool[c.state.rowInlineEditPool.length-1],o=c._dataGetByIndex({id:n});if(o){var p=c.rowElementGet(o);p.find("input,select,textarea").eq(-1).focus()}}}else if(c.option.rowInlineEditEndAll&&f._state&&f._state.editing)c.endEdit(f),e(c),h(),c.option.disableRowInlineEditEvent||c._triggerGridEvent("rowInlineEditEnd",{data:f});else{if(f._state&&f._state.editing)return;if(c.option.rowInlineEditEndAll){var q=c._dataGet({_state:{editing:!0}});c.endEdit(q);for(var r=0,s=q.length;s>r;r++)c._triggerGridEvent("rowInlineEditEnd",{data:q[r]})}if(i(c,f),f._index&&f._index.id){var t=c._cellElementGet(f,k);if(t&&t.length){var u=b.pageX,v=b.pageY;setTimeout(function(){c._setCursorUnderPointer(a(t[0]),u,v)},0)}}}}}),u.on("mousedown"+w,x,function(a){a.data.rowInlineClickTarget=a.target}),u.on("click"+w,x,function(b){var c=b.data.self,d=b.data.rowInlineClickTarget||b.target;if(!a.data(d,"alopexGridScrollbarElement")){var e=tb.parseEvent(b),f=e.data,h=g(c,f);if(c.option.rowInlineEditEndAll)f&&f._state&&f._state.editing||j(c);else if(f&&h)!f||f._index&&f._state||j(c);else if(f&&f._state&&f._state.editing){if(tb.regex.inputControls.test(b.target.tagName))return;j(c)}else j(c)}}),t.state.__rowInlineStartEdit=i,t.state.__rowInlineEndEdit=j):(t.state.__rowInlineStartEdit=null,t.state.__rowInlineEndEdit=null),v.rowClickSelect?t.$root.on("click"+w,".bodycell",x,function(b){var c=b.data.self;a(b.target);if(!tb.renderUtil.isGridPointerActionProhibited(b.target)){var d=!1;if(("INPUT"!==b.target.tagName||(d=tb.renderUtil.hasClass(b.target,"selector-column-input")))&&"SELECT"!==b.target.tagName&&"TEXTAREA"!==b.target.tagName){var e=parseInt(this.getAttribute("data-alopexgrid-columnindex")),f=parseInt(this.getAttribute("data-alopexgrid-rowindex")),g=c._getRenderedDataFromRenderedIndex(f),h=S(c,e);if(g&&h){var i=g._state.selected;if(!c.state.rowSingleSelect||c.option.rowSingleSelectAllowUnselect!==!1||!i){var j=this;if(c.rowSelect(j,"toggle")===!1)return!1;if(c.state.hasSelectorColumn&&i!==g._state.selected){var k={data:g,mapping:h,value:g._state.selected,prevValue:i};c._triggerGridEvent("cellValueEditing",k),c._triggerGridEvent("cellValueChanged",k)}}}}}}):t.$root.on("click"+w,".selector-column-input",x,function(b){var c=b.data.self,d=a(this).closest(".bodycell");if(d.length){a(b.target);if(!tb.renderUtil.isGridPointerActionProhibited(b.target)){var e=parseInt(d.attr("data-alopexgrid-columnindex")),f=parseInt(d.attr("data-alopexgrid-rowindex")),g=c._getRenderedDataFromRenderedIndex(f),h=S(c,e);if(g&&h){var i=g._state.selected;if(!c.state.rowSingleSelect||c.option.rowSingleSelectAllowUnselect!==!1||!i){if(c.rowSelect(d[0],"toggle")===!1)return!1;if(c.state.hasSelectorColumn&&i!==g._state.selected){var j={data:g,mapping:h,value:g._state.selected,prevValue:i};c._triggerGridEvent("cellValueEditing",j,d),c._triggerGridEvent("cellValueChanged",j,d)}}}}}}),t.option.disableFocusedState!==!0&&t.$root.on("mousedown"+w,".bodycell",x,function(a){a.data.self._rowFocus(this)}),t.option.cellPopupEdit&&t.option.cellPopupEdit.length>0&&t.$root.on("dblclick"+w,".bodycell",{self:t,$popupWrap:null},function(b){function c(b){var c=b.data.self,d=a(b.target);a.trim(d.attr("class"));c.state.activePopupTextarea.length>0&&d&&0===d.closest(".alopexgrid-celledit-popupwrap.alopexgrid-popupwrap, .alopexgrid-celledit-popuptextarea.alopexgrid-popuptextarea, .alopexgrid-celledit-popupbutton.alopexgrid-popupbutton").length&&(c.state.activePopupTextarea=[],a(document.body).off(".alopexgridCellPopupEdit"+c.key),b.data.$popupWrap&&(b.data.$popupWrap.remove(),b.data.$popupWrap=null))}var d=b.data.self,e=a(this);if(!e.hasClass("editingcell")){var f=parseInt(e.attr("data-alopexgrid-rowindex")),g=parseInt(e.attr("data-alopexgrid-columnindex"));if(a.isArray(d.option.cellPopupEdit))for(var h,i=[],j=0,k=d.option.cellPopupEdit.length;k>j;j++)h=d.option.cellPopupEdit[j],"string"==typeof h?i.push(d.state.columnKeyToIndexMap[h]):i.push(h);if(-1!==a.inArray(g,i)){null===d.state.activePopupTextarea||void 0===d.state.activePopupTextarea?d.state.activePopupTextarea=[]:d.state.activePopupTextarea.length>0&&(d.state.activePopupTextarea=[],a(document.body).off(".alopexgridCellPopupEdit"+d.key),b.data.$popupWrap&&(b.data.$popupWrap.remove(),b.data.$popupWrap=null));var l=d._getRenderedDataFromRenderedIndex(f),m=S(d,g),n=la(d,l,m);$target=a(b.target);var o=$target.offset(),p=o.top+b.offsetY,q=o.left+b.offsetX+10;b.data.$popupWrap&&(b.data.$popupWrap.remove(),b.data.$popupWrap=null);var r=a('<div tabIndex="0" class="'+_a+' alopexgrid-celledit-popupwrap alopexgrid-popupwrap" style="top:'+p+"px;left:"+q+'px;">');b.data.$popupWrap=r,r.on("keydown.alopexgridCellPopupEdit",{self:d,$popupWrap:r},function(b){var c=b.data.self;27===b.which&&(c.state.activePopupTextarea=[],a(document.body).off(".alopexgridCellPopupEdit"+c.key),b.data.$popupWrap&&(b.data.$popupWrap.remove(),b.data.$popupWrap=null))});var s=null;n||(s=a('<button class="alopexgrid-celledit-popupbutton alopexgrid-popupbutton save">'+tb.i18n("save")+"</button>"),s.on("click.alopexgridCellPopupEdit",{self:d,$popupWrap:r},function(b){var c=b.data.self;c.cellEdit(u.val(),{_index:{row:f}},g),c.state.activePopupTextarea=[],a(document.body).off(".alopexgridCellPopupEdit"+c.key),b.data.$popupWrap&&(b.data.$popupWrap.remove(),b.data.$popupWrap=null)}));var t=a('<button class="alopexgrid-celledit-popupbutton alopexgrid-popupbutton close">'+tb.i18n("close")+"</button>");t.on("click.alopexgridCellPopupEdit",{self:d,$popupWrap:r},function(b){var c=b.data.self;c.state.activePopupTextarea=[],a(document.body).off(".alopexgridCellPopupEdit"+c.key),b.data.$popupWrap&&(b.data.$popupWrap.remove(),b.data.$popupWrap=null)});var u=a('<textarea class="alopexgrid-celledit-popuptextarea alopexgrid-popuptextarea">'+$target.text()+"</textarea>");n&&u.attr("readonly",""),r.append(a('<div class="alopexgrid-popupbuttonarea">').append(t,s),u),d.state.activePopupTextarea.push(r),a(document.body).append(r),a(document.body).on("click.alopexgridCellPopupEdit"+d.key+d.eventns,{self:d,$popupWrap:r},c),setTimeout(function(){r.focus()},0)}}});var C=t.state.cellInlineEditData=t.state.cellInlineEditData||{self:t,pool:[]},D=t.state.cellInstantInlineEditData=t.state.cellInstantInlineEditData||{self:t,pool:[]};if(t.option.cellInlineEdit){var E=!(!t.option.instantInlineEditType||!t.option.instantInlineEditType.length);E=E||!!a.grep(t.option.columnMapping,function(a){return!!a.instantInlineEditable}).length,t.state.__cellInlineStartEdit=function(a,b){return p(t,a,b,C.pool)},t.state.__cellInlineEndEdit=function(){return o(t,C.pool)},E&&(t.$root.on("cellFocus"+w+" click"+w+" mouseenter"+w,".bodycell",D,function(a){var b=a.data.self,c=tb.parseEvent(a),d=c.data,e=c.mapping,f=a.data.pool;d&&d._index&&e&&s(b,f,d,e,null,a)}),t.$root.on("mouseenter"+w,".scrollbar,.headercell",D,function(a){o(a.data.self,a.data.pool)}),t.$root.on("mouseleave"+w,D,function(a){tb.regex.inputControls.test(a.target.tagName)||tb.renderUtil.hasClass(a.target,"alopexgrid-input-wrapper")||o(a.data.self,a.data.pool)})),t.$root.on("dataSet"+w+" dataEmpty"+w,function(a){C.pool=[],D.pool=[]});var F=t.option.cellInlineEditStartEvent||"dblclick";F=a.trim(F)+" ";var G=F.split(" ");if(F=a.trim(G.join(w+" ")),t.$root.on(F,".bodycell",C,function(b){var c=b.data.self,d=b.pageX,e=b.pageY,f=k(c,this),g=l(c,this);if(f&&g&&!c._isEditingCell(f._index.row,g.columnIndex)){var h=b.data.pool,i=o(c,h);return i===!1&&c.option.restoreFocusOnInvalidInlineEdit===!0?void q(c,h):c._isCellEditable(f,g)?void((i!==!1||c.option.allowStartCellInlineEditWithInvalid===!0)&&(p(c,f,g,h),setTimeout(function(){var b=c._cellElementGet(f,g);b?c._setCursorUnderPointer(a(b),d,e):La(c,f._index.row,g.columnIndex)},0))):void La(c,f._index.row,g.columnIndex)}}),a.inArray("cellFocus",G)<0&&a.inArray("mousedown",G)<0&&a.inArray("mouseup",G)<0&&a.inArray("click",G)<0&&t.$root.on("mousedown"+w,".bodycell",C,function(a){var b=a.data.self,c=(a.pageX,a.pageY,k(b,this)),d=l(b,this);if(c&&d&&!n(c,d,a.data.pool)){var e=a.data.pool,f=o(b,e);return f&&b.option.restoreFocusOnInvalidInlineEdit===!0?!1:void 0}}),t.option.cellInlineEditEndOtherThanBodycell&&t.$root.on("mousedown"+w,C,function(b){a(b.target).closest(".bodycell").length||o(b.data.self,b.data.pool)}),t.option.cellSelectable){u.on("change"+w,"select",x,function(b){var c=b.data.self,d=a(this).closest(".bodycell");if(d.length){var e=parseInt(d.attr("data-alopexgrid-rowindex")),f=parseInt(d.attr("data-alopexgrid-columnindex"));La(c,e,f)}});var H={37:"left",38:"up",39:"right",40:"down"};u.on("keydown"+w,"select",x,function(b){var c=b.data.self,d=a(this).closest(".bodycell");if(d.length){var e=parseInt(d.attr("data-alopexgrid-rowindex")),f=parseInt(d.attr("data-alopexgrid-columnindex"));if(32===b.which)return void this.focus();if(27===b.which)return La(c,e,f),!1;if(H[b.which])kb||(b.preventDefault(),c.$focusfixture.trigger(b));else if(13===b.which)return}})}t.$root.on("keydown"+w,".bodycell",x,function(b){var c=b.data.self,d=a(this),e=parseInt(d.attr("data-alopexgrid-rowindex")),f=parseInt(d.attr("data-alopexgrid-columnindex")),g=c._isEditingCell(e,f);if(g)if(27===b.which)setTimeout(function(){c.cancelCellEdit(),c.option.cellSelectable?La(c,e,f):null},0);else if(13===b.which||9===b.which){var h=13===b.which,i=9===b.which;if(h){if("SELECT"===b.target.tagName)return;if("TEXTAREA"===b.target.tagName&&!b.ctrlKey)return}c._updateEditingCell(d),i&&(c.option.cellSelectable?b.preventDefault():null),setTimeout(function(){var d=a.inArray("cellFocus",G)<0,g=d?o(c,C.pool):null,i=d?o(c,D.pool):null,j=g!==!1&&i!==!1;c.option.cellSelectable?c.option.cellInlineEditEndFocusMove?j||c.option.restoreFocusOnInvalidInlineEdit===!1?(La(c,e,f),h?Oa(c,b.shiftKey?-1:1,0):Oa(c,0,b.shiftKey?-1:1)):c.option.restoreFocusOnInvalidInlineEdit===!0&&(q(c,C.pool),q(c,D.pool)):j?(La(c,e,f),c._triggerGridEvent("cellFocus",{data:c.state.renderTargetDataList[e]||null,mapping:c.state.columnIndexToMapping[f]||null},a(document.getElementById(c._cellIdFromRowIndex(e,f))))):c.option.restoreFocusOnInvalidInlineEdit===!0&&(q(c,C.pool),q(c,D.pool)):c.option.restoreFocusOnInvalidInlineEdit===!0&&(q(c,C.pool),q(c,D.pool))},0)}})}if((t.option.rowInlineEdit||t.option.cellInlineEdit)&&t.option.endInlineEditByOuterClick){var I=a.isFunction(t.option.endInlineEditByOuterClick);hb.on("mousedown"+w+t.key+t.eventns,x,function(b){var c=b.data.self,d=!1;if(I){var e=c.option.endInlineEditByOuterClick.call(c,b.target,b);if(e===!1)return;e===!0&&(d=!0)}if(!d){var f=b.target;do{var g=f.getAttribute?f.getAttribute("data-alopexgrid"):!1;if(g&&g===c.key)return;if(f.tagName&&a.inArray(f.tagName,["INPUT","SELECT","BUTTON","TEXTAREA","A"])>=0)return;f=f.parentNode}while(f)}c.option.cellInlineEdit?(o(c,C.pool),o(c,D.pool)):c.option.rowInlineEdit&&j(c)})}if(t._startCellSelectEngine(t.option.cellSelectable),t._enableHeaderSelect(!!t.option.enableHeaderSelect),t.$root.on("focus"+w+" focusin"+w,".alopexgrid-cell",x,function(a){var b=tb.parseEvent(a);b.data&&b.data._index&&b.data._index.id&&b.mapping&&Qa(a.data.self,b.data._index.row,b.mapping.columnIndex)}),(t.option.enableContextMenu||t.option.enableDefaultContextMenu)&&t.$root.on(t.option.contextMenuEvent+w+" touchstart"+w,x,function(b){function c(b,c,e,f){if(b.use===!1)return"";if(a.isFunction(b.use)&&b.use.call(d.$root,e,f,d)===!1)return"";if(b.seperator===!0)return"<li><hr></li>";var g=a("<li>"),h=a("<a>").appendTo(g),i=b.title;return a.isFunction(i)&&(i=i.call(d.$root,e,f,d)),i&&(i.nodeType||i instanceof a)?h.html(i):h.text(d.option.contextMenuTitleMapper?d.option.contextMenuTitleMapper(i):i),h.attr("href","#"),h.on("click",{$grid:d.$root,gridInstance:d},function(a){b.processor?b.processor.call(a.data.$grid,e,f,a.data.gridInstance):0,a.preventDefault()}),g}var d=b.data.self,e=b.target.className;if(!(e.indexOf("scrollbar")>=0||e.indexOf("scrollbutton")>=0||e.indexOf("scrollhandle")>=0||"touchstart"!==d.option.contextMenuEvent&&"touchstart"===b.originalEvent.type&&3!==b.which)){var g=[];if(d.option.enableDefaultContextMenu&&d.option.defaultContextMenu&&d.option.defaultContextMenu.length&&(g=g.concat(d.option.defaultContextMenu)),d.option.enableContextMenu&&d.option.contextMenu&&d.option.contextMenu.length&&(g=g.concat(d.option.contextMenu)),g.length){var h=d._getDataFromEvent(b),i=d._getCellFromEvent(b);h&&(h=a.extend(!0,{},h),h._index.column=parseInt(i.attr("data-alopexgrid-columnindex")));var j=b.pageX,k=b.pageY;a(".alopexgrid-contextmenu-wrapper-"+d.key).remove(),d.state.$contextMenuDropdown&&(d.state.$contextMenuDropdown.remove(),d.state.$contextMenuDropdown=null),hb.off(".alopexgridContextMenuEvent"+d.key);var l=a("<div>"),m=f();l.css({left:j+"px",top:k+"px"}),l.prop("id",m),l.addClass(_a+" alopexgrid-contextmenu-wrapper").addClass("alopexgrid-contextmenu-wrapper-"+d.key);var n=d.state.$contextMenuDropdown=a("<ul>");n.addClass("alopexgrid-contextmenu");for(var o=0;o<g.length;o++){var p=g[o];n.append(c(p,o,h,i))}if(!n.children().length)return n.remove(),void l.remove();var q=gb.scrollLeft()+gb.width(),r=gb.scrollTop()+gb.height();n.appendTo(l),l.appendTo("body").addClass("alopexgrid-refer-"+d.key),n.show();var s=l.outerHeight(),t=l.outerWidth(),u=l.offset(),v=!1;if(u.top+s>r&&(l.css("top",k-s+"px"),v=!0),u.left+t>q&&(l.css("left",j-t+"px"),v=!0),v){var w=l.outerHeight();w!=s&&l.css("top",k-w+"px");var y=l.outerWidth();y!=t&&l.css("left",j-y+"px")}hb.on("keydown.alopexgridContextMenuEvent"+d.key+d.eventns,x,function(a){var b=a.data.self;27===a.keyCode&&(b.state.$contextMenuDropdown&&(b.state.$contextMenuDropdown.parents(".alopexgrid-contextmenu-wrapper").remove(),b.state.$contextMenuDropdown.remove(),b.state.$contextMenuDropdown=null),hb.off(".alopexgridContextMenuEvent"+b.key),La(b))}).on("click.alopexgridContextMenuEvent"+d.key+d.eventns+" scroll.alopexgridContextMenuEvent"+d.key+d.eventns+" wheel.alopexgridContextMenuEvent"+d.key+d.eventns,x,function(a){a.data.self.state.$contextMenuDropdown&&(a.data.self.state.$contextMenuDropdown.parents(".alopexgrid-contextmenu-wrapper").remove(),a.data.self.state.$contextMenuDropdown.remove(),a.data.self.state.$contextMenuDropdown=null)}),b.preventDefault()}}}),t.option.pager&&(t.$pager.on("click"+w,".page-set",x,function(b){var c=b.data.self,d=this.getAttribute("href").split("#").pop();a(this).parent().removeClass("hovering"),c.pageSet(d),b.preventDefault()}).on("mouseover"+w,".page-button",function(){var b=a(this);b.siblings().removeClass("hovering"),b.addClass("hovering")}).on("mouseout"+w,".page-button",function(){a(this).removeClass("hovering").siblings().removeClass("hovering")}),t.$pager.on("change"+w,".perPage",x,function(b){var c=b.data.self,d=parseInt(a(this).val()),e=c.pageInfo(),f=e.current;if(c._triggerGridEvent("perPageChange",{pageinfo:e,perPage:d})!==!1){var g=Math.ceil(c.pageInfo().dataLength/d);e.current>g&&(f=g),c.updateOption({pager:!0,paging:{perPage:d,current:f}}),c._triggerGridEvent("perPageChangeEnd",{perPage:d,pageinfo:c.pageInfo()})}})),ib===!1&&t.option.autoResize&&gb.on("resize"+w+t.key+t.eventns,{self:t,timer:null,winw:null,winh:null},function(a){var b=a.data.self,c=gb.height(),d=gb.width();if(a.data.winw!==d||a.data.winh!==c){a.data.winw=d,a.data.winh=c;var e=b.option&&b.option.autoResizeDelay?b.option.autoResizeDelay:0,f=a.data;a.data.timer&&clearTimeout(a.data.timer),a.data.timer=setTimeout(function(){b.viewUpdate(),f.timer=null},e)}}),t._activateBoardScrollEvent(),t.option.tree&&t.option.tree.useTree&&t.$root.on("click"+w,".alopexgrid-treecolumn-icon",x,function(b){var c=b.data.self;if(c.state.treeInfo&&c.state.treeInfo.childCountByIdValueMap&&!a.isEmptyObject(c.state.treeInfo.childCountByIdValueMap)){var d=a(this),e=d.closest(".alopexgrid-cell"),f=k(c,e[0]);if(e.hasClass("headercell")){b.stopPropagation();var g=c.state.treeHeaderExpandAllState;c.state.treeHeaderExpandAllState=!c.state.treeHeaderExpandAllState,g?(d.removeClass("expanded"),c.collapseTreeNode({})):(d.addClass("expanded"),c.expandTreeNode({}))}else if(f&&!c._isTreeLeafNode(f)){parseInt(e.attr("data-alopexgrid-rowindex")),parseInt(e.attr("data-alopexgrid-columnindex"));b.stopPropagation(),c.toggleTreeNode(f),h(),b.preventDefault()}}}),t.option.useClassHovering){var J={self:t};t.$root.on("mouseenter"+w,".bodycell",J,function(b){var c=b.data.self,d=k(c,this);if(d){var e=[d];if(c.state.groupRowspanned&&(c.option.rowspanGroupHovering===!0||"number"==typeof c.option.rowspanGroupHovering||"string"==typeof c.option.rowspanGroupHovering)){var f=c.option.grouping.by[0];"number"==typeof c.option.rowspanGroupHovering?f=c.option.grouping.by[c.option.rowspanGroupHovering]:"string"==typeof c.option.rowspanGroupHovering?f=c.option.rowspanGroupHovering:c.option.rowspanGroupHovering===!0&&(f=c.state.topmostGroupRowspanKey);var g=c._getGroupingRange(d._index.data,f);if(g){var h=g.from,i=g.to;e=[];for(var j=h;i>=j;j++)e.push(c.state.data[j])}}for(var l=[],m=0,n=e.length;n>m;m++){var d=e[m];l=l.concat(a.makeArray(c.rowElementGet({_index:{id:d._index.id}})))}for(var m=0,n=l.length;n>m;m++)tb.renderUtil.addClass(l[m],"cell-hoveringrow")}}),t.$root.on("mouseleave"+w,".bodycell",J,function(b){var c=b.data.self,d=k(c,this);if(d){var e=[d],f=[];if(c.state.groupRowspanned&&(c.option.rowspanGroupHovering===!0||"number"==typeof c.option.rowspanGroupHovering||"string"==typeof c.option.rowspanGroupHovering)){var g=c.option.grouping.by[0];"number"==typeof c.option.rowspanGroupHovering?g=c.option.grouping.by[c.option.rowspanGroupHovering]:"string"==typeof c.option.rowspanGroupHovering&&(g=c.option.rowspanGroupHovering);var h=c._getGroupingRange(d._index.data,g);if(h){var i=h.from,j=h.to;e=[];for(var l=i;j>=l;l++)e.push(c.state.data[l])}}for(var m=0,n=e.length;n>m;m++){var d=e[m];f=f.concat(a.makeArray(c.rowElementGet({_index:{id:d._index.id}})))}for(var m=0,n=f.length;n>m;m++)tb.renderUtil.removeClass(f[m],"cell-hoveringrow")}})}var K=!!(t.option.grouping&&t.option.grouping.useGrouping&&t.option.grouping.by&&t.option.grouping.by.length),L=!(!K||!t.option.grouping.useGroupHeader),M=!(!K||!t.option.grouping.useGroupFooter);(L||M)&&t.$root.on("click"+w,".alopexgrid-groupfolding-icon",x,function(b){var c=b.data.self;if(a(b.target).closest(".headercell").length){var d=tb.parseEvent(b),e=d.mapping,f=this.getAttribute("data-alopexgrid-groupfolding-depth");a.isNumeric(f)?f=parseInt(f):"true"===f&&(f=null),c.state.headerGroupFoldingIconCollapsed=c.state.headerGroupFoldingIconCollapsed||{};var g=c.state.headerGroupFoldingIconCollapsed[e.id];c.state.headerGroupFoldingIconCollapsed[e.id]=!g;var i=[];return("number"==typeof f||"string"==typeof f)&&i.push(f),void(g?c.expandGroup.apply(c,i):c.collapseGroup.apply(c,i))}var j=this.getAttribute("data-alopexgrid-rangeid"),k=c.state.groupingLookupTableMapById[j];k&&(b.preventDefault(),c._toggleCollapseGroupRange(k),c.filterAndRedraw(),h())}),t.state.hasColumnFoldingColumn&&t.$root.on("click"+w,".header-columnfolding-icon",x,function(b){var c=b.data.self,d=tb.parseEvent(b),e=d.mapping;if(e){var f,g,h=e.columnIndex,i=[];if(a.isArray(e.columnFoldingColumn))var f=c._columnIndexKeyToMappingList(e.columnFoldingColumn[0]),g=c._columnIndexKeyToMappingList(e.columnFoldingColumn[1]);else{var j,f=c._columnIndexKeyToMappingList(e.columnFoldingColumn.fromIndex),g=c._columnIndexKeyToMappingList(e.columnFoldingColumn.toIndex),k=e.columnFoldingColumn.exceptionColList;if(k&&k.length>0)for(var l=0,m=k.length;m>l;l++)j=c._columnIndexKeyToMappingList(k[l]),j&&j.length&&i.push(j[0].columnIndex)}if(f&&f.length){var n=f[0],o=n.columnIndex;if(g&&g.length){var p=g[0],q=p.columnIndex;c._toggleColumnFold(o,q,h,i)}}}})},tb.prototype._addTreeChildToList=function(b,c,d){var e=this;b&&a.isPlainObject(b)&&(b=[b]),b=[].concat(b);var f=[];if(e.option.tree&&e.option.tree.useTree&&a.isArray(b)&&b.length){for(var g={},h=0,i=b.length;i>h;h++)g[b[h]._index.id]=!0;for(var h=b.length-1;h>=0;h--){for(var j=b[h],k=j._state.treeNodeDepth,l=j._index.data+1,m=[];l<e.state.data.length;){var n=parseInt(e.state.data[l]._state.treeNodeDepth)-k;if(0>=n)break;g[e.state.data[l]._index.id]||(!c||c&&1===n)&&(g[e.state.data[l]._index.id]=!0,m.push(e.state.data[l])),l++}d||m.unshift(j),Array.prototype.unshift.apply(f,m)}}return f},tb.prototype._addTreeParentToList=function(b,c,d){var e=this;if(!e.option.tree||!e.option.tree.useTree)return b;b&&a.isPlainObject(b)&&(b=[b]),b=[].concat(b);var f=[];if(a.isArray(b)&&b.length){for(var g={},h=0,i=b.length;i>h;h++)g[b[h]._index.id]=!0;for(var h=b.length-1;h>=0;h--){var j=b[h];if(j._index.parentid){for(var k=e._dataGetByIndex({id:j._index.parentid}),l=[];k&&(g[k._index.id]||(g[k._index.id]=!0,l.unshift(k)),k._index.parentid)&&!c;)k=e._dataGetByIndex({id:k._index.parentid});d||l.push(j),Array.prototype.unshift.apply(f,l)}}}return f},tb.prototype._getTreeNodeDepth=function(a){return this.state.treeInfo&&a?this.state.treeInfo.depthByIdValueMap[a[this.option.tree.idKey]]:null},tb.prototype._isTreeParentNodeExpanded=function(a){for(var b=this,c=a,d=!0;(c=b._dataGetByIndex({id:c._index.parentid}))&&c._index.id!==c._index.parentid;)if(!c._state.expandedTreeNode){d=!1;break}return d},tb.prototype._isTreeNodeExpanded=function(a){return!!a._state.expandedTreeNode},tb.prototype._isTreeLeafNode=function(a){return a._state.treeNodeLeaf},tb.prototype._toggleTreeNode=function(a){this._isTreeLeafNode(a)||(a._state.expandedTreeNode=!a._state.expandedTreeNode)},tb.prototype._setExpandedTreeNodeState=function(a){"boolean"!=typeof a._state.expandedTreeNode&&(a._state.expandedTreeNode=!(!this.option.tree.expandedKey||!a[this.option.tree.expandedKey]||String(a[this.option.tree.expandedKey])===String(this.state.treeOption.expandedValue[1])))},tb.prototype._expandTreeNode=function(a){a&&!this._isTreeLeafNode(a)&&(a._state.expandedTreeNode=!0,a._index.parentid&&this._expandTreeNode(this._dataGetByIndex({id:a._index.parentid})))},tb.prototype._collapseTreeNode=function(a){this._isTreeLeafNode(a)||(a._state.expandedTreeNode=!1)},tb.prototype.expandTreeNode=function(a){for(var b=this._dataGet(a),c=0,d=b.length;d>c;c++)this._expandTreeNode(b[c]);this.filterAndRedraw()},tb.prototype.collapseTreeNode=function(a){for(var b=this._dataGet(a),c=0,d=b.length;d>c;c++)this._collapseTreeNode(b[c]);this.filterAndRedraw()},tb.prototype.toggleTreeNode=function(a){for(var b=this._dataGet(a),c=0,d=b.length;d>c;c++)this._toggleTreeNode(b[c]);this.filterAndRedraw()},tb.prototype._getUniqueIdValueForTreeNode=function(b){var c=this,d=b[c.option.tree.idKey];if(!c.state.treeInfo)return d;var e=a.isFunction(c.option.tree.idGenerator);null!=d||e||(d=c.option.tree.initialIdValue);var f=null,g=null;e&&(b._index.parentid||null!=b[c.option.tree.parentIdKey])&&(f=c._dataGetByIndex({id:b._index.parentid}),f||(f=c._dataGetByIndex({id:c.state.treeInfo.idValueToDataIdMap[b[c.option.tree.parentIdKey]]})),f&&(g=f[c.option.tree.idKey]));for(var h=0;null==d||c.state.treeInfo.idValueToDataIdMap[d];){if(e){var i=c.option.tree.idGenerator.call(c,d,g,b,f,c.state.treeInfo.idValueToDataIdMap);if(i===d||null==i)throw new Error("option.tree.idGenerator function should return modified id value("+d+"->"+i+").");d=i}else{var j=d.split("_");(j.length<=1||!a.isNumeric(j[j.length-1]))&&j.push(0),j[j.length-1]=parseInt(j[j.length-1])+1,d=j.join("_")}if(h++,h>c.state.data.length)throw new Error("option.tree.idGenerator runs more than data length.")}return d},tb.prototype.treeDataMove=function(a,b,c){var d=this;if(!d._noData()&&d.state.treeInfo){var e=d._dataGet(a);if(e&&e.length){e.sort(function(a,b){return a._index.data-b._index.data});var f=b?d._dataGet(b)[0]:null,g=null,h="number"===d.option.tree.depthValueType?0:"",i=d.state.treeOption.expandedValue[d.state.treeOption.initialExpandedValue?0:1];f&&(g=f[d.option.tree.idKey]);var j=d.state.data.length;if(c){var k=d._dataGet(c)[0];k&&(j=k._index.data)}var l=0,m=[],n={};f?(n[d.option.tree.parentIdKey]=g,d.option.tree.depthKey&&(n[d.option.tree.depthKey]=parseInt(f[d.option.tree.depthKey])+1+h),d.option.tree.leafKey&&(n[d.option.tree.leafKey]=d.state.treeOption.leafValue[0]),d.option.tree.expandedKey&&(n[d.option.tree.expandedKey]=i)):(n[d.option.tree.parentIdKey]=d.option.tree.rootNodeParentIdValue,d.option.tree.depthKey&&(n[d.option.tree.depthKey]=0+h),d.option.tree.leafKey&&(n[d.option.tree.leafKey]=d.state.treeOption.leafValue[0]),d.option.tree.expandedKey&&(n[d.option.tree.expandedKey]=i));for(var o=0,p=e.length;p>o;o++){e[o]._index.data<j&&(l-=1);var q=d._isTreeNodeIncludeChild(e[o],f);if(q)return!1;var r=d.state.data.splice(e[o]._index.data,1)[0];r&&(d._dataEdit(r,n),m.push(r))}j+=l,j=Math.min(j,d.state.data.length),m.unshift(j,0),Array.prototype.splice.apply(d.state.data,m),d.sortClear(),d.calcAndRedraw()}}},tb.prototype.treeGetParent=function(b,c){var d=this,e=d._treeGetParent.apply(d,arguments);return d.option.deepCopyOnDataGet&&a.isArray(e)&&(e=a.extend(!0,[],e)),e},tb.prototype.treeGetChild=function(b,c){var d=this,e=d._treeGetChild.apply(d,arguments);return d.option.deepCopyOnDataGet&&a.isArray(e)&&(e=a.extend(!0,[],e)),e},tb.prototype._isTreeNodeIncludeChild=function(a,b){var c=this;if(!b)return!1;for(var d=c._treeGetChild(a,{recursive:!0,inclusive:!0}),e=0,f=d.length;f>e;e++)if(d[e]._index.id===b._index.id)return!0;return!1},tb.prototype._treeGetParent=function(a,b){var c=this;if(!c.state.treeInfo)return[];var d=c._dataGet(a);if(!d||!d.length)return[];var e=!(!b||b.recursive!==!0),f=!(!b||b.inclusive!==!0),g=c._addTreeParentToList(d,!e,!f);return g},tb.prototype._treeGetChild=function(a,b){var c=this,d=null;if(!c.state.treeInfo)return[];
if(!a){if(!c.state.treeInfo.rootChildIdValueList||!c.state.treeInfo.rootChildIdValueList.length)return[];d=[];for(var e=0,f=c.state.treeInfo.rootChildIdValueList.length;f>e;e++){var g=c.state.treeInfo.rootChildIdValueList[e],h=c.state.treeInfo.idValueToDataIdMap[g],i=c._dataGetByIndex({id:h});i&&d.push(i)}var j=!(!b||b.recursive!==!0);return j?c._addTreeChildToList(d,!1,!1):d}if(d=c._dataGet(a),!d||!d.length)return[];var j=!(!b||b.recursive!==!0),k=!(!b||b.inclusive!==!0),l=c._addTreeChildToList(d,!j,!k);return l},tb.prototype.addContextMenu=function(b,c){a.isPlainObject(b)&&b.hasOwnProperty("title")&&(a.isNumeric(c)?this.option.contextMenu.splice(c,0,b):this.option.contextMenu.push(b))},tb.prototype.deleteContextMenu=function(a){this.option.contextMenu.splice(a,1)},tb.prototype._calculateColumnWidthProperty=function(){var a=this;a.state.columnWidth=0,a.state.columnWidthMap={},a.state.columnWidthExceptFixed=0,a.state.columnWidthExcepFixedMap={},a.state.columnIndexArr=[];for(var b=0;b<a.option.columnMapping.length;b++){var c=a.option.columnMapping[b];c&&c.columnIndex>=0&&c.hidden!==!0&&(c.fixed===!0||(a.state.columnWidthExcepFixedMap[c.columnIndex]=parseInt(c.width),a.state.columnWidthExceptFixed+=parseInt(c.width)),a.state.columnWidthMap[c.columnIndex]=parseInt(c.width),a.state.columnWidth+=parseInt(c.width),a.state.columnIndexArr.push(parseInt(c.columnIndex)))}a.state.standardColumnWidth=0,a.state.standardColumnWidthMap={},a.state.fixedColumnMapping.length>0?(a.state.standardColumnWidth=a.state.columnWidthExceptFixed,a.state.standardColumnWidthMap=a.state.columnWidthExcepFixedMap):(a.state.standardColumnWidth=a.state.columnWidth,a.state.standardColumnWidthMap=a.state.columnWidthMap)},tb.prototype.scrollOffset=function(){var a=this,b={};return b.row=a.state.renderFromRenderedIndex,b.column=a.state.renderFromColumnIndex,b.rowScrollEnd=a.state.scrollyEnd,b.columnScrollEnd=a.state.scrollxEnd,b},tb.prototype._getGroupingRangeByGroupId=function(a){return this.state.groupingLookupTableMapById?this.state.groupingLookupTableMapById[a]||null:null},tb.prototype._getGroupingRange=function(a,b){var c=this.state.groupingLookupTable;if(!c)return null;var d=c[b];if(!d)return null;var e=d[a];return e?e:null},tb.prototype._getGroupingRangeByMapping=function(a,b){var c=b.key,d=this;return b.rowspan&&"string"==typeof b.rowspan.by?c=b.rowspan.by:b.rowspan&&"number"==typeof b.rowspan.by&&(c=d.state.columnIndexToKeyMap[b.rowspan.by]),this._getGroupingRange(a,c)},tb.prototype._filterDataToFunction=function(a){var b=a.type;if(""==b)return null;var c=a.key,d=a.value;return function(a){return tb.filterFunction[b](a[c],d)}},tb.prototype._drawFilterUnit=function(a,b){var c=this,d=[],e=(a?a.type:null)||"",f=(a?a.value:null)||"",g=c.state.columnIndexToMapping[b];"checkedList"===e&&(e="",f="");var h=g.key,i=[ab+".run('",c.key,"','_filterBtnEventhandler','",h,"' ,'",b,"', '",e,"', '",f,"',event);"].join("");return d.push('<input type="hidden" class="alopexgrid-filter-key" name="alopexgrid-filter-key" value="',h,'"/>'),d.push('<button class="alopexgrid-filter-dropdownbutton '+(a?"filtered":"")+'" type="button"'),d.push(' onmousedown="',i,'"'),d.push(">&nbsp;</button>"),d.join("")},tb.prototype.isFilteredColumn=function(a){var b=this;if(null===b.state.filterColumnMappingList||void 0===b.state.filterColumnMappingList)return!1;var c=b._columnIndexKeyToMappingList(a);return c&&c.length?(c=c[0],b._hasColumnFilter(c)):!1},tb.prototype._closeFilterDropdown=function(){var a=this;a.state.filterDropdownWrapper&&a.state.filterDropdownWrapper.hide()},tb.prototype._removeFilterDropdown=function(){var b=this;b.state.filterDropdownWrapper&&(b.state.filterDropdownWrapper.removeAlopexGrid(),b.state.filterDropdownWrapper.remove(),b.state.filterDropdownWrapper=null,a(document.body).off(".alopexgridFilterdropdownWrapper"+b.key),a(".alopexgrid-filterdropdown-wrapper li.remove").off("mousedown.alopexgridFilterdropdownWrapper"+b.key))},tb.prototype.removeFilterDropdown=function(){var a=this;a._closeFilterDropdown(),a._removeFilterDropdown()},tb.prototype.showFilterDropdown=function(a){var b=this,c=b._columnIndexKeyToMappingList(a);if(c&&c.length){var d=c[0],e=d.columnIndex,f=d.filterOption||{};void 0===f?(type="",value=""):(type=f.type||"",value=f.value||"","checkedList"===type&&(type="",value=""));var g=b.$wrapper.find(".headercell").filter('[data-alopexgrid-columnindex="'+e+'"]')[0];b._filterBtnEventhandler(d.key,e,type,value,null,g,!0)}},tb.prototype._filterBtnEventhandler=function(b,c,d,e,g,h,i){var j=this;j.showProgress(function(){var k;if(g?(g=a.event.fix(g),k=a(g.target?g.target:g.currentTarget)):k=a(h),0!==k.length){var l=k.offset();j._removeFilterDropdown();var m=a("<div>");m.append(a("<div>").prop("id",f())),m.css({position:"absolute",left:l.left+"px",top:l.top+k.height()+"px"});var n=f();m.prop("id",n),m.addClass(_a+" alopexgrid-filterdropdown-wrapper");var o=f()+"_"+j.key,p=a(X(j,b,d,e,o,c,i)),q=p.find(".filtertext"),r=p.find(".filterselect");a.trim(q.val()).length>0&&r.attr("disabled",!1),q[0].oldVal=e,q.on("keyup mouseup",function(b){var c=this.value;a.trim(c).length>0?(this.oldVal!==c&&r.val(""),r.attr("disabled",!1)):r.val("").attr("disabled",!0)});var s=a('<div id="'+o+'">'),t=a('<div class="checkboxarea"></div>'),u=[ab+".run('",j.key,"','_setCheckedListFilter','",o,"','",c,"','",i,"', event);"].join(""),v=a('<li class="af-buttonitem buttonarea"></li>'),w=a('<input type="button" class="filtersubmit" data-alopexgrid-key="'+b+'" value="'+tb.i18n("apply")+'" onmousedown="'+u+'"/>'),x=a('<input type="button" class="filterclose" value="'+tb.i18n("close")+'" />');x.click(function(){j._removeFilterDropdown()}),v.append(w,x),t.append(s,v),p.append(t),m.append(p),a("body").append(m),Z(j,s,b,c,w);var y=Number(m.css("left").split("px")[0]),z=Number(m.css("top").split("px")[0]),A=m.width()+Number(m.css("margin-left").split("px")[0])+Number(m.css("margin-right").split("px")[0]),B=m.height()+Number(m.css("margin-top").split("px")[0])+Number(m.css("margin-bottom").split("px")[0]),C=m.offset().left-gb.scrollLeft()+A,D=gb.width();C>D&&(y-=C-D+10,0>y&&(y=0));var E=m.offset().top-gb.scrollTop()+B,F=gb.height();E>F&&(z-=E-F+10,0>z&&(z=0)),m.css({left:y+"px",top:z+"px"}),Za(s).viewUpdate(),j.state.filterDropdownWrapper=m,j.state.filterDropdown=p,a(document.body).on("keydown.alopexgridFilterdropdownWrapper"+j.key+j.eventns,{self:j},_),j.option.closeFilterOuterClick&&a(document.body).on("mousedown.alopexgridFilterdropdownWrapper"+j.key+j.eventns,{self:j},$),a(".alopexgrid-filterdropdown-wrapper li.remove").on("mousedown.alopexgridFilterdropdownWrapper"+j.key+j.eventns,function(a){j._parseFilterHeader(o,c,i,a)})}})},tb.prototype._setCheckedListFilter=function(b,c,d,f){var g=this;g.showProgress(function(){f&&(f=a.event.fix(f));var h,i=a(f.target?f.target:f.currentTarget),j=g._filterGetCheckedList(b);if(h=jb?e(j):Object.keys(j).length,0===h)return void Y(i,!1);g._closeFilterDropdown();var k=Za(a("#"+b)),l=k.state.selectAll?!0:!1;if(d&&"undefined"!==d){var m=g._parseFilterUnitForCheckListByApi(j,l,c,f);null!==m&&g._setColumnFilter(g.state.columnIndexToMapping[c],m)}else{var n=g.$wrapper.find(".filter-cell-unit"),o=n.map(function(a,b){var d=g._parseFilterUnitForCheckList(b,j,l,c,f);return d?{c:c,f:d}:void 0});o.each(function(a,b){g._setColumnFilter(g.state.columnIndexToMapping[b.c],b.f)})}g._removeFilterDropdown(),g._scrollerReset(),g.filterAndRedraw();var p=(g.option.rowOption?g.option.rowOption.filter:null)||null,q=(g.state.filterColumnMappingList&&g.state.filterColumnMappingList.length?g.state.filterColumnMappingList:null)||null;g._triggerGridEvent("filterChange",{filterMap:p,filterColumnMappingList:q}),g._triggerGridEvent("UIFilterChange",{filterMap:p,filterColumnMappingList:q})})},tb.prototype._parseFilterUnitForCheckListByApi=function(b,c,d,e){var f=this,g=a(e.target?e.target:e.currentTarget),h=(g.attr("data-alopexgrid-key"),{});return c?f._hasColumnFilter(f.state.columnIndexToMapping[d])?(f._removeColumnFilter(f.state.columnIndexToMapping[d]),null):null:(h.value=b,h.type="checkedList",0===h.value.length||void 0===h.value||null===h.value?null:h)},tb.prototype._parseFilterUnitForCheckList=function(b,c,d,e,f){var g=this,h={},i=a(b),j=a(f.target?f.target:f.currentTarget),k=j.attr("data-alopexgrid-key"),l=i.find('[name="alopexgrid-filter-key"]').val();return k!==l?null:d?g._hasColumnFilter(g.state.columnIndexToMapping[e])?(g._removeColumnFilter(g.state.columnIndexToMapping[e]),null):null:(h.value=c,h.type="checkedList",0===h.value.length||void 0===h.value||null===h.value?null:(i.find("button").addClass("filtered"),h))},tb.prototype._filterGetCheckedList=function(b,c){for(var d,e=this,f={},g=Za(a("#"+b)),h=g._dataGet({_state:{selected:!0}}),i=0;i<h.length;i++)if(d=h[i],d.label!==tb.i18n("filterList")){f[d.label]=!0;var j="";if(e.state.isFilterRendered){if(g.state.filterRenderFuntion&&g.state.isDefaultRenderType)j=g.state.filterRenderFuntion(g.state.filterRenderObj,d.label);else if(g.state.filterRenderFuntion&&null!==g.state.isDefaultRenderType){var k=e._dataGetByIndex({id:d.dataid}),l=g.state.filterRenderMapping;j=g.state.filterRenderFuntion.call(e,d.label,k,l.render||{type:"string"},l,e)}(j&&j.nodeType||j.jquery)&&(j=a(j).text()),null!=g.state.filterDuplicateMap[j]&&a.extend(!0,f,g.state.filterDuplicateMap[j])}}else f[void 0]=!0;return g.state.filterDuplicateMap=null,f},tb.prototype._parseFilterUnitByApi=function(b,c){var d=this,e={},f=a(c.target?c.target:c.currentTarget),g=f.attr("value");"remove"!==g&&(f=f.find(":selected"),g=f.attr("value"));f.attr("data-alopexgrid-key");return e.type=g,"remove"==e.type?d._hasColumnFilter(d.state.columnIndexToMapping[b])?(d._removeColumnFilter(d.state.columnIndexToMapping[b]),null):null:(e.value=d.state.filterDropdownWrapper.find(".filtertext").val(),""===e.value||void 0===e.value||null===e.value?null:e)},tb.prototype._parseFilterUnit=function(b,c,d){var e=this,f={},g=a(b),h=a(d.target?d.target:d.currentTarget),i=h.attr("value");"remove"!==i&&(h=h.find(":selected"),i=h.attr("value"));var j=h.attr("data-alopexgrid-key"),k=g.find('[name="alopexgrid-filter-key"]').val();return j!==k?null:(f.type=i,"remove"==f.type?e._hasColumnFilter(e.state.columnIndexToMapping[c])?(e._removeColumnFilter(e.state.columnIndexToMapping[c]),null):null:(f.value=e.state.filterDropdownWrapper.find(".filtertext").val(),""===f.value||void 0===f.value||null===f.value?null:f))},tb.prototype._parseFilterHeader=function(b,c,d,e){var f=this;e&&(e=a.event.fix(e)),f._closeFilterDropdown(),f.showProgress(function(){if(d&&"undefined"!==d){var a=f._parseFilterUnitByApi(c,e);null!==a&&f._setColumnFilter(f.state.columnIndexToMapping[c],a)}else{var b=f.$wrapper.find(".filter-cell-unit"),g=b.map(function(a,b){var d=f._parseFilterUnit(b,c,e);return d?{c:c,f:d}:void 0});g.each(function(a,b){f._setColumnFilter(f.state.columnIndexToMapping[b.c],b.f)})}f._removeFilterDropdown(),f.calcAndRedraw();var h=(f.option.rowOption?f.option.rowOption.filter:null)||null,i=(f.state.filterColumnMappingList&&f.state.filterColumnMappingList.length?f.state.filterColumnMappingList:null)||null;f._triggerGridEvent("filterChange",{filterMap:h,filterColumnMappingList:i}),f._triggerGridEvent("UIFilterChange",{filterMap:h,filterColumnMappingList:i})})},tb.prototype._filterCellRender=function(a,b){var c=this,d=a.columnIndex,e=document.createElement("div");if(e.className="cell filtercell"+(d===c.state.maxColumnIndex?" lastcell":""),c.state.forceRenderAll||e.setAttribute("data-alopexgrid-columnindex",d),a.key&&a.filter!==!1){var f=a.filterOption,g=document.createElement("div");if(g.className="filter-cell-unit",g.innerHTML=c._drawFilterUnit(f,d),c.state.forceRenderAll||g.setAttribute("data-alopexgrid-columnindex",d),b)return g;e.appendChild(g)}return e},tb.prototype._hasFooter=function(){var a=this,b=a.option;return b.footer&&b.footer.footerMapping&&b.footer.footerMapping.length?b.footer.useFooter===!1?!1:!0:!1};var xb={sum:function(a){for(var b=this,c=aa(b,a),d=0,e=0,f=b.option.footer&&b.option.footer.usePageData?b.state.renderTargetDataList:b.state.data,g=0,h=f.length;h>g;g++){var i=f[g];if(!b.state.filteredDataList||i._state.filtered){var j=i[c];isNaN(Number(j))||(d+=Number(j),e=m(e,(String(j).split(".")[1]||"").length))}}return tb.renderUtil.addCommas(parseFloat(d).toFixed(e))},average:function(a){for(var b=this,c=aa(b,a),d=0,e=0,f=b.option.footer&&b.option.footer.usePageData?b.state.renderTargetDataList:b.state.data,g=0,h=f.length;h>g;g++){var i=f[g];if(!b.state.filteredDataList||i._state.filtered){var j=i[c];isNaN(Number(j))||(d+=Number(j),e++)}}return tb.renderUtil.addCommas(e?Math.round(d/e*10)/10:0)},stdev:function(a){for(var b=this,c=aa(b,a),d=0,e=0,f=0,g=b.option.footer&&b.option.footer.usePageData?b.state.renderTargetDataList:b.state.data,h=0,i=g.length;i>h;h++){var j=g[h];if(!b.state.filteredDataList||j._state.filtered){var k=j[c];isNaN(Number(k))||(e+=Number(k),d+=Number(k)*Number(k),f++)}}var l=f?Math.round(10*Math.sqrt(d/f-e/f*(e/f)))/10:0;return tb.renderUtil.addCommas(l)},count:function(a){for(var b=this,c=aa(b,a),d=0,e=b.option.footer&&b.option.footer.usePageData?b.state.renderTargetDataList:b.state.data,f=0,g=e.length;g>f;f++){var h=e[f];if(!b.state.filteredDataList||h._state.filtered){var i=h[c];j(i)&&i&&d++}}return tb.renderUtil.addCommas(d)},countif:function(a,b){for(var c=this,d=aa(c,a),e=0,f=c.option.footer&&c.option.footer.usePageData?c.state.renderTargetDataList:c.state.data,g=0,h=f.length;h>g;g++){var i=f[g];if(!c.state.filteredDataList||i._state.filtered){var j=i[d];void 0!==j&&null!==j&&j===b&&e++}}return tb.renderUtil.addCommas(e)},min:function(a){for(var b=this,c=aa(b,a),d=void 0,e=b.option.footer&&b.option.footer.usePageData?b.state.renderTargetDataList:b.state.data,f=0,g=e.length;g>f;f++){var h=e[f];if(!b.state.filteredDataList||h._state.filtered){var i=h[c];(void 0===d||Number(i)<Number(d))&&(d=Number(i))}}return(isNaN(d)||void 0===d)&&(d=0),tb.renderUtil.addCommas(d)},max:function(a){for(var b=this,c=aa(b,a),d=0,e=b.option.footer&&b.option.footer.usePageData?b.state.renderTargetDataList:b.state.data,f=0,g=e.length;g>f;f++){var h=e[f];if(!b.state.filteredDataList||h._state.filtered){var i=h[c];Number(i)>Number(d)&&(d=Number(i))}}return tb.renderUtil.addCommas(d)},getValue:function(a){var b=this,c=b.state.footerData[a];return j(c)?c:""}};tb.prototype._footerValueByMapping=function(b){if("string"==typeof b.title)return b.title;var c=this,d=[];if(b.render){var e=b.render,f=typeof e;("string"===f||"function"===f)&&(e=[e]);for(var g=0,h=e.length;h>g;g++){var i=e[g];if(a.isFunction(i))d.push(i.call(c,c.option.footer&&c.option.footer.usePageData?c.state.renderTargetDataList:c.state.data));else{var j=(i.match(/((^\w+)[(].+[)])/i)||[null]).pop(),k=(i.match(/[^(]*\(([^)]*)\)/)||["",null])[1],l=k?k.split(/\W+/):null;j?a.isFunction(xb[j])&&d.push(xb[j].apply(c,l)):d.push(i)}}}var m=d.join("");return b.key&&(c.state.footerData[b.key]=m),m&&m.length?m:"&nbsp;"},tb.prototype._footerData=function(a,b){null==b?delete this.state.footerData[a]:this.state.footerData[a]=b},tb.prototype._refreshFooterMappedKey=function(a){var b=this;if(b.option.footer&&b.option.footer.footerMapping)for(var c=0,d=b.option.footer.footerMapping.length;d>c;c++)(b.option.footer.footerMapping[c].key===a||0===arguments.length)&&b._footerValueByMapping(b.option.footer.footerMapping[c])},tb.prototype.footerData=function(){var b=this,c=a.makeArray(arguments),d=!1;if(a.isPlainObject(c[0]))for(var e in c[0])c[0].hasOwnProperty(e)&&(b._footerData(e,c[0][e]),d=!0);else if("string"==typeof c[0]){var f=c[0],g=c[1];if(c.length<2)return b._refreshFooterMappedKey(f),g=b.state.footerData[f],j(g)?g:null;b._footerData(f,g),d=!0}return d&&b._refreshBoard(!0),c.length?void 0:(b._refreshFooterMappedKey(),b.state.footerData)},tb.prototype.sortClear=function(a){var b=this;b.state.sortingInfo&&b.state.sortingInfo.length&&(b.$wrapper.find(".headercell.sorting").removeClass("asc desc").find(".sorting-handle").empty(),b.state.sortingInfo=[],a&&a.noEventTriggering&&b._triggerGridEvent("sortClear",{pageinfo:b.pageInfo()}))},tb.prototype._noData=function(){return this.state.data&&this.state.data.length?!1:!0},tb.prototype._sortInternalData=function(){var b=this,c=this.option;this.state.data=this.state.data||[];var d=this.state.data,e=[],g=!1,h=!1,i=[],j=0;b.state.groupRowspanned=!1,b.state.columnRowspanned=!1,delete b.state.columnRowspanIndex,b.state.columnRowspanIndex=null;for(var l=0,m=c.columnMapping.length;m>l;l++){var n=c.columnMapping[l];!isNaN(Number(n.columnIndex))&&n.key&&j++,n.sorting&&e.push(n),n.rowspan&&(h=!0),(n.rowspan===!0||"always"===n.rowspan)&&i.push(n)}var o=!1;b.state.sortingInfoKeyMap={};var p=!(!b.state.dynamicBinding||b.option.clientSortingOnDynamicDataSet);if(b.state.sortingInfo&&b.state.sortingInfo.length&&!p){for(var q={},r=function(a){return"number"==typeof a?a:parseFloat(String(a).replace(",",""))},l=0,m=b.state.sortingInfo.length;m>l;l++){b.state.sortingInfo[l].sortedOrder=l+1;var n=b.state.columnMappingMapById[b.state.sortingInfo[l].mappingId];b.state.sortingInfoKeyMap[n.key]=b.state.sortingInfo[l]}if(b.option.autoSortingType)for(var s=0,t=e.length;t>s;s++){var u=!1;if(e[s].sorting===!0)for(var l=0,m=Math.min(d.length,50);m>l;l++){var v=d[e[s].key];if(v){if(!a.isNumeric(v)){u=!1;break}u=!0}else 0===v&&(u=!0)}else"number"===e[s].sorting&&(u=!0);u?q[e[s].columnIndex]=r:q[e[s].columnIndex]=String}else for(var s=0,t=e.length;t>s;s++)"number"===e[s].sorting?q[e[s].columnIndex]=r:q[e[s].columnIndex]=String;for(var w={},l=0,m=b.state.sortingInfo.length;m>l;l++){var n=b.state.columnMappingMapById[b.state.sortingInfo[l].mappingId];n&&a.isFunction(n.sorting)&&(w[l]=!0)}b.state.sortingCompareFunction=function(a,c){for(var d=0,e=b.state.sortingInfo.length;e>d;d++){var f=b.state.columnMappingMapById[b.state.sortingInfo[d].mappingId];if(f){f.sorting||(o=!0);var g=b.state.sortingInfo[d].sortingDirection||"asc",h="asc"===g?1:-1,i=f.key;if(w[d])return f.sorting.call(b,a[i],c[i],a,c)*h||a._index.data-c._index.data||0;var j=(q[f.columnIndex]||String)(a[i]),k=(q[f.columnIndex]||String)(c[i]);if(null==a[i]&&q[f.columnIndex]===r&&(j=Number.NEGATIVE_INFINITY),null==c[i]&&q[f.columnIndex]===r&&(k=Number.NEGATIVE_INFINITY),k>j)return-1*h;if(j>k)return 1*h}}return a._index.data-c._index.data||0},d.sort(b.state.sortingCompareFunction),g=!0}else b.state.sortingCompareFunction=null;if(o&&b.sortClear({noEventTriggering:!0}),b.option.tree&&b.option.tree.useTree){if(b.option.tree.idKey&&b.option.tree.parentIdKey){for(var x={},y={},z={},A="number"===b.option.tree.depthValueType?0:"",l=0,m=d.length;m>l;l++){var B=d[l];B._index.data=l,b._setExpandedTreeNodeState(B),x[B[b.option.tree.idKey]]=B._index.id,y[B[b.option.tree.parentIdKey]]=y[B[b.option.tree.parentIdKey]]||[],y[B[b.option.tree.parentIdKey]].push(B[b.option.tree.idKey])}var C=[];for(var D in y)x[D]||(C=C.concat(y[D]),delete y[D]);for(var D in y)ea(D,y,z);b.state.treeInfo={},b.state.treeInfo.idValueToDataIdMap=x,b.state.treeInfo.childCountByIdValueMap=y,b.state.treeInfo.depthByIdValueMap=z,b.state.treeInfo.rootChildIdValueList=C;var E=b.state.treeOption.depthStartValue;if(b.option.disableTreeEdit)for(var l=0,m=d.length;m>l;l++){var B=d[l];B._index.parentid=x[B[b.option.tree.parentIdKey]]||null,B._state.treeNodeDepth=(z[B[b.option.tree.idKey]]||0)+E,B._state.treeNodeLeaf=!y[B[b.option.tree.idKey]]}else for(var l=0,m=d.length;m>l;l++){var B=d[l];B._index.parentid=x[B[b.option.tree.parentIdKey]]||null;var F=((z[B[b.option.tree.idKey]]||0)+E,!y[B[b.option.tree.idKey]],b.state.treeOption.leafValue[y[B[b.option.tree.idKey]]?1:0]),G=(z[B[b.option.tree.idKey]]||0)+E+A;if(B._state.treeNodeDepth=(z[B[b.option.tree.idKey]]||0)+E,B._state.treeNodeLeaf=!y[B[b.option.tree.idKey]],(b.option.tree.leafKey||b.option.tree.depthKey)&&(b.option.tree.leafKey&&B[b.option.tree.leafKey]!==F||b.option.tree.depthKey&&B[b.option.tree.depthKey]!==G)){var H={};b.option.tree.leafKey&&(H[b.option.tree.leafKey]=F),b.option.tree.depthKey&&(H[b.option.tree.depthKey]=G),b._dataEdit(B,H)}}}else b.option.tree.leftKey&&b.option.tree.rightKey;d.sort(function(a,c){var d=a._state.treeNodeDepth,e=c._state.treeNodeDepth,f=parseInt(d),g=parseInt(e),h=a,i=c;if(g>f)for(;i._index.parentid&&(i=b._dataGetByIndex({id:i._index.parentid}));){if(i[b.option.tree.idKey]===a[b.option.tree.idKey])return-1;if(i._state.treeNodeDepth===f)break}else if(f>g)for(;h._index.parentid&&(h=b._dataGetByIndex({id:h._index.parentid}));){if(h[b.option.tree.idKey]===c[b.option.tree.idKey])return 1;if(h._state.treeNodeDepth===g)break}for(;i[b.option.tree.parentIdKey]!==h[b.option.tree.parentIdKey];){var j=b._dataGetByIndex({id:h._index.parentid}),k=b._dataGetByIndex({id:i._index.parentid});if(!j||!k)break;h=j,i=k}return h._index.data-i._index.data})}else delete b.state.treeInfo;if(b.option.grouping&&b.option.grouping.by&&b.option.grouping.by.length&&b.option.grouping.useGrouping){var I=b.option.grouping.by;I=a.isArray(I)?I:[I],I[0]===!0&&(I=I.slice(1));for(var J={},K={},L={},M=0;M<I.length;M++){var N=I[M],O=L[N]={};J[N]=parseInt(M);for(var P=0,Q=[],R=0,S=d.length;S>R;R++){var v=d[R][N];void 0===O[v]&&(O[v]=P++,void 0!==v&&Q.push(v))}K[N]=Q}var T=I.length;b.option.grouping.useGroupRearrange&&d.sort(function(a,b){for(var c=0;T>c;c++){var d=I[c],e=a[d],f=b[d],g=L[d][e],h=L[d][f];if(h>g)return-1;if(g>h)return 1}return a._index.data-b._index.data}),b.state.groupRowspanned=!!b.option.grouping.useGroupRowspan,b.state.groupingLookupTable={},b.state.groupingLookupTableMapById={},b.state.groupOccurrenceMap=K,b.state.groupOccurrenceOrder=L,b.state.groupKeyOrderMap=J;var U=null;if(b.state.topmostGroupRowspanKey=null,b.option.grouping.useGroupRowspan){for(var l=0,m=b.option.grouping.by.length;m>l;l++){var V=b.option.grouping.by[l];if(null!=b.state.visibleIndexMapByKey[V]){var n=b.state.columnKeyToMapping[V];if(n&&n.rowspan===!0){b.state.topmostGroupRowspanKey=V,U=l;break}}}for(var l=0,m=b.state.visibleColumnMappingList.length;m>l;l++){var n=b.state.visibleColumnMappingList[l];if(n.rowspan&&null!=n.rowspan.by){var V=n.rowspan.by,W=J[V];null!=W&&(U>W||null==U)&&(b.state.topmostGroupRowspanKey=V,U=W)}}}delete b.state.groupHeaderDataMapById,delete b.state.groupFooterDataMapById;for(var X=I.length,Y=b.state.groupingLookupTable,Z=[],l=0;X>l;l++)Y[I[l]]=[];for(var l=0,m=d.length;m>l;l++){for(var B=d[l],$=d[l+1],_=[],aa=[],R=0;X>R;R++){var V=I[R];_.push(V===!0?void 0:B[V]),aa.push($?$[V]:null),Z[R]||(Z[R]={id:f(),from:l,groupKey:V,groupDepth:R,value:B[V],member:[],memberIdMap:{}},b.state.groupingLookupTableMapById[Z[R].id]=Z[R]),Y[V][l]=Z[R]}for(var R=X-1;R>=0;R--){var ba=!1;for(k=R;k>=0;k--)if(_[k]!==aa[k]){ba=!0;break}l===(b.state.pinnedDataIdList||[]).length-1&&(ba=!0),Z[R].member.push(B),Z[R].memberIdMap[B._index.id]=B,ba&&(Z[R].to=l,Z[R]=null)}}}else b.state.groupRowspanned=!1,b.state.groupingLookupTable=null,b.state.groupingLookupTableMapById=null,b.state.groupOccurrenceMap=null,b.state.groupOccurrenceOrder=null,b.state.topmostGroupRowspanKey=null,b.state.groupKeyOrderMap=null;for(var l=d.length;l>=0;l--)d[l]||d.splice(l,1);if(b._generateDataIndex(d),b._hasPinnedData()&&b.state.pinnedDataIdList.sort(function(a,c){return b.state.dataIdToIndexMap[a]-b.state.dataIdToIndexMap[c]||0}),b.option.grouping&&b.option.grouping.useGrouping&&b.option.grouping.by);else if(h&&b.option.useColumnRowspan){for(var ca=[],l=0;j>l;l++)ca.push(void 0);var da=1;a.each(i,function(a,b){var c=0,e=d.length;ca[Number(b.columnIndex)]=[];for(var f=ca[Number(b.columnIndex)],g=[];e>c;){for(var h=c,i=c+1;e>i&&d[h][b.key]===d[i][b.key];)i++;for(var j={from:h,to:i,index:da++},k=h;i>k;k++)g[k]=j;f.push(j),c=i}f.push(g)});for(var l=0,m=c.columnMapping.length;m>l;l++){var n=c.columnMapping[l];if(n.rowspan&&"number"==typeof n.rowspan.by)if(n.rowspan.under){var fa=ca[n.rowspan.by];fa=fa[fa.length-1];var ga=0,ha=d.length;ca[Number(n.columnIndex)]=[];for(var ia=ca[Number(n.columnIndex)],ja=[];ha>ga;){for(var ka=ga,la=ga+1;ha>la&&d[ka][n.key]===d[la][n.key]&&!(la+1>fa[ka].to);)la++;for(var ma={from:ka,to:la,index:da++},l=ka;la>l;l++)ja[l]=ma;ia.push(ma),ga=la}ia.push(ja)}else ca[n.columnIndex]=ca[n.rowspan.by]}delete this.state.columnRowspanIndex;for(var na=!1,l=0,m=ca.length;m>l;l++)ca[l]&&(na=!0);na?(this.state.columnRowspanIndex=ca,this.state.columnRowspanned=!0):(this.state.columnRowspanIndex=void 0,this.state.columnRowspanned=!1)}else this.state.columnRowspanIndex=void 0,this.state.columnRowspanned=!1;return this.state.sortingRequired=!1,g},tb.prototype._dataMoveByDataindex=function(a,b){if(this.state.data&&this.state.data.length){var c=this.state.data;c.splice(b+(b>a?-1:0),0,c.splice(a,1)[0])}},tb.prototype.dataMove=function(a,b,c){var d=this;if(!d._noData()&&!ba(a)&&!ba(b)){var e=d._dataGet(a),f=d._dataGet(b);if(e&&f&&e.length&&f.length&&f[0]&&f[0]._index){var g=f[0]._index.data;if(j(g)){for(var h=fa(d,e,!0),i=0;i<d.state.data.length;i++){var k=d.state.data[i];if(k&&k._index&&g<=k._index.data){var l=0;c===!0&&g===k._index.data&&l++,g=i+l;break}}g>=0&&d.state.data.splice.apply(d.state.data,[g,0].concat(h)),d.sortClear(),d.calcAndRedraw()}}}},tb.prototype._generateXOffsetOnContinuousScroll=function(){var a=this;a.option.useContinuousXScroll&&a.state.refreshbodycell&&(a.state.refreshbodycell.scrollEndXOffset=-Math.abs((a.state.translateX-a._generateTranslatex(a.state.renderFromColumnIndex)*a.state.scrollxRatio)/a.state.scrollxRatio))},tb.prototype._generateYOffsetOnContinuousScroll=function(){var a=this;if(a.option.useContinuousYScroll&&a.state.refreshbodycell){var b=a.__getRowHeightByRenderedIdx(a.state.renderFromRenderedIndex);a.state.refreshbodycell.scrollEndYOffset=-Math.abs((a.state.translateY-b*a.state.scrollyRatio)/a.state.scrollyRatio)}},tb.prototype.dataScroll=function(b,c,d){function e(a,b,c){var d={left:0,center:50,right:100,middle:50};c&&(d={top:0,middle:50,bottom:100});var e=null;return d.hasOwnProperty(b)?e=d[b]:"string"==typeof b&&b.indexOf("%")>=0?e=Number(b.split("%")[0]):isNaN(Number(b))||(e=Number(b)),e}function f(c,d,e){var f=c.state.fixedColumnMapping.length;c.state.scrollxEnd=!1;var g=0,h=0;if("string"==typeof b)"left"===b?(h=0,c.state.renderFromColumnIndex=0):"center"===b?(h=.5*(c.state.scrollbarxTrackLength-c.state.scrollbarxWidth),c.state.renderFromColumnIndex=c._getColumnIndexByBlankWidth(h)):"right"===b&&(c.state.scrollxEnd=!0,h=c.state.scrollbarxTrackLength-c.state.scrollbarxWidth,c.state.renderFromColumnIndex=c._getColumnIndexByBlankWidth(h));else if(100==e||50==e){for(var i=c.state.wrapperWidth*(e/100),j=0,k=d;k>=0;k--)if(j+=c.state.columnWidthMap[k],c.state.renderFromColumnIndex=k,j>i){c.state.renderFromColumnIndex=k+1;break}h=c._generateTranslatex(c.state.renderFromColumnIndex)*c.state.scrollxRatio,h>=c.state.scrollbarxTrackLength-c.state.scrollbarxWidth&&(c.state.scrollxEnd=!0,h=c.state.scrollbarxTrackLength-c.state.scrollbarxWidth,c.state.renderFromColumnIndex=c._getColumnIndexByBlankWidth(h))}else c.state.renderFromColumnIndex=Math.max(0,c.state.columnIndexArr[a.inArray(d,c.state.columnIndexArr)-f]),h=c._generateTranslatex(g)*c.state.scrollxRatio,h>=c.state.scrollbarxTrackLength-c.state.scrollbarxWidth&&(c.state.scrollxEnd=!0,h=c.state.scrollbarxTrackLength-c.state.scrollbarxWidth,c.state.renderFromColumnIndex=c._getColumnIndexByBlankWidth(h));c.state.translateX=h,c.option.useContinuousXScroll&&c._generateXOffsetOnContinuousScroll()}function g(a,b,c,d){var e=a.option.rowFixCount;a.state.scrollyEnd=!1;var f=0;if(a.state.refreshbodycell.scrollEndYOffset=0,"string"==typeof d){if("top"===d)f=0,a.state.renderFromRenderedIndex=0,a.state.scrollyEnd=!1;else if("middle"===d)f=.5*(a.state.scrollbaryTrackLength-a.state.scrollbaryHeight),a.state.renderFromRenderedIndex=a.__getRenderedIndexByBlankHeight(f);else if("bottom"===d)a.state.scrollyEnd=!0,f=a.state.scrollbaryTrackLength-a.state.scrollbaryHeight,a.state.renderFromRenderedIndex=a.__getRenderedIndexByBlankHeight(f);else if(d.indexOf("%")>0){var g=parseInt(d.split("%")[0]);f=(a.state.scrollbaryTrackLength-a.state.scrollbaryHeight)*(g/100),a.state.renderFromRenderedIndex=a.__getRenderedIndexByBlankHeight(f)}}else if(100===c||50===c){var h=Math.ceil(a.state.refreshbodycell.renderedDataList.length*(c/100));a.state.renderFromRenderedIndex=Math.max(0,b-h);var i=a.__getRowHeightByRenderedIdx(a.state.renderFromRenderedIndex);f=Math.ceil(a.state.scrollyRatio*i*a.state.scrollRatioConst)/a.state.scrollRatioConst,(f>=a.state.scrollbaryTrackLength-a.state.scrollbaryHeight||a.state.pagingInfo.pageDataLength-1===b)&&(a.state.scrollyEnd=!0,f=a.state.scrollbaryTrackLength-a.state.scrollbaryHeight,a.state.renderFromRenderedIndex=a.__getRenderedIndexByBlankHeight(f))}else{a.state.renderFromRenderedIndex=Math.max(0,b-e);var i=a.__getRowHeightByRenderedIdx(a.state.renderFromRenderedIndex);f=Math.ceil(a.state.scrollyRatio*i*a.state.scrollRatioConst)/a.state.scrollRatioConst,f>=a.state.scrollbaryTrackLength-a.state.scrollbaryHeight&&(a.state.scrollyEnd=!0,f=a.state.scrollbaryTrackLength-a.state.scrollbaryHeight,a.state.renderFromRenderedIndex=a.__getRenderedIndexByBlankHeight(f))}a.state.translateY=f,a.option.useContinuousYScroll&&a._generateYOffsetOnContinuousScroll()}var h=this;a.isFunction(c)&&(d=c,c=null);var i=0,k=0,l=!1,m=!1;if(a.isPlainObject(b)&&b._index){var n=b._index.column;if("string"==typeof n?(i=h.state.columnKeyToIndexMap[n],l=!0):a.isNumeric(n)&&(i=parseInt(n),l=!0),k=b._index.row,j(k))m=!0;else{var o=b._index.data;null==o&&b._index.id&&(o=h.state.dataIdToIndexMap[b._index.id]);var p=h.state.data[o];p&&(k=p._index.row,m=!0)}}else if("string"!=typeof b)return;var q=0,r=0;null!=c&&(q=null!=c.scrollX?e(h,c.scrollX):0,r=null!=c.scrollY?e(h,c.scrollY,!0):0),"string"==typeof b&&("left"==b||"right"==b||"center"==b?l=!0:("top"==b||"middle"==b||"bottom"==b||b.indexOf("%")>0)&&(m=!0)),h.state.scrollxMoveable&&l&&f(h,i,q),h.state.scrollyMoveable&&m&&g(h,k,r,b),(l||m)&&h.redraw(),a.isFunction(d)&&setTimeout(function(){d()},10)},tb.prototype._getFilterMapObject=function(){},tb.prototype._getColumnFilterFunction=function(b){if(!b)return null;if(b.filter!==!1&&b.filterOption){if(a.isFunction(b.filterOption))return b.filterOption;var c=tb.filterFunction[b.filterOption.type];if(a.isFunction(c))return ga}return null},tb.prototype._hasColumnFilter=function(a){return!(!a||a.filter===!1||!a.filterOption)},tb.prototype._setColumnFilter=function(a,b){a.filterOption=b},tb.prototype._removeColumnFilter=function(a){delete a.filterOption},tb.prototype.setFilter=function(b,c,d){var e=this;c||(c=b,b=f());var g=!1;j(b)||(b=f()),e.option.rowOption=e.option.rowOption||{},e.option.rowOption.filter=a.extend({},e.option.rowOption.filter),a.isPlainObject(b)?(g=!0,d=c,a.each(b,function(a,b){e.option.rowOption.filter[a]=b})):e.option.rowOption.filter[b]=c,d!==!0&&(e.showProgress(),e.calcAndRedraw(),e.hideProgress()),g?a.each(b,function(a,b){e._triggerGridEvent("filterSet",{filterMap:e.option.rowOption.filter,filterName:a,filter:b})}):e._triggerGridEvent("filterSet",{filterMap:e.option.rowOption.filter,filterName:b,filter:c});var h=(e.option.rowOption?e.option.rowOption.filter:null)||null,i=(e.state.filterColumnMappingList&&e.state.filterColumnMappingList.length?e.state.filterColumnMappingList:null)||null;return e._triggerGridEvent("filterChange",{filterMap:h,filterColumnMappingList:i}),b},tb.prototype.deleteFilter=function(b,c){var d=this,e=!1;if(null==b||a.isArray(b)||(b=[b]),a.isArray(b)&&b.length&&d.option.rowOption&&d.option.rowOption.filter){for(var f=0,g=b.length;g>f;f++){var h=b[f],i=d.option.rowOption.filter[h];i&&(e=e||{},e[h]=i,delete d.option.rowOption.filter[h])}a.isEmptyObject(d.option.rowOption.filter)&&(delete d.option.rowOption.filter,d.option.rowOption.filter=null)}if(e){c||(d.showProgress(),d.calcAndRedraw(),d.hideProgress()),a.each(e,function(a,b){d._triggerGridEvent("filterDelete",{filterMap:d.option.rowOption.filter||null,filterName:a,filter:b})});var j=(d.option.rowOption?d.option.rowOption.filter:null)||null,k=(d.state.filterColumnMappingList&&d.state.filterColumnMappingList.length?d.state.filterColumnMappingList:null)||null;
return d._triggerGridEvent("filterChange",{filterMap:j,filterColumnMappingList:k}),!0}return!1},tb.prototype.clearFilter=function(a){var b=this,c=!1;if(b.option.rowOption&&b.option.rowOption.filter&&(delete b.option.rowOption.filter,b.option.rowOption.filter=null,c=!0),b.state.filterColumnMappingList&&b.state.filterColumnMappingList.length){c=!0;for(var d=0,e=b.state.filterColumnMappingList.length;e>d;d++){var f=b.state.filterColumnMappingList[d];b._removeColumnFilter(f)}b._generateFilterColumnList()}if(a!==!0&&c&&(b.showProgress(),b.calcAndRedraw(),b.hideProgress()),c){b._triggerGridEvent("filterClear");var g=(b.option.rowOption?b.option.rowOption.filter:null)||null,h=(b.state.filterColumnMappingList&&b.state.filterColumnMappingList.length?b.state.filterColumnMappingList:null)||null;b._triggerGridEvent("filterChange",{filterMap:g,filterColumnMappingList:h})}},tb.prototype.showSortDialog=function(){},tb.prototype._hasHiddenColumnBetween=function(b,c,d){for(var e=this,f=0,g=e.option.columnMapping.length;g>f;f++){var h=e.option.columnMapping[f],i=h.columnIndex;if(!(d&&d.length>0&&a.inArray(i,d)>=0)&&!h.columnFoldingColumn&&h.hidden&&"number"==typeof i&&i>=b&&c>=i)return!0}return!1},tb.prototype._hideAllColumnBetween=function(b,c,d){for(var e=this,f=0,g=e.option.columnMapping.length;g>f;f++){var h=e.option.columnMapping[f],i=h.columnIndex;d&&d.length>0&&a.inArray(i,d)>=0||h.columnFoldingColumn||"number"==typeof i&&i>=b&&c>=i&&(h.hidden=!0)}},tb.prototype._showAllColumnBetween=function(b,c,d){for(var e=this,f=0,g=e.option.columnMapping.length;g>f;f++){var h=e.option.columnMapping[f],i=h.columnIndex;d&&d.length>0&&a.inArray(i,d)>=0||h.columnFoldingColumn||"number"==typeof i&&i>=b&&c>=i&&(h.hidden=!1)}},tb.prototype._toggleColumnFold=function(a,b,c,d,e){var f=this,g=c&&"object"==typeof c?c:f.state.columnIndexToMapping[c],h=f._hasHiddenColumnBetween(a,b,d);g&&(g.columnFolded=!h),h?f._showAllColumnBetween(a,b,d):f._hideAllColumnBetween(a,b,d),e!==!0&&(f.updateOption(),ta(f),f.redraw())},tb.prototype._generateDataIndex=function(a){var b=this,c=a||b.state.data;delete b.state.dataIdToIndexMap,b.state.dataIdToIndexMap={};for(var d=0,e=c.length;e>d;d++){var f=c[d];f._index.data=d,b.state.dataIdToIndexMap[f._index.id]=d}},tb.prototype._getDataFromEvent=function(b){var c=a(b.target).closest(".bodycell");return c.length?this._getRenderedDataFromRenderedIndex(parseInt(c.attr("data-alopexgrid-rowindex"))):null},tb.prototype._getCellFromEvent=function(b){return a(b.target).closest(".cell")},tb.prototype._getRenderedDataFromRenderedIndex=function(a){var b=this;return b.state.renderTargetDataList[a]||null},tb.prototype.headerGroupInfo=function(a){var b=this;return b.state.headerGroupByKey[a]||b.state.headerGroupById[a]||null},tb.prototype.headerGroupGet=function(){var b=this,c=b.state.headerGroupArr;if(!arguments.length||!arguments[0])return[].concat(b.state.headerGroupArr);for(var d=a.makeArray(arguments),e=[],f=0;f<c.length;f++){var g=c[f],h=!1;a.each(d,function(b,c){if(a.isPlainObject(c)){var d=!0;for(var e in c)c[e]!==g[e]&&(d=!1);d&&(h=!0)}}),h&&e.push(g)}return e},tb.prototype.columnInfo=function(a){var b=this,c=b.state.columnIndexToMapping[a]||b._getColumnByKey(a);return!c&&b.state.multiColumnList.length&&"string"==typeof a&&a.indexOf("m")>=0&&(c=b._columnIndexKeyToMappingList(a)[0]),c||null},tb.prototype.columnGet=function(){for(var b=this,c=b.option.columnMapping,d=a.makeArray(arguments),e=[],f=0;f<c.length;f++){var g=c[f],h=Number(g.columnIndex),i=!1;a.each(d,function(b,d){if(a.isPlainObject(d)){var e=!0;for(var f in d)"columnIndex"===f?h!==d[f]&&(e=!1):"hidden"===f?ia(c,h)!==d[f]&&(e=!1):d[f]!==g[f]&&(e=!1);e&&(i=!0)}}),i&&e.push(g)}return e},tb.prototype.isColumnHidden=function(a){var b=this,c=b.option,d=c.columnMapping;return ia(d,a)},tb.prototype.hideCol=function(a,b){var c=this;return c.showCol(a,b,!0)},tb.prototype.showCol=function(b,c,d){var e=this;e.state.showColCalled=!0;var f=e.option,g=f.columnMapping;if(b===!0){for(var h=0;h<g.length;h++){var i=g[h];d?e.hideCol(i.key,!0):e.showCol(i.key,!0)}return e.updateOption(),ta(e),void(e.state.showColCalled=!1)}"string"==typeof b?b=b.split(","):a.isArray(b)||(b=[b]);for(var k=!1,h=0;h<g.length;h++){var i=g[h];if(j(i.columnIndex)&&(a.inArray(i.columnIndex,b)>=0||a.inArray(i.key,b)>=0)&&(i.hidden=d||!1,d&&e.state.sortingInfo&&e.state.sortingInfo.length))for(var l=e.state.sortingInfo.length-1;l>=0;l--)if(e.state.sortingInfo[l].mappingId===i.id){k=!0;break}}c!==!0&&(k&&e.sortClear(),e.updateOption(),ta(e),e.state.showColCalled=!1)},tb.prototype._filterValueByValueFilter=function(a,b){if(a&&"function"==typeof this.option.valueFilter){var c=this.option.valueFilter.call(this,b,a);if(void 0!==c)return c}return b},tb.prototype._filterDataByValueFilter=function(a){if(a&&"function"==typeof this.option.valueFilter)for(var b in a)a.hasOwnProperty(b)&&0!==b.indexOf("_")&&(a[b]=this._filterValueByValueFilter(a,a[b]))},tb.prototype.dataAdd=function(b,c){var d=this;if(b){d.state.data||(d.state.data=[]);var e=a.isArray(b)?b:[b];if(e.length){if(d._triggerGridEvent("dataAdd",{datalist:e})===!1)return!1;delete d.state.cellSelection,d._rowSelectAllUncheck();var f=(d.state.data.length,!a.isEmptyObject(d.option.defaultState.dataAdd)&&d.option.defaultState.dataAdd),g=d.option.defaultState.dataAdd,i=d.option.rowOption?a.isFunction(d.option.rowOption.allowEdit):!1,j=c&&c._state,k=c&&c._index,l=!!(d.option.tree&&d.option.tree.useTree&&d.state.treeInfo),m=d.option.tree&&d.option.tree.useTree&&c&&c.parentQuery,n=null,o=null,p=null,q="number"===d.option.tree.depthValueType?0:"";m&&(n=d._dataGet(c.parentQuery)[0],n&&(o=n[d.option.tree.idKey])),l&&(p=d.state.treeOption.expandedValue[d.state.treeOption.initialExpandedValue?0:1]);for(var r=ja(d),s=(e.length+1,0),t=e.length;t>s;s++){var u=e[s],v=u._state;if(u._state={edited:!1,editing:!1,selected:!1,added:!0,deleted:!1},f&&("boolean"==typeof g.edited?u._state.edited=g.edited:0,"boolean"==typeof g.editing?u._state.editing=g.editing:0,"boolean"==typeof g.selected?u._state.selected=g.selected:0,"boolean"==typeof g.added?u._state.added=g.added:0,"boolean"==typeof g.deleted?u._state.deleted=g.deleted:0),d.option.extendStateOnAdd&&v&&("boolean"==typeof v.edited?u._state.edited=v.edited:0,"boolean"==typeof v.editing?u._state.editing=v.editing:0,"boolean"==typeof v.selected?u._state.selected=v.selected:0,"boolean"==typeof v.added?u._state.added=v.added:0,"boolean"==typeof v.deleted?u._state.deleted=v.deleted:0),j&&c._state.added===!1&&(u._state.added=!1),u._index=u._index||{},d._giveDataId(u),r(tb,d,u),i&&d.option.rowOption.allowEdit.call(d,u)===!1&&(u._state.editing=!1),u._state.editing===!0&&(u._state.editing=d.state.getEditingAllState(u),d.option.parseValueOnStartEdit&&d._startupUpdateEditingData(u)),l){if(null!=n?u[d.option.tree.parentIdKey]=o:null==u[d.option.tree.parentIdKey]&&(u[d.option.tree.parentIdKey]=d.option.tree.rootNodeParentIdValue),d.option.tree.depthKey){var w=d.state.treeInfo.depthByIdValueMap[u[d.option.tree.parentIdKey]];u[d.option.tree.depthKey]=d.state.treeOption.depthStartValue+(null!=w?w+1:0)+q}d.option.tree.leafKey&&(u[d.option.tree.leafKey]=d.state.treeOption.leafValue[0]),d.option.tree.expandedKey&&(u[d.option.tree.expandedKey]=p),(null==u[d.option.tree.idKey]||d.state.treeInfo.idValueToDataIdMap[u[d.option.tree.idKey]])&&(u[d.option.tree.idKey]=d._getUniqueIdValueForTreeNode(u))}}var x=d.state.data.length;if(k)if(null!=c._index.data)x=parseInt(c._index.data);else if(null!=c._index.row){var y=d.state.renderTargetDataList[c._index.row];y&&null!=y._index.data&&(x=y._index.data)}x=Math.max(0,Math.min(d.state.data.length,x)),(null==x||isNaN(x))&&(x=d.state.data.length),x===d.state.data.length?Array.prototype.push.apply(d.state.data,e):(e.unshift(x,0),d.state.data.splice.apply(d.state.data,e),e.shift(),e.shift()),d.state.dynamicBinding?null:d.sortClear(),d.state.scrollyEnd=!1,d.state.renderingSuppressed?(d._sortInternalData(),d._generateRenderTargetData()):(h(),d.calcAndRedraw()),setTimeout(function(){d._triggerGridEvent("dataAddEnd",{datalist:e}),d._triggerGridEvent("dataChanged",{type:"add",datalist:e})},0)}}},tb.prototype._scrollerReset=function(){var a=this;a.state.renderFromRenderedIndex=0,a.state.renderFromColumnIndex=0,a.state.translateY=0,a.state.translateX=0,a.state.scrollxEnd=!1,a.state.scrollyEnd=!1,a.state.refreshbodycell&&(a.state.refreshbodycell.scrollEndYOffset=0,a.state.refreshbodycell.scrollEndXOffset=0)},tb.prototype._giveDataId=function(a){a._index.id=f(),a._index.grid=this.key,this.state.dataMapById[a._index.id]=a},tb.prototype._clearData=function(){var a=this;a.clearFilter(!0),a._rowSelectAllUncheck(),delete a.state.cellSelection,delete a.state.rowHeightMapByDataId,delete a.state.pinnedDataIdList,delete a.state.pinnedDataIdMap,delete a.state.treeHeaderExpandAllState,delete a.state.data,delete a.state.dataMapById,delete a.state.deletedData,delete a.state.headerGroupFoldingIconCollapsed,delete a.state.groupFooterDataMapById,delete a.state.groupHeaderDataMapById,a.state.rowHeightMapByDataId={},a.state.data=[],a.state.dataMapById={},a.state.deletedData=[],a.option.paging&&(a.option.paging.current=1,delete a.option.paging.customPaging),a.state.pagingInfo&&a.state.pagingInfo.customPaging&&delete a.state.pagingInfo.customPaging},tb.prototype.dataSet=function(b,c){if(b){var d=this;if(a.isArray(b)||(b=[b]),!b.length)return void d.dataEmpty();if(d._triggerGridEvent("dataSet",{datalist:b})===!1)return!1;if(d._clearData(),d.option.dataLengthLimit&&d.state.data.length+items.length>d.option.dataLengthLimit){var e=d.option.message.dataLengthLimit||"Exceed Limit.";return a.isFunction(e)&&(e=e(d.state.data.length+items.length)),void(null!=e&&alert(e))}for(var f=!a.isEmptyObject(d.option.defaultState.dataSet)&&d.option.defaultState.dataSet,g=d.option.defaultState.dataSet,h=d.option.rowOption?a.isFunction(d.option.rowOption.allowEdit):!1,i=ja(d),k=0,l=b.length;l>k;k++){var m=b[k],n=m._state;m._state={edited:!1,editing:!1,selected:!1,added:!1,deleted:!1},f&&("boolean"==typeof g.edited?m._state.edited=g.edited:0,"boolean"==typeof g.editing?m._state.editing=g.editing:0,"boolean"==typeof g.selected?m._state.selected=g.selected:0,"boolean"==typeof g.added?m._state.added=g.added:0,"boolean"==typeof g.deleted?m._state.deleted=g.deleted:0),d.option.extendStateOnSet&&n&&("boolean"==typeof n.edited?m._state.edited=n.edited:0,"boolean"==typeof n.editing?m._state.editing=n.editing:0,"boolean"==typeof n.selected?m._state.selected=n.selected:0,"boolean"==typeof n.added?m._state.added=n.added:0,"boolean"==typeof n.deleted?m._state.deleted=n.deleted:0),m._index=m._index||{},d._giveDataId(m),m._index.data=k,i(tb,d,m),h&&d.option.rowOption.allowEdit.call(d,m)===!1&&(m._state.editing=!1),m._state.editing===!0&&(m._state.editing=d.state.getEditingAllState(m),d.option.parseValueOnStartEdit&&d._startupUpdateEditingData(m)),d.state.data.push(m)}if(a.isPlainObject(c)){var o=a.extend({},c);if(j(o.dataLength)&&j(o.current)){var p={};p.current=Number(o.current),p.dataLength=Number(o.dataLength),p.perPage=Number(o.perPage||d.state.data.length),p.total=Number(p.dataLength&&p.perPage?(p.dataLength/p.perPage|0)+(p.dataLength%p.perPage?1:0):o.total),d.option.paging.customPaging=p}var q=o.sorting||o.sortingKey||o.sortingColumn;null!=q&&d._setSortingInfo(q,o.sortingDirection),d.state.dynamicBinding=!0}else d.option.paging&&d.option.paging.customPaging&&delete d.option.paging.customPaging,d._processDefaultSorting(),d.state.dynamicBinding=!1;d._scrollerReset(),d.state.renderingSuppressed&&c===!0?(d._sortInternalData(),d._generateRenderTargetData()):d.calcAndRedraw(),d._triggerGridEvent("dataSetEnd",{datalist:b}),d._triggerGridEvent("dataChanged",{type:"set",datalist:b})}},tb.prototype.clear=function(a){this.dataFlush(a),this.dataEmpty()},tb.prototype.dataEmpty=function(a){var b=this;return b._triggerGridEvent("dataEmpty")===!1?!1:(b._clearData(),b._scrollerReset(),b.calcAndRedraw(),b._triggerGridEvent("dataEmptyEnd",{}),void b._triggerGridEvent("dataChanged",{type:"empty"}))},tb.prototype.cellEdit=function(b,c,d){for(var e=this,f=e._dataGet(c),g=e._columnIndexKeyToMappingList(d),h=a.isPlainObject(b),i=g.length-1;i>=0;i--){var j=g[i];(!j.hasOwnProperty("columnIndex")||h&&!b.hasOwnProperty(j.key)||!j.key||null==j.key)&&g.splice(i,1)}for(var k=[],l=!1,m=!1,n=!1,o=!1,p=!e.option.forceRefreshAllOnCellEdit,i=0,q=f.length;q>i;i++){for(var r=f[i],s=0,t=g.length;t>s;s++){var j=g[s],u=b;h&&b.hasOwnProperty(j.key)&&(u=b[j.key]);var v=r[j.key];if(e._cellEdit(r,j,u)===!1){l=!0;break}p&&v!==u&&(e._refreshCell(r,j),e._refreshByFromChangedCell(r,j,v,u),e.state.sortingInfoKeyMap[j.key]&&(m=!0),e.state.treeInfo&&j.key===e.option.tree.idKey&&(o=!0),null!=e.state.groupingKeyMap[j.key]&&(n=!0))}if(l)break;k.push(r._index.data)}k.length&&(e.option.sortClearOnEdit&&m&&e.sortClear(),e.option.forceRefreshAllOnCellEdit?e.calcAndRedraw():n||o?e.calcAndRedraw():!e.option.sortClearOnEdit&&m&&e.calcAndRedraw())},tb.prototype.rowEdit=function(b,c){var d=a.makeArray(arguments).slice(0,2);this.cellEdit.apply(this,d)},tb.prototype.dataEdit=function(a,b){var c=this;if(a){var d=c._dataGet(b);if(d&&d.length){if(c._triggerGridEvent("dataEdit",{data:a,datalist:d})===!1)return!1;if(c._dataEdit(d,a),c.option.sortClearOnEdit)for(var e in a)if(a.hasOwnProperty(e)&&c.state.sortingInfoKeyMap[e]){c.sortClear();break}c.calcAndRedraw(),c._triggerGridEvent("dataEditEnd",{datalist:d}),c._triggerGridEvent("dataChanged",{type:"edit",datalist:d})}}},tb.prototype._isCellEditValid=function(b,c,d,e){var f=this,g=b[c.key];if(f._triggerGridEvent("cellEdit",{data:b,mapping:c,value:d,prevValue:g},e)===!1)return!1;if(c.hasOwnProperty("valid")){if(a.isArray(c.valid)&&a.inArray(d,c.valid)<0)return!1;if("function"==typeof c.valid){var h=c.valid.call(f,d,b,c,e[0]);if(h===!1)return!1}}return!0},tb.prototype._cellEdit=function(b,c,d){var e=this;if(!c.readonly||la(e,b,c)!==!0){var f=e._getMultiParentMapping(c),g=e.cellElementGet(b,f.columnIndex),h=g.length?null:a(e._createCell(b,f)).appendTo(e.$wrapper),i=h?h:g,j=b[c.key],k=j!==d;if(e._isCellEditValid(b,c,d,i)===!1)return e._triggerGridEvent("cellEditInvalid",{data:b,mapping:c,value:d},i),h?h.remove():null,!1;var l={};return l[c.key]=d,e._dataEdit(b,l),e._triggerGridEvent("cellEditEnd",{data:b,mapping:c,value:d,prevValue:j},i),k&&e._triggerGridEvent("cellValueChanged",{data:b,mapping:c,value:d,prevValue:j},i),h?h.remove():null,!0}},tb.prototype._dataEdit=function(b,c){for(var d=this,e=a.isArray(b)?b:[b],f=0,g=e.length;g>f;f++){var b=e[f];if(b._original||(b._original=tb.trimObject(b)),d.state.testRowAllowSelect&&b._state.selected&&d.option.rowOption.allowSelect(b)===!1&&(b._state.selected=!1),d.state.treeInfo&&c.hasOwnProperty(d.option.tree.idKey)&&c[d.option.tree.idKey]!==b[d.option.tree.idKey])for(var h=c[d.option.tree.idKey],i=d.state.treeInfo.childCountByIdValueMap[b[d.option.tree.idKey]],j=0,k=i?i.length:-1;k>j;j++){var l=d.state.treeInfo.idValueToDataIdMap[i[j]],m=d._dataGetByIndex({id:l});if(m){var n={};n[d.option.tree.parentIdKey]=h,d._dataEdit(m,n)}}for(var o in c)if(c.hasOwnProperty(o)){var p=c[o],q=b[o]!==p;if(q&&!d.option.fullCompareForEditedState&&(b._state.edited=!0),"function"==typeof d.option.valueFilter&&(p=d._filterValueByValueFilter(b,p)),"_"===o.charAt(0)&&p&&"object"==typeof p&&b[o]&&"object"==typeof b[o])for(var r in p)b[o][r]=p[r];else b[o]=p;if(b._state.editing){if(d.state.keyMappedToMultipleColumn){var s=d._columnIndexKeyToMappingList(o);if(s&&s.length)for(var t=0,u=s.length;u>t;t++)b._state.editing.hasOwnProperty(s[t].columnIndex)&&(b._state.editing[s[t].columnIndex]=p)}else{var v=d.state.columnKeyToIndexMap[o];null!=v&&b._state.editing.hasOwnProperty(v)&&(b._state.editing[v]=p)}if(d.state.multiColumnList.length)for(var w=0,x=d.state.multiColumnList.length;x>w;w++)d._iterateMultiMapping(b,d.state.multiColumnList[w],function(a,c){c.key===o&&b._state.editing.hasOwnProperty(c.columnIndex)&&(b._state.editing[c.columnIndex]=p)})}}if(d.option.fullCompareForEditedState){var y={},z=!1;for(var o in b._original)if(b._original.hasOwnProperty(o)&&!y[o]&&!z&&0!==o.indexOf("_")&&(y[o]=!0,b._original[o]!==b[o])){z=!0;break}for(var o in b)if(b.hasOwnProperty(o)&&!y[o]&&!z&&0!==o.indexOf("_")&&(y[o]=!0,b._original[o]!==b[o])){z=!0;break}b._state.edited=z}d.state.dataCompositor?d.state.dataCompositor(d,b):null}return e},tb.prototype.startCellEdit=function(a,b){for(var c=this,d=c._dataGet(a),e=c._columnIndexKeyToMappingList(b),f=!1,g=[],h=0,i=d.length;i>h;h++){var j=d[h];j._state.editing===!0&&(j._state.editing=c.state.getEditingAllState(j));for(var k=0,l={},m=0,n=e.length;n>m;m++){var o=c._getMultiParentMapping(e[m]);if(!l[o.id]){if(l[o.id]=!0,o.multi){var p=!1;if(c._iterateMultiMapping(j,o,function(a,b){return b.editable?(p=!0,!1):void 0}),!p)continue}else if(!o.editable)continue;if(c._startCellEdit(j,o)===!1,c.state.groupRowspanned&&c.option.rowspanGroupEdit&&o.rowspan){var q=c._getGroupingRangeByMapping(j._index.data,o);if(q)for(var r=q.from;r<=q.to;r++)r!==j._index.data&&c._startCellEdit(c.state.data[r],o)}k++}}if(k&&g.push(j._index.data),f)break}g.length&&c.redraw()},tb.prototype.endCellEdit=function(a,b,c){for(var d=this,e=d._dataGet(a),f=d._columnIndexKeyToMappingList(b),g=!1,h=[],i=!1,j=!1,k=0,l=e.length;l>k;k++){var m=e[k];if(m._state.editing){for(var n=0,o={},p=0,q=f.length;q>p;p++){var r=d._getMultiParentMapping(f[p]);if(!o[r.id]){o[r.id]=!0;var s=!1;if(r.multi){if(d._iterateMultiMapping(m,r,function(a,b){return b.editable&&m._state.editing.hasOwnProperty(b.columnIndex)?(s=!0,!1):void 0}),!s)continue}else{if(!r.editable)continue;if(!m._state.editing.hasOwnProperty(r.columnIndex))continue}var t=m[r.key];if(d._endCellEdit(m,r,c)===!1){g=!0;break}if(d.state.sortingInfoKeyMap[r.key]&&t!==m[r.key]&&(i=!0),d.state.groupRowspanned&&d.option.rowspanGroupEdit&&r.rowspan){var u=d._getGroupingRangeByMapping(m._index.data,r);if(u){t!==m[r.key]&&(j=!0);for(var v=u.from;v<=u.to;v++)v!==m._index.data&&d._endCellEdit(d.state.data[v],r,c)}}n++}}if(n&&h.push(m),g)break}}return h.length&&(i&&!d.option.sortClearOnEdit||j?d.calcAndRedraw():d._refreshBoard(!0),d._triggerGridEvent("dataChanged",{type:"edit",datalist:h})),g===!0?!1:void 0},tb.prototype.saveCellEdit=function(a,b){return this.endCellEdit(a,b,!0)},tb.prototype.cancelCellEdit=function(a,b,c){for(var d=this,e=d._dataGet(a),f=d._columnIndexKeyToMappingList(b),g=!1,h=[],i=0,j=e.length;j>i;i++){for(var k=e[i],l=0,m={},n=0,o=f.length;o>n;n++){var p=d._getMultiParentMapping(f[n]);if(!m[p.id]){if(m[p.id]=!0,d._cancelCellEdit(k,p,c)===!1){g=!0;break}if(d.state.groupRowspanned&&d.option.rowspanGroupEdit&&p.rowspan){var q=d._getGroupingRangeByMapping(k._index.data,p);if(q)for(var r=q.from;r<=q.to;r++)r!==k._index.data&&d._cancelCellEdit(d.state.data[r],p,c)}l++}}if(l&&h.push(k._index.data),g)break}h.length&&d.redraw()},tb.prototype._expandEditListByGroup=function(a){if(this.state.groupRowspanned&&this.option.rowspanGroupEdit&&a.length!==this.state.data.length){for(var b=this.option.grouping.by[0],c={},d=[],e=0,f=a.length;f>e;e++)c[a[e]._index.id]=!0,d.push(a[e]);for(var e=0,f=d.length;f>e;e++){var g=d[e],h=g._index.data,i=this._getGroupingRange(h,b);if(i)for(var j=i.from;j<=i.to;j++){var k=this.state.data[j];k&&!c[k._index.id]&&d.push(k)}}return d}return a},tb.prototype.startEdit=function(a){var b=this._dataGet(a);if(b&&b.length)return this.startCellEdit(this._expandEditListByGroup(b))},tb.prototype.endEdit=function(a){var b=this._dataGet(a);if(b&&b.length){var c=this.endCellEdit(this._expandEditListByGroup(b));return c===!1?!1:void 0}},tb.prototype.saveEdit=function(a){var b=this._dataGet(a);if(b&&b.length)return this.saveCellEdit(this._expandEditListByGroup(b))},tb.prototype.cancelEdit=function(a){var b=this._dataGet(a);if(b&&b.length)return this.cancelCellEdit(this._expandEditListByGroup(b))},tb.prototype.startRowInlineEdit=function(a){var b=this;if(b.option.rowInlineEdit&&b.state.__rowInlineStartEdit){var c=b._dataGet(a)[0];c&&b.state.__rowInlineStartEdit(this,c)}},tb.prototype.endRowInlineEdit=function(){var a=this;a.option.rowInlineEdit&&a.state.__rowInlineEndEdit&&a.state.__rowInlineEndEdit(this)},tb.prototype.startCellInlineEdit=function(a,b){var c=this;if(c.option.cellInlineEdit&&c.state.__cellInlineStartEdit){var d=c._dataGet(a)[0],e=c._columnIndexKeyToMappingList(b)[0];d&&e&&c.state.__cellInlineStartEdit(d,c._getMultiParentMapping(e))}},tb.prototype.endCellInlineEdit=function(){var a=this;a.option.cellInlineEdit&&a.state.__cellInlineEndEdit&&a.state.__cellInlineEndEdit()},tb.prototype._isSpecialPurposeColumn=function(a){return a.selectorColumn||a.numberingColumn||a.rowindexColumn||a.dragdropColumn?!0:!1},tb.prototype._isCellEditable=function(a,b){var c=this;if(b.multi){var d=!1;if(c._iterateMultiMapping(a,b,function(b,e){var f=c._isCellEditable(a,e);return f===!0?(d=!0,!1):void 0}),d===!0)return!0}if(!b.editable)return!1;if(!b.key)return!1;if(a&&a._state&&a._state.deleted)return!1;if(c._isSpecialPurposeColumn(b))return!1;if(b.hasOwnProperty("allowEdit")){var e=b.allowEdit;if("function"==typeof e&&(e=e.call(this,a[b.key],a,b)),e===!1)return!1}return c.option.rowOption&&"function"==typeof c.option.rowOption.allowEdit&&c.option.rowOption.allowEdit.call(c,a)===!1?!1:b.readonly&&la(this,a,b)===!0?!1:!0},tb.prototype._startCellEdit=function(a,b){var c=this;if(!b||void 0!==b.columnIndex&&null!==b.columnIndex){var d=b.key,e=b.columnIndex;a._state.editing&&a._state.editing.hasOwnProperty(e)||c._isCellEditable(a,b)&&(a._state.editing=a._state.editing||{},b.editable&&d&&(a._state.editing[e]=a.hasOwnProperty(d)?a[d]:""),b.multi&&c._iterateMultiMapping(a,b,function(b,c){c.editable&&c.key&&(a._state.editing[c.columnIndex]=a.hasOwnProperty(c.key)?a[c.key]:"")}),c.option.parseValueOnStartEdit&&c._updateEditingCellWithoutElement(a,b))}},tb.prototype._endCellEdit=function(b,c,d){var e=this;if(!c||void 0!==c.columnIndex&&null!==c.columnIndex){if(c.multi){var f=e._iterateMultiMapping(b,c,function(a,c){return e._endCellEdit(b,c,d)===!1?!1:void 0});if(f===!1)return!1}var g=c.columnIndex,h=b._state.editing&&b._state.editing.hasOwnProperty(g),i=!1;if(h){var j=b[c.key],k=b._state.editing[g];if(e._cellEdit(b,c,k)===!1)return!1;d!==!0&&delete b._state.editing[g],j!==k&&(i=!0)}d!==!0&&a.isEmptyObject(b._state.editing)&&(b._state.editing=!1),i&&e.option.sortClearOnEdit&&e.state.sortingInfoKeyMap[c.key]&&e.sortClear()}},tb.prototype._saveCellEdit=function(a,b){return this._endCellEdit(a,b,!0)},tb.prototype._cancelCellEdit=function(b,c,d){(!c||void 0!==c.columnIndex&&null!==c.columnIndex)&&(b._state.editing&&b._state.editing.hasOwnProperty(c.columnIndex)&&(d===!0?b._state.editing[c.columnIndex]=b[c.key]:delete b._state.editing[c.columnIndex]),(!b._state.editing||a.isEmptyObject(b._state.editing))&&(b._state.editing=!1))},tb.prototype.dataGet=function(b){var c=this,d=c._dataGet.apply(c,arguments);return c.option.deepCopyOnDataGet&&a.isArray(d)&&(d=a.extend(!0,[],d)),d},tb.prototype.dataGetByIndex=function(b){var c=this,d=c._dataGetByIndex.apply(c,arguments);return c.option.deepCopyOnDataGet&&a.isPlainObject(d)&&(reslut=a.extend(!0,{},d)),d},tb.prototype.dataGetRef=function(a){return this._dataGet.apply(this,arguments)},tb.prototype.dataGetByIndexRef=function(a){return this._dataGetByIndex.apply(this,arguments)},tb.prototype._dataGetByIndex=function(a){return a&&this.state.data?a.id?this.state.dataMapById[a.id]||null:null!=a.data?this.state.data[a.data]||null:null!=a.row?this.state.renderTargetDataList[a.row]||null:null:null},tb.prototype._dataGet=function(b){var c=this,d=[];if(0===arguments.length||1===arguments.length&&a.isEmptyObject(b))return!c.option.enableDataGetAllByEmptyArray&&a.isArray(b)?d:d.concat(c.state.data);var e=a.makeArray(a.isArray(b)?b:arguments);a.isArray(b)&&arguments[1]===!0&&e.push(!0);var f=arguments[arguments.length-1]===!0;if(f)for(;a.inArray(!0,e)>-1;)e.splice(a.inArray(!0,e),1);if(!c.option.leaveDeleted&&e.length){for(var g=[],h=0,i=e.length;i>h;h++)e[h]&&e[h]._state&&e[h]._state.deleted&&g.push(e[h]);if(g.length)for(var j=c.state.deletedData||[],h=0,i=j.length;i>h;h++){for(var k=j[h],l=!1,m=0,n=g.length;n>m;m++)ka(c,j,h,g[m])&&(l=!0);l&&d.push(k)}}if(!e.length)return d.concat(c.state.data);for(var o={},p=!1,h=e.length-1;h>=0;h--)if(e[h]&&e[h]._index&&(e[h]._index.hasOwnProperty("row")||e[h]._index.hasOwnProperty("data")||e[h]._index.id)){var q=c._dataGetByIndex(e[h]._index);q&&(d.unshift(q),o[q._index.id]=!0,p=!0,e.splice(h,1))}if(e.length)if(p){for(var h=0,i=c.state.data.length;i>h;h++)if(!o[c.state.data[h]._index.id])for(var m=0,n=e.length;n>m;m++)if(ka(c,c.state.data,h,e[m],f)){d.push(c.state.data[h]);break}}else for(var h=0,i=c.state.data.length;i>h;h++)for(var m=0,n=e.length;n>m;m++)if(ka(c,c.state.data,h,e[m],f)){d.push(c.state.data[h]);break}return d},tb.prototype._makeGroupSummaryAsData=function(b){var c=this;if(!b||!b._state.groupHeader&&!b._state.groupFooter)return b;for(var d=c.state.visibleColumnMappingList,e=0,f=d.length;f>e;e++){var g=d[e];if(g.key){var h=c._renderGroupSummaryValue(b,g);h&&h.nodeType&&(h=a(h).text()),b[g.key]=null==h?"":h}}return b},tb.prototype._targetDataGet=function(b){var c=this,d=a.isArray(b)?b:a.makeArray(arguments),e=[];if(!d.length||!b){e=[].concat(c.state.targetDataList);for(var f=0,g=e.length;g>f;f++)e[f]=c._makeGroupSummaryAsData(e[f]);return e}for(var f=d.length-1;f>=0;f--)if(d[f]&&d[f]._index&&(d[f]._index.hasOwnProperty("row")||d[f]._index.hasOwnProperty("data")||d[f]._index.id)){var h=c._dataGetByIndex(d[f]._index);h&&null!=h._index.row&&(e.unshift(c._makeGroupSummaryAsData(h)),getByIndexId[h._index.id]=!0,hasGetByIndexId=!0,d.splice(f,1))}for(var f=0,g=c.state.targetDataList.length;g>f;f++)for(var h=c.state.targetDataList[f],i=0,j=d.length;j>i;i++)ka(c,c.state.targetDataList,f,d[i])&&e.push(c._makeGroupSummaryAsData(h));return e},tb.prototype.dataFlush=function(b,c){var d=this;this.option;"object"==typeof b&&(c=b),c=c||{};var e=[],f=!1;if(a.isFunction(d.option.flushCallback)){e.push(d.option.flushCallback);var g=n(d.option.flushCallback);g&&3===g.length&&(f=!0)}if(a.isFunction(b)){e.push(b);var g=n(b);g&&3===g.length&&(f=!0)}if(e.length){var h=this._dataGet({_state:{edited:!0,deleted:!1}},{_state:{added:!0,deleted:!1}}),i=this._dataGet({_state:{deleted:!0}});if(f)var j=d._dataGet({_state:{added:!0,deleted:!1}}),k=d._dataGet({_state:{added:!1,edited:!0,deleted:!1}});for(var l=0,m=e.length;m>l;l++){var g=n(e[l]);g&&3===g.length?e[l].call(d,j,k,i):e[l].call(d,h,i)}}if(c.noCommit!==!0){for(var l=0,m=d.state.data.length;m>l;l++){var o=d.state.data[l],p=!1;o._state&&(o._state.edited||o._state.added)&&!c.leaveEdited&&(o._state.added=!1,o._state.edited=!1,p=!0),p&&(d.state.dataCompositor?d.state.dataCompositor(d,o):0,o._original=tb.trimData(o))}if(!c.leaveDeleted){if(d.option.leaveDeleted&&d.dataDelete({_state:{deleted:!0}},!0),this.state.deletedData.length)for(var l=0,m=d.state.deletedData.length;m>l;l++)delete d.state.dataMapById[d.state.deletedData[l]._index.id];this.state.deletedData=[]}c.leaveEdited||c.noredraw||d.calcAndRedraw()}},tb.prototype.dataRestore=function(b){var c=this,d=c._dataGet(b);if(d&&d.length){for(var e=ba(b),f=0,g=0;g<d.length;g++){var h=d[g],i=c.state.data[h._index.data];i._original&&a.extend(i,i._original),i._state.edited&&f++,i._state.edited=!1,e||c.refreshRow(h)}e&&f&&c.calcAndRedraw()}},tb.prototype.dataDelete=function(a,b,c){var d=this,e=d._dataGet(a);if(e&&e.length){if(d.option.tree&&d.option.tree.useTree&&(e=d._addTreeChildToList(e)),c!==!0&&d._triggerGridEvent("dataDelete",{datalist:e})===!1)return!1;d.state.deletedData=d.state.deletedData||[],e.sort(function(a,b){return a._index.data-b._index.data});for(var f=0,g=0,h=e.length;h>g;g++){var i=e[g];i._state.deleted||(i._state.deleted=!0,b===!0?(delete d.state.dataMapById[i._index.id],d.state.data.splice(i._index.data-f,1)):d.option.leaveDeleted?i._state.added&&(delete d.state.dataMapById[i._index.id],d.state.data.splice(i._index.data-f,1)):(d.state.deletedData.push(i),d.state.data.splice(i._index.data-f,1)),d.state.dataCompositor?d.state.dataCompositor(d,i):0,f++)}c!==!0&&(e&&e.length&&d.calcAndRedraw(),d._triggerGridEvent("dataDeleteEnd",{datalist:e}),d._triggerGridEvent("dataChanged",{type:"delete",datalist:e}))}},tb.prototype.dataUndelete=function(a){var b=this;if(b.state.deletedData=b.state.deletedData||[],b.option.leaveDeleted){var c=b._dataGet(a);if(!c||!c.length)return;if(!1===b._triggerGridEvent("dataUndelete",{datalist:c}))return!1;for(var d=0,e=c.length;e>d;d++)c[d]._state.deleted=!1,b.state.dataCompositor?b.state.dataCompositor(b,c[d]):0;c.length&&(b.calcAndRedraw(),b._triggerGridEvent("dataUndeleteEnd",{datalist:c}),b._triggerGridEvent("dataChanged",{type:"undelete",datalist:c}))}else{for(var f=0,g=[],h=[],i=[],d=0;d<b.state.deletedData.length;d++)(!a||ka(b,b.state.deletedData,d,a))&&(h.push(b.state.deletedData[d]),i.push(d));if(!1===b._triggerGridEvent("dataUndelete",{datalist:h}))return!1;for(var d=0,e=h.length;e>d;d++){var j=h[d];j._state.deleted=!1,g.push(j),b.state.data.splice(j._index.data,0,j),b.state.dataCompositor?b.state.dataCompositor(b,j):0,f++}for(var d=i.length-1;d>=0;d--)b.state.deletedData.splice(i[d],1);f&&(b.calcAndRedraw(),b._triggerGridEvent("dataUndeleteEnd",{datalist:g}),b._triggerGridEvent("dataChanged",{type:"undelete",datalist:g}))}},tb.prototype.dataCopy=function(b,c){var d=this;if(c||(c={}),b&&!a.isEmptyObject(b)){var e=d._dataGet(b);if(e&&e.length){var f=c.count||1,g=c.cloneColumn;void 0===g&&(g="all");var h=d.option.grouping&&d.option.grouping.by&&d.option.grouping.useGrouping&&!!c.cloneGroup,i=c._index||c.position,j={};if(c.recursive){for(var k=0,l=e.length;l>k;k++)j[e[k]._index.id]=!0;e=d._addTreeChildToList(e,!1,!1)}if(d._triggerGridEvent("dataCopy",{datalist:e,copyoption:c})===!1)return!1;var m=null,n=null;c.parentQuery?(m=d._dataGet(c.parentQuery)[0],m&&(n=m[d.option.tree.idKey])):null===c.parentQuery&&(m=!0,n=d.option.tree.rootNodeParentIdValue);var o=[],p={},q=!1;if(a.isArray(g)){q=!0;for(var k=0,l=g.length;l>k;k++)p[g[k]]=!0}else if(g===!0){q=!0;for(var k=0,l=d.option.columnMapping.length;l>k;k++){var r=d.option.columnMapping[k];r.key&&(p[r.key]=!0)}}for(var s={},t=0,u=f;u>t;t++)for(var k=0,l=e.length;l>k;k++){var v=e[k],w={_index:{},_state:{edited:!1,editing:!1,selected:!1,added:!0,deleted:!1}};if(h)for(var x=0,y=d.option.grouping.by.length;y>x;x++){var z=d.option.grouping.by[x];"string"==typeof z&&(w[z]=v[z])}else g&&a.each(v,function(a,b){0!==a.indexOf("_")&&("all"===g||!q||p[a])&&(w[a]=b)});if(d._giveDataId(w),d.state.treeInfo){var A=w[d.option.tree.idKey],B=d._getUniqueIdValueForTreeNode(w);s[A]=B,w[d.option.tree.idKey]=B,d.state.treeInfo.idValueToDataIdMap[w[d.option.tree.idKey]]=w._index.id,m&&j[v._index.id]&&(w[d.option.tree.parentIdKey]=n)}o.push(w)}if(o.length){if(!a.isEmptyObject(s))for(var C=!0;C;){C=!1;for(var k=0,l=o.length;l>k;k++){var w=o[k];s[w[d.option.tree.parentIdKey]]&&(w[d.option.tree.parentIdKey]=s[w[d.option.tree.parentIdKey]],C=!0)}}var D=null;if(void 0===i)D=e[e.length-1]._index.data+1;else if(a.isPlainObject(i)){var E=d._dataGetByIndex(i);E&&(D=E._index.data)}else"end"===i?D=d.state.data.length:"number"==typeof i&&(D=d.state.renderTargetDataList[i-1]._index.data+1);null===D&&(D=d.state.data.length),o.unshift(D,0),Array.prototype.splice.apply(d.state.data,o),d.sortClear(),d.calcAndRedraw(),o.shift(),o.shift(),d._triggerGridEvent("dataCopyEnd",{datalist:o}),d._triggerGridEvent("dataChanged",{type:"copy",datalist:o})}}}},tb.prototype._hasPinnedData=function(b){var c=this;return"string"===a.type(b)?a.inArray(b,c.state.pinnedDataIdList)>=0:a.isArray(c.state.pinnedDataIdList)&&c.state.pinnedDataIdList.length},tb.prototype.rowFix=function(a){var b=this;b.option.rowFixCount=a,b._refreshBoard(!0)},tb.prototype.rowUnfix=function(){var a=this;a.option.rowFixCount=0,a._refreshBoard(!0)},tb.prototype.columnFix=function(a){if(void 0!==a){var b=this._columnIndexKeyToMappingList(a);if(b&&b.length){var c=b[0].columnIndex;this.updateOption({
columnFixUpto:c})}}},tb.prototype.columnUnfix=function(){this.updateOption({columnFixUpto:"unfix"})},tb.prototype.addPin=function(b){var c=this;c.state.pinnedDataIdList=c.state.pinnedDataIdList||[],c.state.pinnedDataIdMap=c.state.pinnedDataIdMap||{};var d=!1;if(b&&!a.isEmptyObject(b)){var e=c._dataGet(b);if(e.length)for(var f=0,g=e.length;g>f;f++){var h=e[f];h&&h._index.id&&!c.state.pinnedDataIdMap[h._index.id]&&(c.state.pinnedDataIdList.push(h._index.id),c.state.pinnedDataIdMap[h._index.id]=!0,d=!0)}}d&&c.calcAndRedraw()},tb.prototype.dataPin=function(a){var b=this;return b.state.pinnedDataIdList=null,b.state.pinnedDataIdMap=null,b.addPin(a)},tb.prototype.dataUnpin=function(b){var c=this,d=!1;if(!b||a.isEmptyObject(b))c.state.pinnedDataIdList&&c.state.pinnedDataIdList.length&&(c.state.pinnedDataIdList=null,c.state.pinnedDataIdMap=null,d=!0);else{var e=c._dataGet(b);if(e&&e.length&&c.state.pinnedDataIdList&&c.state.pinnedDataIdList.length)for(var f=0,g=e.length;g>f;f++){var h=e[f];if(h&&c.state.pinnedDataIdMap[h._index.id]){var i=a.inArray(h._index.id,c.state.pinnedDataIdList);i>=0&&(c.state.pinnedDataIdList.splice(i,1),delete c.state.pinnedDataIdMap[h._index.id],d=!0)}}}d&&c.calcAndRedraw()},tb.prototype._rowUnfocusAll=function(){var b=this;b.state.focusedDataId&&a.each(b.state.focusedDataId,function(a,c){var d=b._dataGetByIndex({id:c});d&&(d._state.focused=!1,b.rowElementGet({_index:{id:c}}).removeClass("focused"))})},tb.prototype._rowFocus=function(a){var b=this;b.state.focusedDataId=b.state.focusedDataId||[];var c=null;if(a&&a.nodeType&&a.className.indexOf("bodycell")>=0?c=b._dataGetByIndex({id:a.getAttribute("data-alopexgrid-dataid")}):a&&a.index?c=b._dataGetByIndex(a.index):a&&(c=b._dataGet(a)[0]),c&&!c._state.focused){b._rowUnfocusAll(),b.state.focusedDataId=[];var d=[c];if(b.state.groupRowspanned&&(b.option.rowspanGroupFocus===!0||"number"==typeof b.option.rowspanGroupFocus||"string"==typeof b.option.rowspanGroupFocus)){var e=b.option.grouping.by[0];"number"==typeof b.option.rowspanGroupFocus?e=b.option.grouping.by[b.option.rowspanGroupFocus]:"string"==typeof b.option.rowspanGroupFocus?e=b.option.rowspanGroupFocus:b.option.rowspanGroupFocus===!0&&(e=b.state.topmostGroupRowspanKey);var f=b._getGroupingRange(c._index.data,e);if(f){var g=f.from,h=f.to;d=[];for(var i=g;h>=i;i++)d.push(b.state.data[i])}}for(var j=0,k=d.length;k>j;j++)d[j]._state.focused=!0,b.state.focusedDataId.push(d[j]._index.id),b.rowElementGet({_index:{id:d[j]._index.id}}).addClass("focused")}},tb.prototype._rowSelectAllUncheck=function(){var a=this;a.state.selectAll=!1;for(var b=a.$wrapper[0].querySelectorAll(".headercell.selector-column"),c=0,d=b.length;d>c;c++){var e=b[c],f=e.getElementsByTagName("input")[0];if(f&&tb.renderUtil.hasClass(f,"selector-column-input")){f.checked=!1;var g=f.parentElement;g&&"LABEL"===String(g.tagName).toUpperCase()&&tb.renderUtil.hasClass(g,"alopexgrid-input-checkbox-wrapper")&&tb.renderUtil.removeClass(g,"checked")}}},tb.prototype._rowSelectAllCheck=function(){var a=this;a.state.selectAll=!0;for(var b=a.$wrapper[0].querySelectorAll(".headercell.selector-column"),c=0,d=b.length;d>c;c++){var e=b[c],f=e.getElementsByTagName("input")[0];if(f&&tb.renderUtil.hasClass(f,"selector-column-input")){f.checked=!0;var g=f.parentElement;g&&"LABEL"===String(g.tagName).toUpperCase()&&tb.renderUtil.hasClass(g,"alopexgrid-input-checkbox-wrapper")&&tb.renderUtil.addClass(g,"checked")}}},tb.prototype._rowSelectAll=function(b,c){var d=this;if(d.state.data&&d.state.data.length&&d.state.renderTargetDataList&&d.state.renderTargetDataList.length&&!d.state.rowSingleSelect){if(b){if(b=a.event.fix(b),!a(c||b.currentTarget).hasClass("selector-column"))return;if("INPUT"!==b.target.tagName)return}var e=a(c||b.target),f=c||b.currentTarget?a(c||b.currentTarget):e.closest(".cell"),g=f.find("input"),h=g.prop("checked"),i=[];if(d._triggerGridEvent("dataSelect",{datalist:d.state.renderTargetDataList,select:h})===!1)return!1;for(var j=0,k=d.state.renderTargetDataList.length;k>j;j++){var l=d.state.renderTargetDataList[j];d.state.testRowAllowSelect&&d.option.rowOption.allowSelect(l)===!1?l._state.selected=!1:l._state.selected=h,i.push(l)}d.state.selectAll=h,d.redraw(),d._triggerGridEvent("dataSelectEnd",{datalist:d.state.renderTargetDataList}),d._triggerGridEvent("dataChanged",{type:"select",datalist:d.state.renderTargetDataList})}},tb.prototype.rowSelect=function(a,b){var c=this;c.option;if(!c._noData()){var d=a.nodeType?[c.state.data[a.getAttribute("data-alopexgrid-dataindex")]]:c._dataGet(a);if(d&&d.length){var e=null;c.state.rowSingleSelect&&(d=[d[0]],d[0]&&(e=d[0]._index.data));var f=[];if(c._triggerGridEvent("dataSelect",{datalist:d,select:b})===!1)return!1;for(var g=0,h=d.length;h>g;g++)if(d[g]){var i=d[g]._index.data,j=c.state.data[i];i=Number(i);var k=!!j._state.selected,l="toggle"==b?!j._state.selected:!!b;if(k!==l&&f.push(i),c.state.testRowAllowSelect&&c.option.rowOption.allowSelect(j)===!1&&(l=!1),c.state.columnRowspanned&&c.option.rowspanGroupSelect)for(var m=da(c.state.columnRowspanIndex,i),n=m.from,o=m.to,p=n;o>p;p++)c.state.data[p]._state.selected=l,l===!1&&(c.state.selectAll=!1),f.push(p);else if(c.state.groupRowspanned&&(c.option.rowspanGroupSelect||"number"==typeof c.option.rowspanGroupSelect)){var q="string"==typeof c.option.rowspanGroupSelect?c.option.rowspanGroupSelect:c.option.grouping.by[0];"number"==typeof c.option.rowspanGroupSelect?q=c.option.grouping.by[c.option.rowspanGroupSelect]:c.option.rowspanGroupSelect===!0&&(q=c.state.topmostGroupRowspanKey);var r=c._getGroupingRange(i,q);if(r)for(var n=r.from,o=r.to,p=n;o>=p;p++)c.state.data[p]._state.selected=l,l===!1&&(c.state.selectAll=!1),f.push(p)}else j._state.selected=l,l===!1&&(c.state.selectAll=!1),f.push(i);if(c.state.groupRowspanned){var q=c.state.topmostGroupRowspanKey,r=c._getGroupingRange(i,q);if(r)for(var n=r.from,o=r.to,p=n;o>=p;p++)f.push(p)}c.state.dataCompositor?c.state.dataCompositor(c,j):0}if(c.state.selectAll?c._rowSelectAllCheck():c._rowSelectAllUncheck(),c.state.rowSingleSelect){for(var g=0;g<c.state.data.length;g++){var s=c.state.data[g];!!s._state.selected!=!1&&g!==e&&(f.push(Number(g)),s._state.selected=!1,c.state.dataCompositor?c.state.dataCompositor(c,s):0)}if(c.state.groupRowspanned)if(jb)c.$wrapper.find(".cell-rowspan-contain-selected").removeClass("selected cell-rowspan-contain-selected");else for(var t=c.$wrapper[0].getElementsByClassName("cell-rowspan-contain-selected");t.length;)tb.renderUtil.removeClass(t[0],"selected"),tb.renderUtil.removeClass(t[0],"cell-rowspan-contain-selected")}if(c.option.cellRefreshOnRowSelect)c._refreshBoard({dataIndexList:f});else{for(var u=[],v={},w={},x=[],y={},z={},A={},g=0,h=f.length;h>g;g++){var i=f[g],B=c.state.data[i];if(!A[B._index.id]){A[B._index.id]=!0;var C=c._dataGetByIndex({row:B._index.row-1}),D=c._dataGetByIndex({row:B._index.row+1});B._state.selected?(u.push(B),C&&(v[C._index.id]=C),D&&(w[D._index.id]=D)):(x.push(B),C&&(y[C._index.id]=C),D&&(z[D._index.id]=D))}}for(var E in y)for(var B=y[E],F=c.rowElementGet({_index:{id:E}}),p=0,G=F.length;G>p;p++)tb.renderUtil.removeClass(F[p],"nextrow-selected");for(var E in z)for(var B=z[E],F=c.rowElementGet({_index:{id:E}}),p=0,G=F.length;G>p;p++)tb.renderUtil.removeClass(F[p],"prevrow-selected");for(var E in v)for(var B=v[E],F=c.rowElementGet({_index:{id:E}}),p=0,G=F.length;G>p;p++)tb.renderUtil.addClass(F[p],"nextrow-selected");for(var E in w)for(var B=w[E],F=c.rowElementGet({_index:{id:E}}),p=0,G=F.length;G>p;p++)tb.renderUtil.addClass(F[p],"prevrow-selected");for(var g=0,h=x.length;h>g;g++)for(var B=x[g],F=c.rowElementGet({_index:{id:B._index.id}}),p=0,G=F.length;G>p;p++)if(tb.renderUtil.removeClass(F[p],"selected"),c.state.groupRowspanned&&tb.renderUtil.removeClass(F[p],"cell-rowspan-contain-selected"),tb.renderUtil.hasClass(F[p],"selector-column")){var H=F[p].getElementsByTagName("input")[0];H&&(H.checked=!1,H.alopexgridChecked=!1,H.removeAttribute("checked"));var I=F[p].getElementsByTagName("label")[0];I&&tb.renderUtil.removeClass(I,"checked")}for(var g=0,h=u.length;h>g;g++)for(var B=u[g],F=c.rowElementGet({_index:{id:B._index.id}}),p=0,G=F.length;G>p;p++)if(tb.renderUtil.addClass(F[p],"selected"),c.state.groupRowspanned&&tb.renderUtil.hasClass(F[p],"cell-rowspan-column")&&tb.renderUtil.addClass(F[p],"cell-rowspan-contain-selected"),tb.renderUtil.hasClass(F[p],"selector-column")){var H=F[p].getElementsByTagName("input")[0];H&&(H.checked=!0,H.alopexgridChecked=!0,H.setAttribute("checked","checked"));var I=F[p].getElementsByTagName("label")[0];I&&tb.renderUtil.addClass(I,"checked")}}c._triggerGridEvent("dataSelectEnd",{datalist:d}),c._triggerGridEvent("dataChanged",{type:"select",datalist:d})}}},tb.prototype._getRecentData=function(a){var b=this,c=null;if("string"==typeof a){for(var d=0,e=b.state.data.length;e>d;d++)if(b.state.data[d]._index&&b.state.data[d]._index.id===a){c=b.state.data[d];break}}else"number"==typeof a&&(c=b.state.data[a]);return c?tb.currentData(c):null},tb.prototype._cellIdFromData=function(a,b){return[this.key,"number"==typeof a?a:a._index.row,b].join("-")},tb.prototype._cellIdFromRowIndex=function(a,b){return[this.key,a,b].join("-")},tb.prototype._isEditingCell=function(a,b){var c=this,d="object"==typeof a&&a?a:c.state.renderTargetDataList[a],e=b&&"object"==typeof b?b:S(this,b);if(e&&e.multi){var f=!1;if(c._iterateMultiMapping(d,e,function(a,b){return ma(d,b)?(f=!0,!1):void 0}),f===!0)return!0}return ma(d,e)};var yb=["cell-selected","cell-selected-topline","cell-selected-bottomline","cell-selected-leftline","cell-selected-rightline","cell-selected-focus"].join(" ");tb.prototype._startCellSelectEngine=function(b){var c=this,d=".alopexgridCellSelectEngine",e=".alopexgridCellSelectEngineMouseenter";if(c.$root.off(d),c.$wrapper.off(d),c.$wrapper.off(e),c.$focusfixture.off(d),hb.off(d+c.key),hb.off(e+c.key),b){var f=null;this.$focusfixture.on("keydown"+d,{self:this,keytimer:{id:null}},function(b){var c=b.data.self;if(!f){var d=c.$focusfixture[0],e=b.shiftKey,g=(b.altKey,b.metaKey),i=b.ctrlKey,j=b.keyCode,k=String.fromCharCode(96<=b.keyCode&&b.keyCode<=105?b.keyCode-48:b.keyCode),l=d.renderedIndex,m=d.columnIndex,n=c.state.renderTargetDataList[l],o=c.state.columnIndexToMapping[m],p=c._isEditingCell(l,m),q=20,r=null,s=!1;if(13===j)Oa(c,e?-1:1,0);else if(9===j)Oa(c,0,e?-1:1),b.preventDefault();else if(113===j||32===j)if(!p&&c._isCellEditable(n,o)){var t=Da(c,l,m);t&&(l=t.from);var u=null;if(c.option.cellInlineEdit?u=c.state.__cellInlineEndEdit():c.option.rowInlineEdit&&(u=c.state.__rowInlineEndEdit(c)),u!==!1||c.option.allowStartCellInlineEditWithInvalid===!0){c.option.cellInlineEdit?c.state.__cellInlineStartEdit(n,o):c.option.rowInlineEdit&&c.state.__rowInlineStartEdit(c,n);var v=Ja(c,l,m).find("input,select,textarea").eq(0);if(v.focus(),"text"===v.prop("type")){var w=v.val();v.val("").val(w)}32===j&&"text"===v.prop("type")&&b.preventDefault()}}else{var x=Ja(c,l,m),v=x.find("input,select,textarea"),y=(v.prop("type"),c._extractRenderObject(n,o)),z=y?y.type:null;if(x.hasClass("selector-column")){var A=n._state.selected;if(c.rowSelect({_index:{row:l}},"toggle"),c.state.hasSelectorColumn&&n._state.selected!==A){var B={data:n,mapping:o,value:n._state.selected,prevValue:A};c._triggerGridEvent("cellValueEditing",B,x),c._triggerGridEvent("cellValueChanged",B,x)}}else if(32===j&&c.option.renderMapping[z]&&"function"==typeof c.option.renderMapping[z].toggle){var C=c.option.renderMapping[z].toggle;C.call(c,x[0],n,y,o,c),c._updateEditingCell(x)}else v.eq(0).focus()}else if(39===j)if(e)Pa(c,!1,!0,!1,!1);else{r="right";for(var D=Xa(c,m,1),n=c._getRenderedDataFromRenderedIndex(l),E=m;E>=0;E--){var o=S(c,E);if(o&&ha(o)){var F=Fa(c,n,o);if(F>E&&F>=m){D=Xa(c,F,1);break}}}Na(c,l,D,r)}else if(37===j)if(e)Pa(c,!0,!1,!1,!1);else{r="left";for(var D=Wa(c,m,1),n=c._getRenderedDataFromRenderedIndex(l),E=m;E>=0;E--){var o=S(c,E);if(o&&ha(o)){var F=Fa(c,n,o);if(F>=m){D=Wa(c,o.columnIndex,1);break}}}Na(c,l,D,r)}else if(38===j||33===j){var t=Da(c,l,m);t&&(l=t.from);var G=33===j?q:1;if(e)Pa(c,!1,!1,G,!1);else{r="up";var H=Math.max(l-G,0);Na(c,H,m,r)}b.preventDefault()}else if(40===j||34===j){var t=Da(c,l,m);t&&(l=t.to);var G=34===j?q:1;if(e)Pa(c,!1,!1,!1,G);else{r="down";var H=l+G;Na(c,H,m,r)}b.preventDefault()}else if((i||g)&&"V"===k.toUpperCase())return void(b.data.keytimer.id&&clearTimeout(b.data.keytimer.id));if(Ra(c),c.state.cellSelection){(33===j||34===j||38===j||40===j)&&b.preventDefault();var I=c.state.cellSelection.focusRenderedIndex,J=c.state.cellSelection.focusColumnIndex,x=Ja(c,I,J);b.data.keytimer.id&&clearTimeout(b.data.keytimer.id),b.data.keytimer.id=setTimeout(function(){var b=s?"":a.trim(d.innerText||d.textContent);d.innerHTML="";var e=S(c,J);if(b&&e&&e.editable&&c.option.cellInlineEdit){if(!c._isEditingCell(I,J)){var g=c.state.__cellInlineEndEdit();(g!==!1||c.option.allowStartCellInlineEditWithInvalid===!0)&&c.state.__cellInlineStartEdit(n,e)}if(x=c.cellElementGet({_index:{row:I}},J),h(),x&&x.length){var i=x.find("input,textarea");if(i.length){var j=i.prop("type");if("radio"===j)i.filter(":checked").focus();else if("checkbox"===j)i.focus();else{i[0].focus(),i.val("");var k=b.charCodeAt(0);256>k&&i.val(b)}c._updateEditingCell(x)}else x.find("select").focus();f=null}}else setTimeout(function(){f=null},1)},50)}}}),this.$focusfixture.on("copy"+d,{self:this},function(b){var c=b.data.self,d=Sa(c);j(d)||(d=""),d=String(d);var e="",f=!1,g=!(!c.option.cellSelectableOption||!c.option.cellSelectableOption.copyTextformOnly);if(d.indexOf("<table")>=0?(f=!0,a(d).find("tr").each(function(b,c){var d=[];a(c).find("td").each(function(b,c){d.push(a(c).text())}),e+=d.join("	"),e+="\r\n"})):e=d,(b.originalEvent||b).clipboardData){b.preventDefault();var h=(b.originalEvent||b).clipboardData;"string"==typeof d&&(f&&!g&&h.setData("text/html",d),h.setData("text/plain",e))}else window.clipboardData&&window.clipboardData.setData&&(f?(window.clipboardData.setData("Text",e),g||(c.$focusfixture.empty().append(a(d)),Q(c.$focusfixture.get(0),!0),setTimeout(function(){La(c)},0))):window.clipboardData.setData("Text",e))}),this.$focusfixture.on("paste"+d,{self:this},function(a){var b=a.data.self,c="";if((a.originalEvent||a).clipboardData){if(c=(a.originalEvent||a).clipboardData.getData("text/html"),!Va(b,c)){if(c=(a.originalEvent||a).clipboardData.getData("text/plain"),!c||!c.length)return;var d=b.state.cellSelection.focusRenderedIndex,e=b.state.cellSelection.focusColumnIndex;return Ua(b,d,e,c)!==!1&&b.cellEdit(c,{_index:{row:d}},e),void a.preventDefault()}b.$focusfixture.empty(),a.preventDefault()}else setTimeout(function(){if(c=b.$focusfixture.html(),b.$focusfixture.empty(),!Va(b,c)){if(!c||!c.length)return;var a=b.state.cellSelection.focusRenderedIndex,d=b.state.cellSelection.focusColumnIndex;return void(Ua(b,a,d,c)!==!1&&b.cellEdit(c,{_index:{row:a}},d))}},5)});var g={id:null};this.$root.on("mousedown"+d,".bodycell",{self:this},function(b){function c(a,b,c){return parseInt(Math.max(Math.min(500,Math.abs(a-b)/(5*(c||1))),1))}var d=b.data.self,f=a(this);if(!tb.renderUtil.isGridPointerActionProhibited(b.target)){if(tb.renderUtil.hasClass(this,"emptycell")){var i=!!d.state.cellSelection;return oa(d),void(i&&sa(d))}var j=parseInt(f.attr("data-alopexgrid-rowindex")),k=parseInt(f.attr("data-alopexgrid-columnindex"));if(/(INPUT)|(SELECT)|(TEXTAREA)/.test(b.target.tagName))return void(d.option.disableCellFocusAtInput||Na(d,j,k,null,!0));if(!f.hasClass("cell-unselectable")){H(function(){setTimeout(function(){I(),hb.trigger("__alopexgridcellselectdragend")},0)}),Na(d,j,k);var l=d.$wrapper.width(),m=d.$wrapper.height(),n=d.$wrapper.offset();g.id&&(clearInterval(g.id),g.id=null),Ra(d),d.$wrapper.off(e),hb.off(e+d.key),hb.on("mouseup"+e+d.key+d.eventns+" touchend"+e+d.key+d.eventns+" __alopexgridcellselectdragend"+e+d.key+d.eventns,{self:d,timer:g},function(a){var b=a.data.self;a.data.timer.id&&(clearInterval(a.data.timer.id),a.data.timer.id=null),a.data.self.$wrapper.off(e),hb.off(e+a.data.self.key);var c=a.target.tagName;setTimeout(function(){if("INPUT"!==c&&"SELECT"!==c&&"TEXTAREA"!==c){var a=document.activeElement?document.activeElement.tagName:null;"INPUT"!==a&&"SELECT"!==a&&"TEXTAREA"!==a&&La(b,null,null)}},0)}),hb.on("mousemove"+e+d.key+d.eventns,{self:d,height:m,width:l,offset:n,timer:g},function(a){var b=a.data.self,d=a.data.width,e=a.data.height,f=a.data.offset,g=f.left,h=f.top,i=a.pageX,l=a.pageY,m=null,n=a.data.timer,o=25,p=b.state.headerHeight||0,q=b.option.rowFixCount,r=(b.state.fixedColumnMapping,0),s=b.state.fixedColumnWidth||0;if(q)for(var t=0;q>t;t++){var u=b.state.renderTargetDataList[t];u&&(r+=b.state.rowHeightMapByDataId[u._index.id]||b.state.rowHeight)}else{var v=b.state.pinnedDataIdList;if(v&&v.length)for(var t=0,w=v.length;w>t;t++){var x=v[t],y=b.state.dataIdToIndexMap[x];if(y>=0){var u=b.state.data[y];r+=b.state.rowHeightMapByDataId[x]||b.state.rowHeight}}}var z=h+p,A=z+r,B=g+s,C=80,D=wa(b),E=va(b),H=(za(b,j),Aa(b,k),xa(b),ya(b),F(b),G(b),!1),I=!1;n.id&&(clearInterval(n.id),n.id=null),D&&A>l&&(H=!0),E&&B>i&&(I=!0),b.state.hasVerticalScrollbar||(H=!0),b.state.hasHorizontalScrollbar||(I=!0),i<f.left+s+o&&!I?(m=function(){var a=c(i,f.left+s+o,8);b._scrollLeftEvent(1*a)},C=160):i>f.left+d-o&&!I?(m=function(){var a=c(i,f.left+d-o,8);b._scrollRightEvent(1*a)},C=160):l<f.top+o+p+r&&!H?m=function(){var a=c(l,f.top+o+p+r,1.5);b._scrollUpEvent(1*a)}:l>f.top+e-o&&!H&&(m=function(){var a=c(l,f.top+e-o,1.5);b._scrollDownEvent(1*a)}),m||(m=function(){n.id&&(clearInterval(n.id),n.id=null)}),a.preventDefault(),m(),n.id=setInterval(m,C)}),d.$wrapper.on("mouseenter"+e,".bodycell",{self:d},function(b){if(!tb.renderUtil.hasClass(this,"emptycell")){var c=b.data.self,d=c.state.cellSelection.focusColumnIndex,e=c.state.cellSelection.focusRenderedIndex,f=a(this),g=parseInt(f.attr("data-alopexgrid-rowindex")),i=parseInt(f.attr("data-alopexgrid-columnindex")),j=(Da(c,g,i),wa(c)),k=va(c),l=za(c,g),m=Aa(c,i),n=xa(c),o=ya(c),p=F(c),q=G(c),r=!1;h(),!j||l||o||(g=c.option.rowFixCount,c._scrollTopEvent(!0),r=!0),!k||m||n||(c._scrollLeftEvent(void 0,!0),i=c.state.visibleColumnMappingList[c.state.visibleIndexMapByColumnIndex[c.state.fixupto]+1].columnIndex||c.state.maxColumnIndex,r=!0),j||!l||o||p||(g=c.state.refreshbodycell.renderedDataList[c.option.rowFixCount]._index.row),k||!m||n||q||(i=c.state.refreshbodycell.renderedColumnMappingList[c.state.refreshbodycell.renderedFixedColumnMappingList.length].columnIndex),r&&c._refreshBoard(),Ba(c,e,d,g,i)}})}}})}else oa(this)},tb.prototype._enableHeaderSelect=function(b){var c=this,d=".alopexgridHeaderSelectEngine",e=d+c.key+c.key,f=d+c.key;c.$wrapper.off(d).off(f),hb.off(f).off(e),b===!0&&(c.state.headerSelection=c.state.headerSelection||{timer:{id:null}},c.$wrapper.on("mousedown"+d,".headercell",{self:c,info:c.state.headerSelection},function(b){var c=b.data.self;if(c.$wrapper.off(f),hb.off(f),1===b.which&&!tb.renderUtil.isGridPointerActionProhibited(b.target)){var d=a(this),e=parseInt(d.attr("data-alopexgrid-columnindex"));Ya(c),b.data.info.from=e,c.$wrapper.on("mouseenter"+f,".headercell",{self:c,info:b.data.info},function(b){var c=b.data.self,d=a(this),e=parseInt(d.attr("data-alopexgrid-columnindex"));b.data.info.to=e;var g=Math.min(b.data.info.from,b.data.info.to),i=Math.max(b.data.info.from,b.data.info.to);c.$wrapper.find(".headercell").removeClass("header-selected").filter(function(){var a=this.getAttribute("data-alopexgrid-columnindex");return a&&a>=g&&i>=a}).addClass("header-selected"),h(),b.data.preventSelectStartSet||(hb.on("selectstart"+f+c.eventns,function(a){a.preventDefault()}),b.data.preventSelectStartSet=!0)});var g=c.$wrapper.offset(),i=c.$wrapper.outerWidth();hb.on("mousemove"+f+c.eventns,{self:c,offset:g,width:i},function(a){var b=a.data.self,c=a.data.offset,d=a.data.width,e=b.state.headerSelection.timer;a.preventDefault(),e.id&&(clearInterval(e.id),e.id=null),a.pageX-c.left<50?e.id=setInterval(function(){b._scrollLeftEvent(1)},80):c.left+d-a.pageX<50&&(e.id=setInterval(function(){b._scrollRightEvent(1)},80))}),hb.on("mouseup"+f+c.eventns,{self:c,info:b.data.info},function(a){var b=a.data.self;b.$wrapper.off(f),hb.off(f);var c=b.state.headerSelection.timer;c.id&&(clearInterval(c.id),c.id=null);var d=Math.min(b.state.headerSelection.from,b.state.headerSelection.to),e=Math.max(b.state.headerSelection.from,b.state.headerSelection.to);return isNaN(d)||isNaN(e)||d===e?void Ya(a.data.self):(b.state.headerSelection.from=d,void(b.state.headerSelection.to=e))})}}),hb.on("mousedown"+e+c.eventns,{self:c,info:c.state.headerSelection},function(b){var c=a(b.target);c.closest("."+_a.split(" ").join(".")).attr("data-alopexgrid")!==b.data.self.key?Ya(b.data.self):c.closest(".bodycell").length&&Ya(b.data.self)}))},tb.prototype.sortingInfo=function(){var a=this,b=[];if(b.sorted=a.state.sortingInfo&&a.state.sortingInfo.length,b.sorted){var c=a.state.columnMappingMapById[a.state.sortingInfo[0].mappingId];b.sortingKey=c.key,b.sortingColumn=c.columnIndex,b.sortingDirection=a.state.sortingInfo[0].sortingDirection;for(var d=0,e=a.state.sortingInfo.length;e>d;d++){var f={},c=a.state.columnMappingMapById[a.state.sortingInfo[d].mappingId];f.sortingKey=c.key,f.sortingColumn=c.columnIndex,f.sortingDirection=a.state.sortingInfo[d].sortingDirection,f.mapping=c,f.order=a.state.sortingInfo[d].sortedOrder,b.push(f)}}return b},tb.prototype._usePager=function(){var a=this.option.pager;return"function"==typeof a&&(a=a.call(this,this.pageInfo())),a===!0},tb.prototype.pageInfo=function(){return this.state.pagingInfo},tb.prototype.pageSet=function(a){var b=this,c=b.pageInfo(),d=c.current;return"first"===a?a=1:"prev"===a?a=Math.max(d-1,1):"next"===a?a=Math.min(d+1,c.total):"last"===a&&(a=c.total),a=Math.min(Math.max(1,Number(a)),c.total),a||(a=1),b._triggerGridEvent("pageSet",{page:a,pageinfo:c})===!1?!1:(b.option.paging.current=a,b._rowSelectAllUncheck(),b._scrollerReset(),oa(b),b.calcAndRedraw(),void b._triggerGridEvent("pageSetEnd",{page:a,pageinfo:b.pageInfo()}))},tb.prototype._displayProgress=function(b){var c=this;if(b===!0){var d=null==c.option.progressText?c.option.defaultProgressText:c.option.progressText;if(a.isFunction(d)&&(d=d.call(c)),c.state.$progress)return void(("string"==typeof d||"number"==typeof d)&&c.state.$progress.filter(".progress").html(d));var e=a("<div></div>").addClass("progress alopexgrid-progress").addClass(c.option.progressStyleclass||"").css(c.option.progressCss||{}),f=a("<div></div>").addClass("modal alopexgrid-progress-modal").css(c.option.modalCss||{});("string"==typeof d||"number"==typeof d)&&e.html(d),c.$root.append(f,e),c.state.$progress=f.add(e)}else b===!1&&c.state.$progress&&(c.state.$progress.remove(),c.state.$progress=null)},tb.prototype._refreshProgressOptionFromArguments=function(b){var c=this,d=a.makeArray(b),e=a.grep(d,function(b){return a.isPlainObject(b)})[0];e&&(e.hasOwnProperty("progressText")&&(c.option.progressText=e.progressText),e.hasOwnProperty("progressStyleclass")&&(c.option.progressStyleclass=e.progressStyleclass))},tb.prototype.refreshProgress=function(){var a=this;a._refreshProgressOptionFromArguments(arguments),a.state.$progress&&a._displayProgress(!0)},tb.prototype.showProgress=function(b){var c=this;c._displayProgress(!0),c.state.progressStackCount=c.state.progressStackCount||0,c.state.progressStackCount+=1,c._refreshProgressOptionFromArguments(arguments),a.isFunction(b)&&setTimeout(function(){b.call(c),c.hideProgress()},c.option.progressDelay||10)},tb.prototype.hideProgress=function(a){var b=this;b.state.progressStackCount=b.state.progressStackCount||0,b.state.progressStackCount-=1,b._refreshProgressOptionFromArguments(arguments),(a===!0||b.state.progressStackCount<=0)&&(b._displayProgress(!1),b.state.progressStackCount=0)},tb.prototype._showProgress=function(a,b,c){var d=this,e=null;"function"==typeof a&&(e=c?function(){a.call(d,function(){d.hideProgress()})}:function(){a.call(d),d.hideProgress()}),b?d.showProgress(e):(d.showProgress(),e?e():d.hideProgress())},tb.prototype.enlargeStart=function(){var b=this;if(b.state.isZoomed)return void alert(tb.i18n("enlargeMsg"));var c,d=a(document.body),e=gb.scrollTop(),f=b.$root.parent(),g=f.children().index(b.$root);a("#blocker_"+b.key).length>0?(c=a("#blocker_"+b.key),c.show()):(c=a('<div id="blocker_'+b.key+'" class="'+_a+' alopexgrid-enlarge-blocker"></div>'),c.addClass("alopexgrid-refer-"+b.key),d.append(c));var h,i;a("#content_"+b.key).length>0?(h=a("#content_"+b.key),i=h.find(".alopexgrid-enlarge-closebutton"),h.show()):(h=a('<div id="content_'+b.key+'" class="'+_a+' alopexgrid-enlarge-content"></div>'),h.addClass("alopexgrid-refer-"+b.key),i=a('<a id="closebutton_'+b.key+'" class="'+_a+' alopexgrid-enlarge-closebutton"></a>'),i.html(b.option.enlargeOption.closeButtonMarkup),i.off(".alopexgridEnlargeCloseButton").on("click.alopexgridEnlargeCloseButton",function(){b.enlargeExit()}),h.append(i),d.append(h));var j=b.option.height;h.append(b.$root),d.css("overflow","hidden"),gb.scrollTop(0),b.suppressRender(!0),b.updateOption({height:gb.height()-b.$root.offset().top}),b.suppressRender(!1),b.redraw(),b.state.isZoomed=!0,b.state.beforeZoomHeight=j,b.state.beforeZoomScrollTop=e,b.state.beforeZoomParent=f,b.state.beforeZoomSiblingIndex=g},tb.prototype.enlargeExit=function(){var b=this;if(b.state.isZoomed){var c=a(document.body),d=b.state.beforeZoomParent,e=a("#blocker_"+b.key),f=a("#content_"+b.key);f.find(".alopexgrid-enlarge-closebutton");c.css("overflow",""),e.hide(),f.hide();var g=d.children(),h=g.eq(b.state.beforeZoomSiblingIndex),i=g.eq(Math.max(0,b.state.beforeZoomSiblingIndex-1));h.length?h.before(b.$root):i.length?i.after(b.$root):g.length?d.append(b.$root):d.append(b.$root),b.suppressRender(!0),b.updateOption({height:b.state.beforeZoomHeight}),b.suppressRender(!1),b.redraw(),b.state._vspLastLeft=-1,gb.scrollTop(b.state.beforeZoomScrollTop),b.state.isZoomed=!1,delete b.state.beforeZoomHeight,delete b.state.beforeZoomScrollTop,delete b.state.beforeZoomParent,delete b.state.beforeZoomSiblingIndex}},tb.prototype.suppressRender=function(b){var c=this;"boolean"===a.type(b)?c.state.renderingSuppressed=b:a.isFunction(b)&&(c.state.renderingSuppressed=!0,b(),c.state.renderingSuppressed=!1)},tb.prototype._isInstanceValid=function(){return this&&this.key&&this.option&&this.state?!0:!1},a.fn.__alopexgrid=function(){return Za(this)};var zb=function(){var b=a(this);return b.attr("data-alopexgrid")||(b=b.find("."+_a.split(" ").join("."))),b.each(function(){var b=Za(this);if(b){var c=b.key;b.removeFilterDropdown(),b._viewEventRemove(),gb.off(b.eventns),hb.off(b.eventns),a(document.body).off(b.eventns),a(".alopexgrid-refer-"+c).remove();for(var d in b.state)b.state.hasOwnProperty(d)&&delete b.state[d];for(var d in b.option)b.option.hasOwnProperty(d)&&delete b.option[d];for(var d in b)b.hasOwnProperty(d)&&delete b[d];a(this).removeData(tb.KEY_NAME).empty().removeAttr("data-alopexgrid").css("height","").css("width",""),delete tb.instances[c]}}),this},Ab=/<(?:script|style|link)/i,Bb=function(c){if(!this.length)return this;if("string"==typeof c){if(!w(b))return;if(!tb.prototype[c])throw new Error("[AlopexGrid] AlopexGrid has no method ["+c+"]");var d=void 0,e=void 0,f=a.makeArray(arguments).slice(1);return e=this.each(function(a,b){if(!Ab.test(this.tagName)){var e=Za(this);return e||(e=new tb(this)),d=e[c].apply(e,f),void 0!==d?!1:void 0}}),void 0!==d?d:e}return this.each(function(a,b){var d=Za(this);d?d.updateOption(c):d=new tb(this,c)})};if(a.fn[cb]){var Cb=a.fn[cb];a.fn[cb]=function(){this.each(function(){var b=Za(this);return b&&b.version===$a?zb.apply(a(this),arguments):Cb.apply(a(this),arguments)})}}else a.fn[cb]=zb;if(a.fn[bb]){var Db=a.fn[bb];a.fn[bb]=function(){var b=Za(this);return!b&&a.isPlainObject(arguments[0])?arguments[0].version===$a?Bb.apply(this,arguments):Db.apply(this,arguments):b&&b.version===$a?Bb.apply(this,arguments):Db.apply(this,arguments)}}else a.fn[bb]=Bb;if(a[bb]){var Eb=a[bb];a[bb]=function(){return window[ab].version===$a?tb.setup.apply(this,arguments):Eb.apply(this,arguments)}}else a[bb]=tb.setup;a.alopex&&(a.alopex[bb]=tb.setup,a.isFunction(a.alopex.registerSetup)&&a.alopex.registerSetup(eb,tb.setup)),window[ab]=tb}(jQuery),function(a){var b={m:["\n[data","alopexgrid] .wrapper { \n	background","image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAAAmCAYAAACMCKQrAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RUIxODA3MUU4NzdFMTFFNUE5Q0ZGMzBGNkNGQkY0ODkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RUIxODA3MUY4NzdFMTFFNUE5Q0ZGMzBGNkNGQkY0ODkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFQjE4MDcxQzg3N0UxMUU1QTlDRkYzMEY2Q0ZCRjQ4OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFQjE4MDcxRDg3N0UxMUU1QTlDRkYzMEY2Q0ZCRjQ4OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkSPrRoAAA6YSURBVHja7F0JlBXFFX1/hmGRfRdRAogQBFHCGkCEGEGDbBpMCGGVLSa4BAOKBxTZIoIhIiJhcSAIiaDBjSDIJqiQgIAsAjoGZRMEWUSYAQZSL//W+W/K3n53f84E+57zzun+v39XddVb7ntVPRObvnEbhYx7lYxXUkDJViXtlRzDdzWVvKmkopL+Sv5OESKEiyZKeitJU/KqkiUh3DNDyRYllXG+tEDInW6qZLKSIjhvruQmJStx3k7JdTjuHRnOZYviSupBakCJGeeV7FLynpKPU9BuI1ZqJSVw3lfJHUreDuHepcR9i4dpOCWVzBJGo3FBHJ8VxzmRfl12qAFl7aKkusN1bEDLlIxW8n6I7bcVys2I4bMwDCdXHqeF2OlJSmoncf3FSM8uG7CC/l7JB0qGuhgNgcZzJFitZJySQiH1Y5PFZ9tS8cBhRZyeSnrhmPOZbCWVIn36XoCZxmwlHS089EdKNis5AuPi3La+krpC/x4Bpe8ocmG/WKzkYSUD0N5flczJr4ZTB3mNxh+U9IgM53uBwkoWKLnNoGHTIZtsolMbJSOUNMNnR/C7oGAWMxH6mAYHTvnRcDjEzkQyyJirJBNeJFXgNgvi+FsjhwobRTEBF9BWfmynaIC+cT56JkC/xxlG86WSPkr+6aLcb4Om/Rm0rlvAfpg4myI6GprhjKF4+Y+RpeR+I4kKCy0oXtZuinCfgc9PK9mLRHNJEpWaTlCaBYan08lkByUNlJQRCn0M1ONNTHyQiWZ6czvFq4y1UbHR7ZxQshttMPX4yuYe6UqGIbqzdx+fZB9eUNJayQPkr2T7E/xW4yTGdb3H32eDUhVMkaKHiYtm9ApiOKzIg3GcgxznGCVKj2GAue9IJbc6XFMXieYoipe3+fovHK6/W8lCHFeA19OKwFWeHzv8lsudvE61A05jXpLPkwZlGaKkqsN1bLRdlRxQ8jz6eMq4pjwi+xVKnlKyXclbHvvxIPrB+K0PwymAcZZeeHASRhNGdGCDu4HiVTR2oDvhdPyiGsXXaQrASNh5fS3oJ0fTa+VE+sE18FgaTyhZG7KVP6ZklYXRHFfyHxhHtkFZmCb8S8mdLsovjY5QCXrHMJpvKL7mwFFmH+WtAl6v5CUkniU8Pk9ZJa/BEKoannc7KlJbDNp1FYx5OSXWvzQOw3g1/oJ5cUMTUCyNTB9z0xQsQIPXZV4Mef7LYIzfwTiXFN/1QtGBx2wFxUvaf8J3o/Eblmc8tNMN9/hQyRqKrzny83A1bhrFF+3JmH9fEYcpwlRMKsHL/THkQZtk0IDjqJDMV/IZaFIajIUVoSfoFYHKLaL4ekKmi4fLgvfV/Weq9DImajPoRy5oXXlUfnrBcBjd4aXuRh+djIa9ekPx2Wrkhyvg2XJAQctCMXsLB9AYTuSngo5yX8dCge/AfEzFOFxwoIgzkdQTjPgVH/PTxTifmgKKnoEiQjnM9zBE3SkiWsoA8IVwDNrZlna4/9Vw/u1smAEXt/rjWYejgEFBIs5Q0dgBi4cII9JIo1kBxbkfHuYQFJoVdT/Ft1V0hJLtE8atObwTOD94GsfbMeBdkdwehPfPBgXdjWsbwqtJrj8bbdphujAavt8gJa3gDPZDMS7AeA7gmdoj38oS0ecfFsrQH30lzMtQF4dUB8ebXK51Ks60MiLfihTlFWeEnvL4Pm7o2yHM+XlEC502yGhuhSpwZKbRZCFSLQOr0cb3HJyWb8NpAVqmMQATHxZaI1fRmA9v+omH376FCk+WmOAZCPl2qI2ouxkDs8pDO2fggboLL9vBoZLYT0lnwZW7YyK8YCmMeRfOa1kUAVhxBhq0ubnFvbpTYq3tNCLaKR9zdDUUT2OrMNxUoSBo+BARrduBRvEc8trQuiQMf6ZwIIw9iCz1oENtQOPbokDDKObXcCqA+uiK1tOoMIUZmkeJhHMdlC6Z5HEnaNNJnFdHpHLCASj+l0n2d64ReXhSf2BcUw5JtMYEUZjwis+h8OdElLzJuOZ1iq9faCXLBLXUYAV7Vpw/hHzKDyqjCqix6xJVth6B0j8PZ7IY83wK+YjXknx/I3owk7gF83JafH4ajqsdxuucX8N5RlQV1huRJww0E54yG17UajB+SIl1HCtsAQXRPL+vSwLP4X+vzz6PhccltNHT+P4eSiwEH6DkS8YknMh8w/uaGIHCCKMGjFTT1hlC2RegkEABDMekN6lGDM+9CjTebz5VihKVYIJ+9XSpwmqKe8hPceA+VB8IJb8+hnWGAZlwLrDxiA/A+zZ3iUSfiCpIZeQhiyyuYx4bZIf2WQzqTEHZRguj7WAMfpAtJVxy/iUU6GcU3xt23vCQvZEHlkBkWgladTOu+QxzGZQZSLit+KfBa5d2KFqkgy2sdxnroRRsh0FbgxXM90jxzGf2ZDh1jPIlU58dIRsN96OBET5NdELJcb/Vgwj8BrRFJus32hgOe7BvAvZ9Me5RHNSwCjhzeYNH10KECrLOlQPDqYT7bTe+34H5yRTVLj0OuXB4R0JI2pNBGvSnjst1U10MZ4mIqH7RXhxfQHHGt8I6gcu9LwmqM4dSs2muFCXK2zzBj1K87KpLpXXxkDHkWpXJerGrEziwiVo27W4Koe9HoMBcQi6J5Fkbjtyvd2+I43UFaPN2i+9mo8jCFKSwQUlXp2Du0kO65pzL97tDiJQ1jaLKtlQZznh4a0Ijg1LEYTNE3hKDYjAvb4nvWomqBl93jUXU49+Msbl/MZvPw9h/dl5QsDQRDdOFwpwFj04Pob0YvL4TVR6EBFjnIxscxiZZmBU0t0VX7itvuqwootVFSDdDmYManxOKoVijwTnL16kwnHsEH85BNeJkigznokEBchGF7CpiZrJfHDlAFZvrU7kR1BxHq7aykGecJ2OzYAA4Lbj2Q2TW4JLtXRRfHwrDcLgkX0QUIpyQa8MCGPWTMJygKATn6pdyejKcmuCcGkOQdIbhLa2U/xQUoZKP+2jF6OeQP9itNYXx6kMxoTzfihziNJ6Lv78Sk7b3EihIKziRAgbl5koabx/6NOD998NbV8X5DXByx1PAeFKJQIaTZkObeJD1wuEiyvu+TRDIRPwqYQCnxISm2YRlVsTDOG5pfHctJsHOcLbbfN4shGfi/Ksajrl/nwsF089UmpJ7O9YvuJ1pQiHHIudh8Fae6S6FFa+RbqM4r4r8Lr8j26DmGUEKNVY/5PWAW3C8B548rNecswxvX1WcO70Xzp765xQvp5IRct14NucXa2y+a0Fix6tP9BPHaymxGs8Ttc6gvkHhFiGnCOrDFSrevjSYEusUHI2Gh9APk/L1/T8wHJ4X+YpGBXLeVZKU4fCK7DChcH0pePlSYqfIk0pQ3h22PBlHbX7HvxkJz5aDwoFER4c2eS1jq0OuNDTA8zSkxPoWwyxvzhFOp0tAPj8VBZqRNt9z1a4rjjnp7YHjo5hHXbXi+W0dcB4XG7STx795Pjec84INaCdUyy+tk4bD5dOZ4jOuqC0PufM8ie+K825G0jnV5ne8BtAIk8Ul5/eNSWvmUBQY5yFi9PDxLHqnsf5DE8sgEh9QYv2oBKhSER9tcZFkIDzkfRa5AecZcgs9v74uy7fLKLFrIR39LheQrj1r5CrTyHk3cuh5hg/IV194HH6VhNHF7AyHH1yvqq5y8GxBE7IF4pxX9JuI8wlIYK2wA15NvnTVCMroRF28rF1wTtcniefg6h3v06uH8xNkXwF8WERSzs1eRLLuFfyi2SRx/hzlXT1n2jpLFFtmQUw8IZxWNQq27UZHwA2Gc3uFvrtfzwnpl9hw3qC8leFelPdVDzvwjpWKVobDk9NZhPm+FM4fT7DCQpHrZBgR4QRygf02E7VXFBYeRUQsb9MOvxowxKUvc0F/9I5ZnvgGDtcXBSVaI2hmDjzXTpvfcF4m179+QfFt+G0c2onBSbwGQ9Hebp6FQxsjJn8n5d2LZXpN7rtec+pMeXdVJwtOtAdQ3rWQ1jDOHi7OoTxyrZZGsp5q7KG8L9yx0+EF/hsd5nsiHFeeKK+3ukw0PFwqN+6dhtK/LAZ7sOgD77a9EwYmE3fm5ryoV5gSq/ROnqUHuf+VE96r9jiMjPOPu0AFl4EOfgrDKI3qGe8Ru84w9B6U2Hpuh/mgWZNhBI1RDHkXshPtFEX1rbmR/xEmuJ/xGff1QVGM6EPOZWF+nt/hXgSF+LdRJUsGH6Jos1Ak2lVQyRsOB8N7Dg/gu8pgGFykuNK41266NHgK9F4XpmqClcyCQzsOI26CnLGeyLNLSMOZIXg6e/W/BexYjPL+gTmrWj3TtUxKvB8yDp3XoX8zBneiqEZVcikCaC/IXP9JjxGzLCICVxH5NYlfIwq3hThhFSKJ120bTBt58ynvt7teULeWLr/jCDGWErudJV2URZLHyNta2zy0OQDzNAeU1++m3ZWInuwU5KvnNch9cZRxBjRy8iUynIMo1CyixM4KdsIPQawwAuMzQVK1ssJ7DAmhYxcEbckm+0U/pglLHbjuPtCa2+DR7BYxc+FJJ4KyjEiCZurklN/F4Re9bkYkPOigxMvhiW6l5Pc6LYUn410Y6xyiw1mMIdOy+hZGwygoPOCrRh7kBs67NgmlCbqbYSPy1QEOOaqJr5BXN0LhItfCActFcq9FFUkR7bZabYBjdvvjJjy//H7XKEq8Efq/NmLTN25jCtIeniestzkrIZqsJfs1FP1gA9FBt7+0UhaeugLoGiv9KdCAj8j7C29PUmItYwqoixUHr4O2MmCIR2Gge0L0ftWRqJdBOxdB/3getpL7VqGW8PIvUPJ/4aUKqppvULh/JrYgnANTzR9RfI0tJqpxH4MGv+eib4XgyAqLXNHLrvzGlNhudAztuI3h7ajMFhHpAtP31ymxaFqOEgu9h2Mp+Dcf+R1eDCdCBEekRUMQIUJkOBEiRIYTIUJkOPkHsWjaI0SGEwwFIxWIEBmON2RSfI1kD313l3WECJ7wXwEGAPF+SxBiYYecAAAAAElFTkSuQmCC');\n	background","position: 50% 50%; background","repeat: no","repeat;\n}\n[data","alopexgrid] .bodycell.alopexgrid","cell { background: rgba(255,255,255, 0.1);}\n[data","alopexgrid] .bodycell.cell","fixcol { background: #ecebf0;}\n[data","alopexgrid] .bodycell.cell","fixrow { background","color: #ecebf0;}\n[data","alopexgrid] .bodycell.cell","grouping { background","color:#9ccdd4; }\n[data","alopexgrid] .bodycell.cell","groupmeta {\n	background","color:#f7f7f4;\n	font","weight: bold;\n	text","align: left;\n}\n[data","alopexgrid] .bodycell.cell","groupmeta ~ .cell.bodycell.cell","rowspan","column {background:#9ccdd4}\n[data","alopexgrid] .bodycell.cell","groupmeta.groupmeta","align","left {text","align: left;}\n[data","alopexgrid] .bodycell.cell","groupmeta.groupmeta","align","center {text","align: center;}\n[data","alopexgrid] .bodycell.cell","groupmeta.groupmeta","align","right {text","align: right;}\n[data","alopexgrid] .bodycell.cell","groupmeta.cell","groupfooter {\n	background","color:#6f7595;\n	border","bottom:2px solid #ecebf0;\n	color: #ffffff;\n}"]
}.m.join(String.fromCharCode(45));if(document.createStyleSheet){var c=document.createElement("style");c.setAttribute("type","text/css");var d=document.getElementsByTagName("head")[0];c.styleSheet.cssText=b,d.appendChild(c)}else a("<style>").html(b).appendTo("head")}(jQuery);
//# sourceMappingURL=alopex-grid-trial.min.js.map